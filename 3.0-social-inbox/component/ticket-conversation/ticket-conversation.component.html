<div *ngIf="historyText" class="modal__head">
  <h3 class="modal__title text__label">{{ historyText | translate }}</h3>
  <span class="modal__action">
    <mat-icon mat-button mat-dialog-close fontSet="material-icons-outlined"
      >close</mat-icon
    >
  </span>
</div>
<div *ngIf="historyText" class="modal__body">
  <div class="create__body bg__grey">
    <div class="create__body__summary">
      <!-- post Details -->
      <div class="post-detail__conversations">
        <div class="post-detail__conversations--body">
          <div
            class="post-detail__conversations--item"
            *ngIf="comminicationLogLoading"
          >
            <app-post-loader></app-post-loader>
            <div class="post-reply">
              <app-post-loader></app-post-loader>
            </div>
            <app-post-loader></app-post-loader>
          </div>
          <div class="conversations" *ngIf="!comminicationLogLoading">
            <!-- <div *ngIf="this.showLoadMoreOption" class="post-detail__conversations--loadmore">
                        <button mat-raised-button (click)="getCommunicationLogHistory(lastmentionDateEpoch)" class="btn__round btn__outline">See Previous Conversation</button>
                    </div> -->
                      <ng-container *ngIf="postObj?.channelGroup!=ChannelGroup.Email">
            <div *ngFor="let object of baseLogObject">
              <ng-template
                [ngIf]="!object.isBrandPost && !object.isCommunicationLog"
                [ngIfElse]="BrandCommunicationLog"
              >
                <div
                  class="post-detail__conversations--item"
                  [ngClass]="{ active: postObj.tagID === object.tagID }"
                  #conversationItem
                >
                  <!-- <app-post-message [baseMention] = "object"></app-post-message> -->
                  <app-post
                    [postData]="object"
                    [openReply]="postObj.tagID === object.tagID"
                    [fromCall]="2"
                    [pageType]="currentPostType"
                    [mentionHistory]="true"
                    [mentionHistoryForSubject] = "true"
                  ></app-post>
                </div>
              </ng-template>
              <ng-template #BrandCommunicationLog>
                <ng-template
                  [ngIf]="object.isBrandPost"
                  [ngIfElse]="CommunicationLog"
                >
                  <div class="post-reply post-detail__conversations--reply">
                    <app-post
                      [postData]="object"
                      [fromCall]="2"
                      [pageType]="currentPostType"
                      [mentionHistoryForSubject] = "true"
                      [mentionHistory]="true"
                    ></app-post>
                    <!-- <app-post-message [baseMention] = "object" ></app-post-message> -->
                  </div>
                </ng-template>
                <ng-template #CommunicationLog>
                  <div
                    *ngIf="object.isCommunicationLog"
                    class="post-reply post-reply-log"
                  >
                    <app-post-log [logMessage]="object"></app-post-log>
                  </div>
                </ng-template>
              </ng-template>
            </div>
            </ng-container>
            <ng-container *ngIf="postObj?.channelGroup==ChannelGroup.Email">
<div *ngFor="let object of emailBaseMention; index as i">
  <ng-template [ngIf]="!object.isCommunicationLog" >
      <div class="post-detail__conversations--item"  #conversationItem>
    <app-post [postData]="object" [openReply]="i==emailBaseMention?.length-1 && !object.isBrandPost" [fromCall]="2" [pageType]="currentPostType"
      [mentionHistory]="true" [mentionHistoryForSubject]="true" [expandedView]="emailBaseMention?.length-1 == i" [allMentionList]="emailBaseMention" [subject]="(postObj?.title)?postObj?.title:'No Subject'" [showEmailPopup]="false"></app-post>
      </div>
    </ng-template>
  </div>
            </ng-container>
          </div>
        </div>
      </div>
      <!-- Post Details Ends -->
    </div>
  </div>
</div>
