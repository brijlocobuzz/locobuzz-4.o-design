<div class="post-detail post-detail__height" [ngClass]="{ openTabConversation: hideQuickWindow, 'ozontel-height' : ozontelFlag && comminicationLogLoading, 'new-ui-theme__ticketdetails' : !defaultLayout }">
  <div *ngIf="!hideQuickWindow" class="post-detail__list">
    <div class="post-detail__list--head" [ngClass]="{'p-8' : !defaultLayout}">
      <div class="d-flex-items-center justify-content-space-between w-100-p">
        <div id="arrow_back" (click)="CloseTicketDetailWindow()" class="post-detail__close"
          [ngClass]="{'element__disable': callRunning || callNote }">
          <mat-icon class="post-detail__close--icon">arrow_back</mat-icon>
          <p class="text__title post-detail__close--text" [ngStyle]="{'white-space': callObj?.callHeader ? 'nowrap' : 'inherit',
                        'font-size': callObj?.callHeader ? '1.5rem' : '1.6rem'}" *ngIf="!openCallDetailFlag"
                        >{{ 'Back-To-Ticket-List' | translate }} </p>
          <span class="text__title" *ngIf="openCallDetailFlag" [ngStyle]="{'white-space': callObj?.callHeader ? 'nowrap' : 'inherit',
                'font-size': callObj?.callHeader ? '1.5rem' : '1.6rem'}">{{callObj?.callHeader}} <span
              class="colored__locobuzz">{{postObj?.author?.locoBuzzCRMDetails?.phoneNumber ?
              postObj.author.locoBuzzCRMDetails.phoneNumber : postObj?.author?.socialId}}</span></span>
        </div>
        <ng-container *ngIf="TicketData.length > 0">
          <mat-icon fontSet="material-icons-outlined" class="pl-4" [matTooltip]="'Refresh-to-update-shortened-view' | translate" matTooltipClass="custom-tooltip" (click)="sortHandPostReFreshTime(true)"
            style="cursor: pointer;" [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">refresh</mat-icon>
        </ng-container>
      </div>
    </div>
    <ul class="post-shortend__status" *ngIf ="!defaultLayout">
      <li class="post-shortend__status--list active">
        Open <span>(1)</span>
      </li>
      <li class="post-shortend__status--list">
        On Hold <span>(1)</span>
      </li>
      <li class="post-shortend__status--list">
        Pending <span>(1)</span>
      </li>
      <li class="post-shortend__status--list">
        Closed <span>(1)</span>
      </li>
      <li class="post-shortend__status--list">
        All <span>(1)</span>
      </li>
      <li class="post-shortend__status--list">
        <mat-icon fontSet="material-icons-outlined" class="s-20">more_vert</mat-icon>
      </li>
    </ul>
    <div *ngIf="postShortenedData && !hideQuickWindow" (scroll)="onScroll($event)"  class="post-detail__list--body">
      <ng-container *ngFor="let each of TicketData | slice:startIndex:endIndex; trackBy: trackByTagId">
        <app-post-shortened id="{{each?.ticketInfo?.tagID === selectedPostID ? 'active': ''}}" [postShortenedData]="each" *ngIf="!openCallDetailFlag" class="ticketInfo"
          [ngClass]="{ active: each?.ticketInfo?.tagID === selectedPostID ,'post-shortend-disable': each?.ticketInfo?.tagID !== selectedPostID && comminicationLogLoading}"></app-post-shortened>
      </ng-container>
      <app-calling *ngIf="openCallDetailFlag" (callAgainEvent)="callAgainEvent($event)"></app-calling>
      <!-- !openCallDetailFlag -->
    </div>
  </div>
  <div class="post-detail__conversations" [ngClass]="{'dynamic-crm__conversations': hideQuickWindow }" [ngStyle]="{
       'max-width': userInfoToggle ? '59%' : '80%',
       'min-width': ozontelFlag ? '100%' : (userInfoToggle ? '59%' : '80%')
     }">
    <div #forHeightGet>
    <div [ngClass]="{ none: showLockStrip, 'pl-5 pr-12 py-0' : !defaultLayout, 'pl-0' :  ozontelFlag}" class="post-detail__conversations--head">
      <div (click)="CloseTicketDetailWindow()" *ngIf="!hideQuickWindow"
        class="post-detail__conversations--head-item responsive__detail--close post-detail__close">
        <mat-icon>arrow_back</mat-icon>
      </div>
      <div (click)="CloseTicketDetailWindow()" *ngIf="!defaultLayout"
        class="post-detail__conversations--head-item">
        <p class="font-weight-600">{{'Ticket Details' | translate}}</p>
      </div>
      <div class="post-detail__conversations--head-item d-flex-items-center" [ngClass]="{'g-5' : ozontelFlag}" *ngIf="!callNote">
        <img *ngIf="sfdcTicketView" class="ml-7" src="assets/images/login__locobuzzLogo.png" alt="Locobuzz" style="width:60%" />
        <ng-container *ngIf="!sfdcTicketView && ozontelFlag">
          <mat-icon (click)="goBack($event)" class="colored__main--text cursor-pointer icon-circle">arrow_back</mat-icon>
        </ng-container>
        <ng-container *ngIf="!sfdcTicketView && defaultLayout">
          <button mat-stroked-button class="materialbtn__md blank-hoverBtn block-center" (click)="clearnote();"
            [matMenuTriggerFor]="addnote" #menuTrigger="matMenuTrigger" *ngIf="!noteSpinner" [ngClass]="{ element__disable: isReadOnly, 'small_font-size h-25 px-5' : !defaultLayout }">
            <mat-icon class="btn__icon d-flex-items-center justify-content__center" [ngClass]="{'small-icon-font-size mr-0' : !defaultLayout}">add</mat-icon> {{ 'Add-Note' | translate }}
          </button>
        </ng-container>
        <button mat-stroked-button class="materialbtn__md blank-hoverBtn account-profile__spinner--locobuzz h-36 w-113"
          *ngIf="noteSpinner">
          <mat-spinner [diameter]="25"></mat-spinner>
        </button>
        <mat-menu #addnote="matMenu" class="note-elem__dropdown p-6">
          <div class="note-elem" [ngClass]="{'p-0' : !defaultLayout}">
            <div class="note-elem__input" [ngClass]="{'pt-7 add-note-height__default-layout' : defaultLayout, 'add-note-height__ai-layout' : !defaultLayout}" (click)="$event.stopPropagation()">
              <mat-form-field appearance="outline" class="material__select">
                <mat-label class="text-capitalize">{{ 'Add-Note' | translate }}</mat-label>
                <textarea matInput #noteTextArea [(ngModel)]="note" (input)="noteTextChange(noteTextArea, 'note')" class="resize addnote__textarea"
                [ngClass]="{'pt-0 small_font-size' : !defaultLayout}"></textarea>
              </mat-form-field>
            </div>
            <div [ngClass]="{ element__disable: ssreSimulationRight }" *ngIf="mediaSelectedAsync$ | async as MediaSelected"
              class="textarea-featured__foot--item--media note-elem__attach mt-15" [ngClass]="{'pt-10' : defaultLayout}">
              <ng-template ngFor let-ugc [ngForOf]="MediaSelected">
                <span *ngIf="ugc.mediaType == 2" matTooltip="{{ugc?.displayFileName}}" class="textarea-featured__foot--item--icon">
                  <img class="media__img--icon" [src]="ugc.mediaPath" alt="" />                  
                  <span class="item__overlay">
                    <mat-icon class="delete__img--icon" (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                  </span>
                </span>
                <span *ngIf="ugc.mediaType == 3" matTooltip="{{ugc?.displayFileName}}" class="textarea-featured__foot--item--icon">
                  <video class="media__img--icon">
                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/m4v" />
                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mp4" />
                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mpeg" />
                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-msvideo" />
                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-ms-wmv" />
                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/avi" />
                  </video>
                  <span class="item__overlay--video">
                    <mat-icon class="delete__img--icon" (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                    <mat-icon class="play__img--icon">play_circle_outline</mat-icon>
                  </span>
                </span>
                <span matTooltip="{{ugc?.displayFileName}}"
                  *ngIf="ugc.mediaType == mediaTypeEnum.PDF || ugc.mediaType == mediaTypeEnum.DOC || ugc.mediaType == mediaTypeEnum.EXCEL"
                  class="textarea-featured__foot--item--icon">
                  <img src="assets/images/account/pdf__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.PDF" class="media__img--icon">
                  <img src="assets/images/account/doc__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.DOC" class="media__img--icon">
                  <img src="assets/images/account/excl__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.EXCEL"
                    class="media__img--icon">
                  <span class="item__overlay">
                    <mat-icon class="delete__img--icon" (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                  </span>
                </span>
              </ng-template>
              <span class="textarea-featured__foot--item--icon block-center cursor-pointer" *ngIf="selectedNoteMedia.length > 0" (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
                <mat-icon fontSet="material-icons-outlined" class="colored__locobuzz">add</mat-icon>
              </span>
            </div>
            <!-- *ngIf="showMediaButton" -->
            <div class="textarea-featured__foot--item" [ngClass]="{'mt-10' : defaultLayout}" *ngIf="selectedNoteMedia.length <= 0">
              <!-- <a [ngClass]="{'element__disable' : ssreSimulationRight }" href="javascript:void(0)" (click)="openMediaDialog()">
                                                <mat-icon fontSet="material-icons-outlined">insert_photo</mat-icon>
                                            </a> -->
              <a [ngClass]="{ element__disable: ssreSimulationRight }" class="textarea-featured__foot--icon text__regular--sm"
                href="javascript:void(0)" (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
                <mat-icon fontSet="material-icons-outlined custom__icon--md">insert_photo</mat-icon>
                <span>{{'Attach-Media' | translate}}</span>
                <span *ngIf="selectedNoteMedia.length > 0">({{ selectedNoteMedia.length }})</span>
              </a>
              <!-- <a href="javascript:void(0)" class="textarea-featured__foot--icon">
                                                UGC
                                            </a> -->
            </div>
            <div class="note-elem__actions" [ngClass]="{'mb-0' : !defaultLayout}" (click)="$event.stopPropagation()">
              <button mat-button class="ml-auto colored__blue blank-hoverBtn mr-7"(click)="clearInputs(); closeMenu()" [ngClass]="{'h-25 small_font-size px-5' : !defaultLayout}">{{ 'Cancel' | translate }}</button>
              <button mat-button (click)="addNote(note);$event.stopPropagation();$event.preventDefault()" class="colored__blue blank-hoverBtn" [ngClass]="{'h-25 small_font-size px-5' : !defaultLayout}">
                {{ 'Save' | translate }}
              </button>
            </div>
          </div>
        </mat-menu>
         <img class="m-10 chatbot-icon__light" *ngIf="showChatbot" src="assets/images/media/chatIcon.svg" (click)="openChatBox()"
           matTooltip="Open In Chat" matTooltipClass="custom-tooltip" />
          <img class="m-10 chatbot-icon__dark" *ngIf="showChatbot" src="assets/images/media/chatIcon-dark.svg" (click)="openChatBox()"
            matTooltip="Open In Chat" matTooltipClass="custom-tooltip" />
      </div>

        <div *ngIf="dropdownConnectedUsers$ | async as connectedusers" class="post-detail__conversations--head-item">
          <ng-container
            *ngIf="showConnectedUsers && (this.currentUser.data.user.role == userRoleEnum.Agent || this.currentUser.data.user.role == userRoleEnum.SupervisorAgent || this.currentUser.data.user.role == userRoleEnum.LocationManager)">
            <div class="custom__selectmenu dropdown">
              <button class="custom__selectmenu--trigger select-trigger text-capitalize" #menuTrigger="matMenuTrigger"
                [matMenuTriggerFor]="customdropdown" [ngClass]="{'small_font-size py-0 px-8 h-25' : !defaultLayout, 'pr-15' : ozontelFlag}">
                <img class="custom__selectmenu--img mr-7 " [src]="currentUserName.channelIcon" alt="" />
                {{ currentUserName.label }}
              </button>
              <mat-menu #customdropdown="matMenu" class="custom__selectmenu--menu" yPosition="below">
                <ul class="m-0">
                  <li mat-menu-item *ngFor="let user of connectedusers" [ngClass]="{'h-30' : !defaultLayout}" (click)="selectChange(user)">
                    <!-- {{ user.label }} -->
                    <div class="option d-flex-items-center">
                      <!-- <mat-icon *ngIf="user.icon">{{option.icon}}</mat-icon>  -->
                      <img class="custom__selectmenu--img mr-7" [src]="user.channelIcon" [ngClass]="{'small-image-width' : !defaultLayout}" />
                      <span class="option__label" [ngClass]="{'small_font-size' : !defaultLayout}">{{ user.label }}</span>
                    </div>
                  </li>
                </ul>
              </mat-menu>
            </div>
            <!-- <app-custom-dropdown [model]="connectedusers[0]"  [options]="connectedusers" (selectChange)="selectChange($event)" class="w-100-p"></app-custom-dropdown> -->
          </ng-container>
        </div>
        <div class="post-detail__conversations--head-item" *ngIf="userChangeLoader">
          <mat-spinner [diameter]="20"></mat-spinner>
        </div>
      <div class="ml-auto d-flex-items-center right-auto">
        <div  class="d-flex-items-center mr-10" *ngIf = "ticketTagList && ticketTagList.length" (click) = "openTicketDisposiion()">
          <div class="ticket_intelligence" [ngClass]="{'height-unset py-0' : !defaultLayout}">
            <img class="img" [ngClass]="{'small-image-width' : !defaultLayout}" src="assets/ticket-summary/AI_Latest_Icon.svg" alt="">
            {{'Ticket-Intelligence' | translate}}
          </div>
        </div>
        <div class="post-detail__conversations--head-item new-conversation__head" *ngIf="!defaultLayout">
          <div class="post-detail__conversations--head block-center replydays"
            [ngClass]="{'height-unset small_font-size' : !defaultLayout}" *ngIf="isreplyVisible && replyDays && !isAPIFailed">
            <div class="top-strip">
              <app-replytimer [mentionTime]="replyMentionTime" [channelGroup]="this.postObj.channelGroup"
                [channelType]="this.postObj.channelType" [showShortNote] = "true" [postType]="currentPostType" (TimerExpired)="TimerExpired()">
              </app-replytimer>
            </div>
          </div>
          <p [ngClass] = "postObj?.sentiment === getSentiment.Positive ? 'sentiment-color-positive' : postObj?.sentiment === getSentiment.Negative ? 'sentiment-color-negative' : 'sentiment-color-neutral'">{{postObj?.sentiment === getSentiment.Positive ? 'Positive' : postObj?.sentiment === getSentiment.Negative ? 'Negative' :
          'Neutral' }}</p>
          <div class="post-detail__conversations--newHead">
            <mat-icon class="post-detail__conversations--newHead-icon colored__yellow--dark" [ngClass]="{'post__head--icon' : defaultLayout}" fontSet="material-icons-outlined">alarm</mat-icon>
            <p class="post-detail__conversations--newHead-text">{{ticketTime?.timetoshow}}</p>
          </div>
          <div class="post-detail__conversations--newHead">
            <mat-icon class="post-detail__conversations--newHead-icon colored__yellow--dark" [ngClass]="{'post__head--icon' : defaultLayout}" fontSet="material-icons-outlined">message</mat-icon>
            <p class="post-detail__conversations--newHead-text">{{postObj?.numberOfMentions}}</p>
          </div>
        </div>
      <div *ngIf="defaultLayout && ticketHistoryData?.crmcreatereqpop && (postObj.ticketInfo.status != 3 || (postObj.ticketInfo.status == 3 &&
        (postObj.ticketInfo.srid !== null && postObj.ticketInfo.srid !== '') || (postObj.ticketInfo?.leadID !== null && postObj.ticketInfo?.leadID !== '')))" [ngClass]="{'colored__green--dark font-weight-600':(postObj.ticketInfo.srid !== null && postObj.ticketInfo.srid !== '') ||( postObj.ticketInfo.leadID !== null && postObj.ticketInfo.leadID !== '')
        }" class="post-detail__conversations--head-item ml-auto position-relative d-flex-items-center g-10" [ngClass]="{'new-conversation__crm': !defaultLayout}">
        <!-- [matMenuTriggerFor]="clickHoverMenu" #clickHoverMenuTrigger="matMenuTrigger" -->
        <div (click)="!clickHoverMenuTriggerFlag?getRequestPopup():''" [matMenuTriggerFor]="clickHoverMenuTriggerFlag?clickHoverMenu:null" #clickHoverMenuTrigger="matMenuTrigger" class="d-flex-items-center">
          <img src="assets/images/CRM_Icon.svg" alt="" *ngIf="(postObj.ticketInfo.srid !== null &&  postObj.ticketInfo?.srid !== '' ) || (postObj.ticketInfo?.leadID !== null && postObj.ticketInfo?.leadID !== '')" class="w-14 mr-4">
            <span>{{'crm' | translate}}</span><mat-spinner class="ml-15" [diameter]="15" *ngIf="crmGetAuthorTicketDetails"></mat-spinner>
        </div>
        <mat-menu #clickHoverMenu="matMenu" yPosition="below">
          <ng-container *ngIf="clickHoverMenuTriggerFlag">
            <button mat-menu-item class="d-flex-items-center"  *ngIf="(ticketHistoryData.currentticketstatus == 'Closed' && !postObj?.ticketInfo?.srid) ? false : true" (click)="(postObj.ticketInfo.srid !== null && postObj.ticketInfo.srid !== '' && postObj?.ticketInfo?.srid) ? CaseLeadFormOpenView('Case'):CaseLeadFormOpen('Case')">
              <mat-icon class="colored__locobuzz mr-0" fontSet="material-icons-outlined">work_outline</mat-icon>
              <span class="ml-7">{{ 'Case' | translate }}</span>
              <mat-icon *ngIf="postObj?.ticketInfo.srid !== null && postObj?.ticketInfo.srid !== '' && postObj?.ticketInfo?.srid"
              class="post__foot--icon s-22 mr-3 colored__green--dark ml-7 icon" fontSet="material-icons-outlined" aria-hidden="false" aria-label="done">
              check_circle_outline</mat-icon>
            </button>
            <button mat-menu-item class="d-flex-items-center"  *ngIf="(ticketHistoryData.currentticketstatus == 'Closed' && !postObj?.ticketInfo?.leadID) ? false:true" (click)="(postObj.ticketInfo?.leadID !== null && postObj.ticketInfo?.leadID !== '' && postObj?.ticketInfo?.leadID) ?  CaseLeadFormOpenView('Lead') :CaseLeadFormOpen('Lead')">
              <img src="assets/images/channel-logos/Lead_Icon.svg" alt="">
              <span class="ml-5">{{ 'Lead' | translate }}</span>
              <mat-icon *ngIf="postObj?.ticketInfo.srid !== null && postObj?.ticketInfo.srid !== '' && postObj?.ticketInfo?.leadID"
              class="post__foot--icon mr-3 colored__green--dark s-22 ml-7 icon" fontSet="material-icons-outlined" aria-hidden="false" aria-label="done">
              check_circle_outline</mat-icon>
          </button>
          </ng-container>
        </mat-menu>
              <!-- <div
                *ngIf="(postObj.ticketInfo.status != 3 || (postObj.ticketInfo.status == 3 &&
                                    (postObj.ticketInfo.srid !== null && postObj.ticketInfo.srid !== '') || (postObj.ticketInfo?.leadID !== null && postObj.ticketInfo?.leadID !== ''))) && typeOfCrm==102"
                class="d-flex-items-center mr-10" (click)="syncSFDCData()">
                <div class="ticket_intelligence">
                  <img class="img" src="/assets/social-mention/post/Sync_icon.svg" alt="">
                </div>
              </div> -->
      </div>
      <ng-container *ngIf="lookupshow">
        <div class="lookup__wrapper">
          <div class="lookup__dialog" [hidden]="snapdealSridFound">
            <app-loopupcrm (closeDialog)="lookupshow=false" [brandDetails]="filterBrandInfo" [postData]="postObj"
              [srid]="postObj?.ticketInfo?.srid" [postType]="currentPostType"></app-loopupcrm>
          </div>
        </div>
      </ng-container>
       <div *ngIf="ticketHistoryData?.animalWelfare" [ngClass]="{'colored__yellow--dark': postObj?.ticketInfo?.srid !== null
              }" class="
                post-detail__conversations--head-item
                ml-auto right-auto
              ">
        <div (click)="openAnimalWildfare()" class="d-flex-items-center">
          <mat-icon *ngIf="postObj.ticketInfo.srid !== null" class="mr-4">check</mat-icon>
          <span>{{crmLable}}</span>
        </div>
      </div>
      <!-- <div *ngIf="ticketHistoryData?.salesForceCrm && postObj.ticketInfo.srid === null && !isCSDUser && !isBrandUser && !hideQuickWindow" [ngClass]="{'colored__yellow--dark': postObj?.ticketInfo?.srid !== null
              }" class="
                post-detail__conversations--head-item
                ml-auto
              " >
        <div [matMenuTriggerFor]="salesForceCrm" class="d-flex-items-center">
          <span>CRM</span>
          <mat-spinner color="accent" [diameter]="20" *ngIf="salesForceLoader"></mat-spinner>
        </div>
        <mat-menu #salesForceCrm="matMenu" yPosition="above" class="matmenu-md">
          <button mat-menu-item *ngIf="ticketHistoryData?.createSR" (click)="createSalesForceCrm(1)">
            <span>SR</span>
          </button>
          <button mat-menu-item *ngIf="ticketHistoryData?.createLead" (click)="createSalesForceCrm(2)">
            <span>Lead</span>
          </button>
        </mat-menu>
      </div>
      <div *ngIf="ticketHistoryData?.salesForceCrm && postObj.ticketInfo.srid !== null && !isCSDUser && !isBrandUser && !hideQuickWindow" [ngClass]="{'colored__yellow--dark': postObj?.ticketInfo?.srid !== null
              }" class="
                post-detail__conversations--head-item
                ml-auto
              " >
        <div class="d-flex-items-center">
          <mat-icon *ngIf="postObj.ticketInfo.srid !== null" class="mr-4">check</mat-icon>
          <span>CRM</span>
        </div>
      </div> -->
      <ng-container *ngIf="hideQuickWindow">
        <!-- <div class="dynamic-crm__look" [matMenuTriggerFor]="lookup">
          <span>Look Up</span>
        </div> -->
        <!-- <mat-menu #lookup="matMenu" class="note-elem__lookup p-6">
          <div class="note-elem">
            <div class="note-elem__input pt-7" (click)="$event.stopPropagation()" style="height: 188px">
              <p class="text__label mb-15">Look Up</p>
              <mat-form-field appearance="outline" class="material__select">
                <mat-label class="text-capitalize">Email</mat-label>
                <input matInput/>
              </mat-form-field>
              <mat-form-field appearance="outline" class="material__select">
                <mat-label class="text-capitalize">Contact Number</mat-label>
                <input matInput />
              </mat-form-field>
              <p>At least one of the above value must be filled in.</p>
            </div>
            <div class="note-elem__actions">
              <button mat-button class="ml-auto colored__blue blank-hoverBtn">Cancel</button>
              <button mat-button class="colored__blue blank-hoverBtn">
                Submit
              </button>
            </div>
          </div>
        </mat-menu> -->
      </ng-container>

      <!-- User Conversations -->

      <mat-menu #menu="matMenu" class="active__user__list padding__15">
        <p class="text__label">{{ 'Invite-Team-lead-or-Super-Agent' | translate }}</p>
        <input matInput class="custom__input" [placeholder]="'Search' | translate" (click)="$event.stopPropagation()" />
        <ul class="active__user__list--team" (click)="$event.stopPropagation()">
          <li class="text__label">{{'Team-Lead' | translate}}</li>
          <li class="text__capitalize">
            <img class="active__user__img" src="assets/images/media/media-1.jpg" alt="" />
            <span class="user__online colored__green"></span>
            <span class="active__user__name">{{ 'Petey-cruiser' | translate }}</span>
            <span class="active__user__invite colored__blue cursor-pointer">{{ 'Invite' | translate }}</span>
          </li>
          <li class="text__capitalize">
            <img class="active__user__img" src="assets/images/media/media-1.jpg" alt="" />
            <span class="user__online colored__green"></span>
            <span class="active__user__name">{{ 'Petey-cruiser' | translate }}</span>
            <span class="active__user__invite colored__blue cursor-pointer">{{ 'Invite' | translate }}</span>
          </li>
        </ul>
        <ul class="active__user__list--agent" (click)="$event.stopPropagation()">
          <li class="text__label text__capitalize">{{ 'super-agent' | translate }}</li>
          <li class="text__capitalize">
            <img class="active__user__img" src="assets/images/media/media-1.jpg" alt="" />
            <span class="user__online colored__green"></span>
            <span class="active__user__name">{{ 'Petey-cruiser' | translate }}</span>
            <span class="active__user__invite colored__blue cursor-pointer">{{ 'Invite' | translate }}</span>
          </li>
        </ul>
      </mat-menu>

      <!-- User Conversations -->
      <div class="post-detail__conversations--head-item history__search" *ngIf="false">
        <input type="text" [placeholder]="'Search-email-phone-or-username' | translate" />
        <mat-icon fontSet="material-icons-outlined">search</mat-icon>
      </div>
      <span *ngIf="sfdcTicketView && sfdcChatModeActive" (click)="toggleView()" [ngClass]="{'element__disable': disableSwitchMode}" class="custom-btn__primary--outline py-4 mr-10 border-radius-25">
          {{ viewModeFlag ? ('Switch-to-Chat-Mode' | translate) : ('Switch-to-Ticket-Details' | translate) }}
      </span>
        <div *ngIf="defaultLayout && (postObj.ticketInfo.status != 3 || (postObj.ticketInfo.status == 3 &&
                                          (postObj.ticketInfo.srid !== null && postObj.ticketInfo.srid !== '') || (postObj.ticketInfo?.leadID !== null && postObj.ticketInfo?.leadID !== ''))) && typeOfCrm==102" [matTooltip]="'Sync-data-from-CRM' | translate" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
          class="post__pill workflow-pill bg__grey--lighter cursor-pointer mr-16" (click)="syncSFDCData()">
          <img src="/assets/social-mention/post/Sync_icon.svg" class="w-20"  [class.rotate]="rotate">
        </div>
      <ng-container *ngIf="sfdcTicketView && viewModeFlag">
        <button mat-stroked-button class="materialbtn__md blank-hoverBtn block-center ml-10 mr-10" (click)="clearnote();"
          [matMenuTriggerFor]="addnote" #menuTrigger="matMenuTrigger" *ngIf="!noteSpinner"
          [ngClass]="{ element__disable: isReadOnly }">
          <span class="d-flex-items-center">
            <mat-icon class="btn__icon mr-3">add</mat-icon> {{ 'Add-Note' | translate }}
          </span>
        </button>

        <div class="post-detail__conversations--head-item mr-0" *ngIf="!isCSDUser && !isBrandUser">
          <button mat-icon-button class="materialbtn__icon btn__hover" [ngClass]="{'btn__deeplink': deepLinkingFlag}"
            [matMenuTriggerFor]="ticketActionmenu">
            <mat-icon [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">more_vert</mat-icon>
          </button>
          <mat-menu #ticketActionmenu="matMenu" xPosition="before">
            <ul class="sort-dropdown" (click)="$event.stopPropagation()">
              <li class="sort-dropdown__item" *ngIf="showLogFilter">
                <mat-radio-group aria-label="Select an option">
                  <div *ngFor="let radiobutton of LogFilter.radioButtonList" class="sort-dropdown__item--input">
                    <mat-radio-button [ngClass]="{'small_font-size' : !defaultLayout}" [value]="radiobutton.value" (change)="logFilterChange($event)"
                      [checked]="radiobutton.checked">{{ radiobutton.name | translate }}</mat-radio-button>
                  </div>
                </mat-radio-group>
              </li>
              <!-- <li class="sort-dropdown__item">
                      <mat-radio-group aria-label="Select an option">
                        <div class="sort-dropdown__item--input">
                          <mat-slide-toggle [checked]="this.hideActionstatus" (change)="onHideActionStatusChange($event)">Hide
                            Actioned Statuses</mat-slide-toggle>
                        </div>
                      </mat-radio-group>
                    </li> -->
              <li class="sort-dropdown__item">
                <span class="text__label" [ngClass]="{'small_font-size' : !defaultLayout}">{{'Conversation-View-Style' | translate}}</span>
                <mat-radio-group [(ngModel)]="postView" aria-label="Select an option">
                  <div class="sort-dropdown__item--input">
                    <mat-radio-button [ngClass]="{'small_font-size' : !defaultLayout}" [value]="postViewEnum.detailView" (change)="changePostView($event)">{{'Detail-View' | translate}}</mat-radio-button>
                  </div>
                  <div class="sort-dropdown__item--input">
                    <mat-radio-button [ngClass]="{'small_font-size' : !defaultLayout}" [value]="postViewEnum.chatView" (change)="changePostView($event)">{{'Simple-View' | translate}}</mat-radio-button>
                  </div>
                </mat-radio-group>
              </li>
            </ul>
          </mat-menu>
        </div>
      </ng-container>
      <mat-menu #addnote="matMenu" class="note-elem__dropdown p-6">
        <div class="note-elem">
          <div class="note-elem__input pt-7" (click)="$event.stopPropagation()" style="height: 18.8rem">
            <mat-form-field appearance="outline" class="material__select">
              <mat-label class="text-capitalize">{{ 'Add-Note' | translate }}</mat-label>
              <textarea matInput  #noteTextArea [(ngModel)]="note" (input)="noteTextChange(noteTextArea, 'note')" class="resize"></textarea>
            </mat-form-field>
          </div>
          <div [ngClass]="{ element__disable: ssreSimulationRight }" *ngIf="mediaSelectedAsync$ | async as MediaSelected"
            class="textarea-featured__foot--item--media pt-10 note-elem__attach">
            <ng-template ngFor let-ugc [ngForOf]="MediaSelected">
              <span *ngIf="ugc.mediaType == 2" matTooltip="{{ugc?.displayFileName}}"
                class="textarea-featured__foot--item--icon">
                <img class="media__img--icon" [src]="ugc.mediaPath" alt="" />
                <span class="item__overlay">
                  <mat-icon class="delete__img--icon"
                    (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                </span>
              </span>
              <span *ngIf="ugc.mediaType == 3" matTooltip="{{ugc?.displayFileName}}"
                class="textarea-featured__foot--item--icon">
                <video class="media__img--icon">
                  <source [src]="ugc.mediaPath" data-autoplay="false" type="video/m4v" />
                  <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mp4" />
                  <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mpeg" />
                  <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-msvideo" />
                  <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-ms-wmv" />
                  <source [src]="ugc.mediaPath" data-autoplay="false" type="video/avi" />
                </video>
                <span class="item__overlay--video">
                  <mat-icon class="delete__img--icon"
                    (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                  <mat-icon class="play__img--icon">play_circle_outline</mat-icon>
                </span>
              </span>
              <span matTooltip="{{ugc?.displayFileName}}"
                *ngIf="ugc.mediaType == mediaTypeEnum.PDF || ugc.mediaType == mediaTypeEnum.DOC || ugc.mediaType == mediaTypeEnum.EXCEL"
                class="textarea-featured__foot--item--icon">
                <img src="assets/images/account/pdf__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.PDF"
                  class="media__img--icon">
                <img src="assets/images/account/doc__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.DOC"
                  class="media__img--icon">
                <img src="assets/images/account/excl__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.EXCEL"
                  class="media__img--icon">
                <span class="item__overlay">
                  <mat-icon class="delete__img--icon"
                    (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                </span>
              </span>
            </ng-template>
            <span class="textarea-featured__foot--item--icon block-center cursor-pointer" *ngIf="selectedNoteMedia.length > 0"
              (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
              <mat-icon fontSet="material-icons-outlined" class="colored__locobuzz">add</mat-icon>
            </span>
          </div>
          <!-- *ngIf="showMediaButton" -->
          <div class="textarea-featured__foot--item mt-10" *ngIf="selectedNoteMedia.length <= 0">
            <!-- <a [ngClass]="{'element__disable' : ssreSimulationRight }" href="javascript:void(0)" (click)="openMediaDialog()">
                                                      <mat-icon fontSet="material-icons-outlined">insert_photo</mat-icon>
                                                  </a> -->
            <a [ngClass]="{ element__disable: ssreSimulationRight }" class="textarea-featured__foot--icon text__regular--sm"
              href="javascript:void(0)" (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
              <mat-icon fontSet="material-icons-outlined custom__icon--md">insert_photo</mat-icon>
              <span>{{'Attach-Media' | translate}}</span>
              <span *ngIf="selectedNoteMedia.length > 0">({{ selectedNoteMedia.length }})</span>
            </a>
            <!-- <a href="javascript:void(0)" class="textarea-featured__foot--icon">
                                                      UGC
                                                  </a> -->
          </div>
          <div class="note-elem__actions" (click)="$event.stopPropagation()">
            <button mat-button class="ml-auto colored__blue blank-hoverBtn mr-7 right-auto"
              (click)="clearInputs(); closeMenu()">{{ 'Cancel' | translate }}</button>
            <button mat-button (click)="addNote(note);$event.stopPropagation();$event.preventDefault()" class="colored__blue blank-hoverBtn">
              {{ 'Save' | translate }}
            </button>
          </div>
        </div>
      </mat-menu>
      <div class="post-detail__conversations--toggle ml-10 dynamic-crm__profileIcon" *ngIf="hideQuickWindow" [ngClass]="{'sfdc-profile__icon' : sfdcTicketView}" (click)="openUserProfile(1)">
        <mat-icon fontSet="material-icons-outlined">account_box</mat-icon>
      </div>
      <div class="post-detail__conversations--head-item" *ngIf="!isCSDUser && !isBrandUser && !sfdcTicketView">
        <button mat-icon-button class="materialbtn__icon btn__hover icon-circle" [ngClass]="{'btn__deeplink': deepLinkingFlag, 'small-icon-font-size' : !defaultLayout}" [matMenuTriggerFor]="ticketActionmenu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #ticketActionmenu="matMenu" xPosition="before">
          <ul class="sort-dropdown" (click)="$event.stopPropagation()">
            <li class="sort-dropdown__item" *ngIf="showLogFilter" [ngClass]="{'px-5' : !defaultLayout}">
              <mat-radio-group aria-label="Select an option">
                <div *ngFor="let radiobutton of LogFilter.radioButtonList" class="sort-dropdown__item--input" [ngClass]="{'py-5' : !defaultLayout}">
                  <mat-radio-button [value]="radiobutton.value" [ngClass]="{'small_font-size' : !defaultLayout}" (change)="logFilterChange($event)"
                    [checked]="radiobutton.checked">{{ radiobutton.name | translate }}</mat-radio-button>
                </div>
              </mat-radio-group>
            </li>
            <!-- <li class="sort-dropdown__item">
              <mat-radio-group aria-label="Select an option">
                <div class="sort-dropdown__item--input">
                  <mat-slide-toggle [checked]="this.hideActionstatus" (change)="onHideActionStatusChange($event)">Hide
                    Actioned Statuses</mat-slide-toggle>
                </div>
              </mat-radio-group>
            </li> -->
            <li class="sort-dropdown__item" [ngClass]="{'px-5' : !defaultLayout}">
              <span class="text__label" [ngClass]="{'small_font-size' : !defaultLayout}">{{'Conversation-View-Style' | translate}}</span>
              <mat-radio-group [(ngModel)]="postView" aria-label="Select an option">
                <div class="sort-dropdown__item--input" [ngClass]="{'py-5' : !defaultLayout}">
                  <mat-radio-button [ngClass]="{'small_font-size' : !defaultLayout}" [value]="postViewEnum.detailView" (change)="changePostView($event)">{{ 'Detail-View' | translate }}</mat-radio-button>
                </div>
                <div class="sort-dropdown__item--input">
                  <mat-radio-button [ngClass]="{'small_font-size' : !defaultLayout}" [value]="postViewEnum.chatView" (change)="changePostView($event)">{{ 'Simple-View' | translate }}</mat-radio-button>
                </div>
              </mat-radio-group>
            </li>
          </ul>
        </mat-menu>
      </div>

      <div class="post-detail__conversations--toggle icon-circle" [ngClass]="{'ml-auto right-auto': isCSDUser || isBrandUser}" *ngIf="!hideQuickWindow && defaultLayout" (click)="postUserInfoToggle();isSideBarAttachmentOpen=false" [ngStyle]="{'transform' : userInfoToggle ? 'rotate(0deg)' : 'rotate(180deg)'}">
        <mat-icon [matTooltip]="userInfoToggle ? ('Maximize' | translate) : ('Minimize' | translate)" matTooltipClass="custom-tooltip">keyboard_double_arrow_right</mat-icon>
      </div>
      <div class="post__status post__status--show bg__locobuzz" *ngIf="!sfdcTicketView && lockUnlockNote && !showLockStrip && !defaultLayout">
        <img matTooltipPosition="above" matTooltipClass="custom-tooltip" class="post__foot--actionicon"
        matTooltip={{lockUnlockNote}} src="assets/images/icons8-edit.gif" />
      </div>
      </div>
    </div>
    <!-- new ui theme 2026 -->
      <!-- <div *ngIf="!defaultLayout" class="post-detail__conversations--head"> -->
      <div [ngClass]="{none: showLockStrip}" class="post-detail__conversations--head-item new-ui-theme__conversation--head-strip">
        <span class="d-flex-items-center g-6">
            <img class="channel__head--img" [src]="ChannelImage"  onError="assets/social-mention/post/default_brand.svg"/>
              <span class="channel__head--text">{{ChannelName}}</span>
        </span>
        <span class="d-flex-items-center g-6">
          <ng-container *ngIf="userProfileImg == 'initials'; else showImage">
            <span class="initials" [ngClass]="{'mr-0': !defaultLayout }">{{ initials }}</span>
          </ng-container>
          <ng-template #showImage>
            <img class="channel__head--img" onError="this.src='assets/images/agentimages/sample-image.svg'"
              [src]="userProfileImg" />
          </ng-template>
            <span class="channel__head--text"><span [matTooltip]="userProfileName?.length > 20 ? userProfileName : '' "
              matTooltipClass="custom__tooltip-normal">{{userProfileName?.substring(0, 20)}}</span> <span *ngIf="postObj?.author?.screenname?.length > 20">...</span> <span *ngIf ="postObj?.author?.screenname"> (&#64;<span [matTooltip]="userProfileName?.length > 20 ? userProfileName : '' "
              matTooltipClass="custom__tooltip-normal">{{postObj?.author?.screenname?.substring(0, 20)}}</span> <span
              *ngIf="postObj?.author?.screenname.length > 20">...</span>)</span></span>
        </span>
        <span class="d-flex-items-center g-6">
            <img class="channel__head--img w-18" src="assets/social-mention/post/followers.svg" />
              <span class="channel__head--text">{{postObj?.author?.followersCount}}</span>
        </span>
        <span class="d-flex-items-center g-6 ml-auto right-auto">
          <span class="d-flex-items-center g-6">
              <img class="channel__head--img" [src]="brandImage"
                onError="this.src='assets/social-mention/post/default_brand.svg'" />
                <span class="channel__head--text">{{postObj?.brandInfo?.brandFriendlyName}}</span>
          </span>
        </span>
      </div>
    <!-- </div> -->
    <!-- new ui theme 2026 -->
    <!-- don't show lockstrip we are inside salesforce view -->
    <ng-container *ngIf="!sfdcTicketView"> 
    <div *ngIf="showLockStrip" [ngClass]="{ openTabFixed: showLockStrip }"
      class="post-detail__conversations--head block-center">
      <div class="post-detail__conversations--head-item">
        <p class="top-strip mt-9" [ngClass]="{'mb-0': lockUnlockNote && lockUnlockNote != '', 'medium-font-size' : !defaultLayout}">
          <span class="font-weight-600 text-underline">{{ ticketLockUserName }}
          </span>
            {{ 'Working-on-case-since' | translate:{time: ticketLockTime} }}
          <mat-slide-toggle (change)="callLockUnlock($event)" [(ngModel)]="showBlurLockStrip" class="ml-2 text-italic">
            <span>{{ lockUnlockLabel }}</span>
          </mat-slide-toggle>
        </p>
        <p *ngIf="lockUnlockNote && lockUnlockNote != ''">{{'note' | translate}}: {{ lockUnlockNote }}</p>
      </div>
    </div>
    </ng-container>
    <div *ngIf="!sfdcTicketView && lockUnlockNote && !showLockStrip && defaultLayout"
      class="post-detail__conversations--head block-center">
      <div class="post-detail__conversations--head-item">
        <p *ngIf="lockUnlockNote && lockUnlockNote != ''"><b>{{'note' | translate}}</b>: {{ lockUnlockNote }}</p>
      </div>
    </div>

    <!-- Bulk action strip -->
    <div *ngIf="bulkinprogress" [ngClass]="{ openTabFixed: false }"
      class="post-detail__conversations--head block-center">
      <div class="top-strip">
        <mat-icon class="colored__yellow--dark custom__icon--lg mr-10" fontSet="material-icons-outlined">circle
        </mat-icon>
        <span>{{ bulkinprogresstitle }}</span>
        <a (click)="refreshTicketHistory()" class="colored__locobuzz btn__hover ml-6">
          <mat-icon class="custom__icon--lg">replay</mat-icon>
        </a>
      </div>
    </div>
    <div *ngIf="bulkreplysuccess" [ngClass]="{ openTabFixed: false }"
      class="post-detail__conversations--head block-center">
      <div class="top-strip">
        <mat-icon class="colored__yellow--dark custom__icon--lg mr-10" fontSet="material-icons-outlined">circle
        </mat-icon>
        <span>{{ bulkinprogresstitle }}</span>
        <button (click)="refreshTicketHistory()" class="btn__hover ml-10">
          <mat-icon class="custom__icon--lg">replay</mat-icon>
        </button>
      </div>
    </div>

    <!-- SSRE action strip -->
    <div *ngIf="ssreinprogress" [ngClass]="{ openTabFixed: false }"
      class="post-detail__conversations--head block-center">
      <div class="top-strip">
        <mat-icon class="colored__yellow--dark custom__icon--lg" fontSet="material-icons-outlined">circle</mat-icon>
        <span class="colored__yellow--dark"> {{ ssreinprogresstitle }} </span>
      </div>
    </div>

    <div *ngIf="ssresuccess" [ngClass]="{ openTabFixed: false }" class="post-detail__conversations--head block-center">
      <div class="top-strip">
        <mat-icon class="colored__yellow--dark custom__icon--lg mr-10" fontSet="material-icons-outlined">circle
        </mat-icon>
        <span>{{ ssreinprogresstitle }}</span>
        <button mat-icon-button class="btn__hover ml-10" (click)="refreshTicketHistory()">
          <mat-icon class="custom__icon--lg">replay</mat-icon>
        </button>
      </div>
    </div>
    <div class="post-detail__conversations--head block-center replydays" [ngClass]="{'height-unset small_font-size' : !defaultLayout}" *ngIf="isreplyVisible && replyDays && !isAPIFailed">
      <div class="top-strip">
        <app-replytimer [mentionTime]="replyMentionTime" [channelGroup]="this.postObj.channelGroup"
          [channelType]="this.postObj.channelType" [postType]="currentPostType" (TimerExpired)="TimerExpired()">
        </app-replytimer>
      </div>
    </div>
    <ng-container *ngIf="isTicketSummarizationEnable && defaultLayout" >
      <div *ngIf="viewModeFlag" class="post-detail__conversations--item ticket__summary" [ngClass]="{'py-5 pl-5 pr-15' : !defaultLayout, 'py-10 pl-10 pr-15' : defaultLayout}" [ngStyle]="{'max-height' : isCreditExpire ? '25rem' : ''}">
        <div class="ticket__summary--head cursor-pointer" (click)="expandTicketSummary()" [ngClass]="{ element__disable: isSummaryAPICalling }">
          <div class="ticket__summary--head-title">
            <span class="d-flex-items-center g-8">
              <ng-container *ngIf="isCreditExpire else noExpireIcon">
                <img src="assets/images/AI_Ticket_Summary.svg" alt=""
                  matTooltip="AI Ticket Summary feature credit has expired and is no longer available for use."
                  matTooltipClass="custom-tooltip">
              </ng-container>
              <ng-template #noExpireIcon>
                <img class="img" src="assets/ticket-summary/AI_Icon.svg" [ngClass]="{'small-image-width' : !defaultLayout}" alt="">
              </ng-template>
              <p *ngIf="!sfdcTicketView" [ngClass]="{'text__label' : defaultLayout, 'small_font-size' : !defaultLayout}">{{ 'Ticket-Summary' | translate }} :
                <span [ngClass]="{'text__label' : defaultLayout, 'medium-font-size font-weight-bold' : !defaultLayout}">
                  {{postObj.ticketID}}
                </span>
              </p>
              <p *ngIf="sfdcTicketView" class="text__label ml-8">{{ 'Case-Summary' | translate }}</p>
            </span>
          </div>
          <ng-container *ngIf="isSummaryAPICalling else expandButton">
            <div class="ticket__summary--head-collapse">
              <mat-spinner [diameter]="25" class="mat-spinner-dark"></mat-spinner>
            </div>
          </ng-container>
          <ng-template #expandButton>
            <div class="ticket__summary--head-collapse">
              <mat-icon class="cursor-pointer" [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}"> {{ticketSummary ? 'expand_less' : 'expand_more'}}</mat-icon>
            </div>
          </ng-template>
        </div>
        <div class="ticket__summary--body height-unset" *ngIf="ticketSummary && !isSummaryAPICalling">
          <div class="ticket__summary--conversations">
            <div class="summary__conversations">
              <span class="summary__conversations--label" [ngClass]="{'small_font-size' : !defaultLayout}">
                {{ 'Total-Conversation' | translate }}: <span class="text-semibold" [ngClass]="{'font-weight-bold' : !defaultLayout}"> {{TicketSummaryDetails?.totalMention}} </span>
              </span>
            </div>
            <div class="summary__conversations">
              <span class="summary__conversations--label" [matTooltip]="'User-Mentions' | translate" matTooltipPosition="above"
                matTooltipClass="custom-tooltip">
                <img src="assets/ticket-summary/User_Mentions.svg" [ngClass]="{'small-image-width' : !defaultLayout}" alt="">
                <span class="text__label colored__purple--dark" [ngClass]="{'small_font-size font-weight-bold' : !defaultLayout}">
                  {{TicketSummaryDetails?.userMention}}
                </span>
              </span>
            </div>
            <div class="summary__conversations">
              <span class="summary__conversations--label" [matTooltip]="'Brand-Mentions' | translate" matTooltipPosition="above" matTooltipClass="custom-tooltip">
                <img class="img" [ngClass]="{'small-image-width' : !defaultLayout}"
                  [src]="TicketSummaryDetails?.brandMention ? TicketSummaryDetails?.brandImage : 'assets/social-mention/post/default_brand.svg'"
                  alt="">
                <span class="text__label colored__locobuzz" [ngClass]="{'small_font-size font-weight-bold' : !defaultLayout}">
                  {{TicketSummaryDetails?.brandMention}}
                </span>
              </span>
            </div>
            <div class="summary__conversations" *ngIf="TicketSummaryDetails?.reopenedCount">
              <span class="summary__conversations--label" [ngClass]="{'small_font-size' : !defaultLayout}">
                {{ 'Reopened' | translate }}: <span class="text__label colored__red" [ngClass]="{'font-weight-bold' : !defaultLayout}"> {{TicketSummaryDetails?.reopenedCount}} </span>
              </span>
            </div>
            <div class="summary__conversations ml-auto right-auto border-none pr-10">
              <span class="summary__conversations--label" [ngClass]="{'small_font-size' : !defaultLayout}">
                {{ 'Total-Duration' | translate }}: <span class="text__label colored__locobuzz" [ngClass]="{'font-weight-bold' : !defaultLayout}"> {{TicketSummaryDetails?.diffHours}}
                </span>
              </span>
            </div>
          </div>
          <ng-container *ngIf="isCreditExpire else noExpireView">
            <div class="no-data mt-35">
              <div class="no-data__img">
                <img src="assets/images/AI_Ticket_Summary.svg" [ngClass]="{'small-image-width' : !defaultLayout}" alt="" class="w-40">
              </div>
              <span [ngClass]="{'small_font-size' : !defaultLayout}">{{ 'Credit-limit-exceeded' | translate }}</span>
            </div>
          </ng-container>
          <ng-template #noExpireView>
            <div>
              <p class="text__label" [ngClass]="{'medium-font-size' : !defaultLayout}">{{'Quick-Summary' | translate}}</p>
              <ul class="ticket__summary--tab-ul mb-5">
                <ng-container *ngIf="TicketSummaryDetails?.summaryText else dataLoading">
                  <ng-container *ngFor="let summary of TicketSummaryDetails?.summaryText || []">
                    <li class="ticket__summary--tab-li">
                      <span>
                        <mat-icon
                          [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">circle</mat-icon>
                      </span>
                      <span [ngClass]="{'small_font-size' : !defaultLayout}">
                        {{summary}}
                      </span>
                    </li>
                  </ng-container>
                </ng-container>
                <ng-template #dataLoading>
                  <app-component-loader class="line-content" [postCountTotal]="2" [loaderType]="loaderTypeEnum.content">
                  </app-component-loader>
                </ng-template>
              </ul>
            </div>
            <div class="mt-7" *ngIf ="TicketSummaryDetails?.emotionalJourney">
              <div class="emotion-text" [ngClass]="{'small_font-size' : !defaultLayout}">
                <span class="text__label" [ngClass]="{'medium-font-size' : !defaultLayout}">{{'emotional-journey' | translate}}</span>
                <span class="emotion-text-body" [style.background-color]="TicketSummaryDetails?.startJourneyColor" *ngIf = "TicketSummaryDetails?.startJourney">
                  <img class="small-image-width" *ngIf ="TicketSummaryDetails?.startJourneyIcon" src="{{TicketSummaryDetails?.startJourneyIcon}}" />
                  {{TicketSummaryDetails?.startJourney}}
                </span>
                <span class="arrow" *ngIf = "TicketSummaryDetails?.middleJourney"></span>
                <span class="emotion-text-body" [style.background-color]="TicketSummaryDetails?.middleJourneyColor" *ngIf = "TicketSummaryDetails?.middleJourney">
                  <img class="small-image-width" *ngIf="TicketSummaryDetails?.middleJourneyIcon"
                    src="{{TicketSummaryDetails?.middleJourneyIcon}}" />

                  {{TicketSummaryDetails?.middleJourney}}</span>
                <span class="arrow" *ngIf="TicketSummaryDetails?.endJourney"></span>
                <span class="emotion-text-body" [style.background-color]="TicketSummaryDetails?.endJourneyColor" *ngIf="TicketSummaryDetails?.endJourney">
                  <img class="small-image-width" *ngIf="TicketSummaryDetails?.endJourneyIcon"
                    src="{{TicketSummaryDetails?.endJourneyIcon}}" /> {{TicketSummaryDetails?.endJourney}}</span>
              </div>
            </div>
            <!-- <div class="ticket__summary--text" [ngClass]="{'small_font-size mb-5' : !defaultLayout}">
              <p>
                <span class="text__label">{{ 'Issue-Type-or-Intent' | translate }}:</span> {{TicketSummaryDetails?.intent || ('NA' | translate)}}
              </p>
            </div>
            <div class="ticket__summary--text mb-0" [ngClass]="{'small_font-size' : !defaultLayout}">
              <p>
                <span class="text__label mr-8">{{ 'Customer-Sentiment' | translate }}:</span>
                <span [ngClass]="{
                  'colored__green--dark' : TicketSummaryDetails?.sentimentType == '1', 
                  'colored__red--dark': TicketSummaryDetails?.sentimentType == '2',
                  'colored__yellow--dark': TicketSummaryDetails?.sentimentType == '0'
                  }">
                  {{(sentiment_type_dict[TicketSummaryDetails?.sentimentType]) | titlecase }}</span>
                /
                <span class="colored__maroon">{{((emotion_dict[TicketSummaryDetails?.emotion]) | titlecase) || ('NA' | translate)}}
                </span>
              </p>
            </div> -->
            <mat-tab-group class="ticket__summary--tab-group" [(selectedIndex)]="selectedSummaryTab" (selectedTabChange)="changeTicketSummaryType($event)">

              <mat-tab [label]="TicketSummaryType?.quick_summary">
                <ng-template mat-tab-label>
                  <img src="assets/ticket-summary/Quick_Summary.svg" [ngClass]="{'small-image-width' : !defaultLayout}" alt="">
                  <span class="ml-5" [ngClass]="{'medium-font-size' : !defaultLayout}">{{'detailed-summary' | translate}}</span>
                </ng-template>
                <div class="ticket__summary--tab">
                  <!-- <p class="text__label" [ngClass]="{'medium-font-size' : !defaultLayout}">{{'Quick-Summary' | translate}}</p> -->
                  <ul class="ticket__summary--tab-ul mb-5">
                    <ng-container *ngIf="TicketSummaryDetails?.detailedSummary else dataLoading">
                      <ng-container *ngFor="let summary of TicketSummaryDetails?.detailedSummary || []">
                        <li class="ticket__summary--tab-li">
                          <span>
                            <mat-icon [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">circle</mat-icon>
                          </span>
                          <span [ngClass]="{'small_font-size' : !defaultLayout}">
                            {{summary}}
                          </span>
                        </li>
                      </ng-container>
                    </ng-container>
                    <ng-template #dataLoading>
                      <app-component-loader class="line-content" [postCountTotal]="2" [loaderType]="loaderTypeEnum.content">
                      </app-component-loader>
                    </ng-template>
                  </ul>
                  <!-- <span class="d-flex-items-center">
                    <span class="ticket__summary--more" [ngClass]="{'small_font-size' : !defaultLayout}"
                      (click)="changeTicketSummaryType({tab:{textLabel:isSummaryReadMore ? TicketSummaryType?.detailed_summary : TicketSummaryType?.quick_summary}})">
                      {{isSummaryReadMore ? ('More-Details' | translate) : ('Less-Details' | translate)}}</span>
                    <span *ngIf="sfdcTicketView"  (cdkCopyToClipboardCopied)="copied('Mention id')" [ngClass]="{'small_font-size' : !defaultLayout}"
                      [cdkCopyToClipboard]="TicketSummaryDetails?.detailedSummary" class="custom-btn__purple--outline width-fit ml-auto mr-10 px-7">
                      <mat-icon class="mr-3 s-16" [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">content_copy</mat-icon>
                      {{ 'Copy' | translate }}
                    </span>
                  </span> -->
                </div>
              </mat-tab>
            
              <mat-tab [label]="TicketSummaryType.timeline_summary">
                <ng-template mat-tab-label>
                  <img src="assets/ticket-summary/Timeline_Summary.svg" [ngClass]="{'small-image-width' : !defaultLayout}" />
                  <span class="ml-5" [ngClass]="{'medium-font-size' : !defaultLayout}"> {{ 'Timeline-Summary' | translate }}</span>
                </ng-template>
                <div class="ticket__summary--tab">
                  <!-- <p class="text__label" [ngClass]="{'medium-font-size' : !defaultLayout}">Timeline Summary</p> -->
                  <ng-container *ngIf="TicketSummaryDetails?.timelineSummary else dataLoading">
                    <ul class="ticket__summary--tab-ul">
                      <ng-container *ngFor="let summary of TicketSummaryDetails?.timelineSummary">
                        <li class="ticket__summary--tab-li">
                          <span>
                            <mat-icon [class]="summary.className" [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">circle</mat-icon>
                          </span>
                          <span [ngClass]="{'small_font-size' : !defaultLayout}">
                            <span class="text__label" [ngClass]="{'small_font-size' : !defaultLayout}"> {{summary.key}}</span> : {{summary.value}}
                          </span>
                        </li>
                      </ng-container>
                    </ul>
                  </ng-container>
                  <ng-template #dataLoading>
                    <app-component-loader class="line-content" [postCountTotal]="3" [loaderType]="loaderTypeEnum.content">
                    </app-component-loader>
                  </ng-template>
                </div>
              </mat-tab>
            
              <mat-tab [label]="TicketSummaryType.issue_summary">
                <ng-template mat-tab-label>
                  <img src="assets/ticket-summary/Issue_Summary.svg" [ngClass]="{'small-image-width' : !defaultLayout}" />
                  <span class="ml-5" [ngClass]="{'medium-font-size' : !defaultLayout}">{{ 'Issue-Summary' | translate }}</span>
                </ng-template>
                <div class="ticket__summary--tab">
                  <!-- <p class="text__label" [ngClass]="{'medium-font-size' : !defaultLayout}">Issue Summary</p> -->
                  <ul class="ticket__summary--tab-ul">
                    <ng-container *ngIf="TicketSummaryDetails?.issueSummary else dataLoading">
                      <ng-container *ngIf="TicketSummaryDetails?.issueSummary">
                        <li class="ticket__summary--tab-li">
                          <span>
                            <mat-icon [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">circle</mat-icon>
                          </span>
                          <span [ngClass]="{'small_font-size' : !defaultLayout}">
                            {{TicketSummaryDetails?.issueSummary}}
                          </span>
                        </li>
                      </ng-container>
                    </ng-container>
                    <ng-template #dataLoading>
                      <app-component-loader class="line-content" [postCountTotal]="3" [loaderType]="loaderTypeEnum.content">
                      </app-component-loader>
                    </ng-template>
                  </ul>
                  <span class="d-flex-items-center">
                    <span *ngIf="sfdcTicketView" (cdkCopyToClipboardCopied)="copied('Mention id')"
              [cdkCopyToClipboard]="TicketSummaryDetails?.issueSummary" class="custom-btn__purple--outline width-fit ml-auto mr-10 px-7">
                      <mat-icon class="mr-3 s-16">content_copy</mat-icon>
                      {{ 'Copy' | translate }}
                    </span>
                  </span>
                </div>
              </mat-tab>
            
              <mat-tab [label]="TicketSummaryType.customer_expectation">
                <ng-template mat-tab-label>
                  <img src="assets/ticket-summary/Customer_Expectetions.svg" [ngClass]="{'small-image-width' : !defaultLayout}" />
                  <span class="ml-5" [ngClass]="{'medium-font-size' : !defaultLayout}">{{ 'Customer-Expectation' | translate }}</span>
                </ng-template>
                <div class="ticket__summary--tab">
                  <!-- <p class="text__label" [ngClass]="{'medium-font-size' : !defaultLayout}">Customer Expectation</p> -->
                  <ul class="ticket__summary--tab-ul">
                    <ng-container *ngIf="TicketSummaryDetails?.customerExpectation else dataLoading">
                      <ng-container>
                        <li class="ticket__summary--tab-li">
                          <span>
                            <mat-icon [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">circle</mat-icon>
                          </span>
                          <span [ngClass]="{'small_font-size' : !defaultLayout}">
                            {{TicketSummaryDetails?.customerExpectation}}
                          </span>
                        </li>
                      </ng-container>
                    </ng-container>
                    <ng-template #dataLoading>
                      <app-component-loader class="line-content" [postCountTotal]="3" [loaderType]="loaderTypeEnum.content">
                      </app-component-loader>
                    </ng-template>
                  </ul>
                </div>
              </mat-tab>
            
            </mat-tab-group>
          </ng-template>
        </div>
      </div>
    </ng-container>
    </div>

    <mat-sidenav-container class="sidenav-container">
      <mat-sidenav-content class="overflow-none">
        <div #postDetail class="post-detail__conversations--body" [ngClass]="{'scroll' : !ticketSummary}"
          [ngStyle]="{'overflow-y' : ticketSummary ? '' : 'hidden'}">
          <button *ngIf="this.showNewMentionFound" (click)="newDataFound()" mat-raised-button color="accent"
            class="post__new--btn btn__round btn__shadow">
            <mat-icon> arrow_upward </mat-icon>
            {{ 'new-data-found' | translate }}
          </button>
        
          <div class="post-detail__conversations--item" *ngIf="previousDataLoader && postObj?.channelGroup!=ChannelGroup.Email">
            <app-post-loader></app-post-loader>
          </div>
          <div *ngIf="viewModeFlag" class="conversations" [style.height]="calculateHeight()"
            [ngStyle]="{'overflow-x' : userInfoToggle ? 'hidden' : ''}">
            <!-- <div class="post-detail__conversations--replydays" *ngIf="replyDays">
                            <app-replytimer [mentionTime]="replyMentionTime" [channelGroup]="this.postObj.channelGroup" [channelType]="this.postObj.channelType" [postType]="currentPostType" (TimerExpired)= "TimerExpired()"></app-replytimer>
                        </div> -->
            <div *ngIf="this.showLoadMoreOption && !this.showNewMentionFound && !isAPIFailed"
              class="post-detail__conversations--loadmore">
              <button mat-raised-button (click)="getCommunicationLogHistory(lastmentionDateEpoch, null, null, true, 0)"
                class="btn__round btn__outline" [ngClass]="{'small_font-size h-25 px-5' : !defaultLayout}">
                {{ 'See-Previous-Conversation' | translate }}
              </button>
            </div>
            <ng-container *ngIf="openRephrasePopup && sfdcTicketView">
              <app-rephrase class="rephrase" [rephraseOptions]="rephraseOptions"
                [ngStyle]="{'top': rephrasePosition?.y + 'px', 'left': '12%', 'position': 'absolute' }"></app-rephrase>
            </ng-container>
            <ng-container *ngIf="postObj?.channelGroup!=ChannelGroup.Email">
            <div [ngClass]="{'pointer-none': callRunning || callNote }" *ngFor="let object of baseLogObject;index as i; trackBy: trackByTagId" [@fadeInOut]>
              <ng-template [ngIf]="!object.isBrandPost && !object.isCommunicationLog" [ngIfElse]="BrandCommunicationLog">        
                <div class="post-detail__conversations--item 3" [ngStyle]="{'padding-left' : postView == 1 ? '15px' : '48px'}"
                  [ngClass]="true ? object.tagID + '_mention' : ''" #conversationItem [ngClass]="{'recieve-ticket' : !CommunicationLog}">
                  <!-- <app-post-message [baseMention] = "object"></app-post-message> -->
                  <!-- {{postObj.tagID === object.tagID && isDataReceived}} -->
                  <app-post  [userPostView]="true" [postDetailExpandView]="!userInfoToggle" [postView]="postView"
                    [postData]="object" [openReply]="postObj.tagID === object.tagID" [pageType]="currentPostType"
                    [AllCheckBoxes]="checkAllCheckBox" [postFootDisable]="postFootDisable"
                    [showActionPerform]="postObj.tagID === object.tagID" [autoCloseWindow]="autoCloseWindow"
                    [isPostDetailsLogView]="true" (postSelectEvent)="toggleBulkSelect($event)"
                    (postActionClicked)="postActionClicked($event)" [showLockStrip]="showLockStrip"
                    [logTicketObj]="ticketSummaryUserHistory"
                    [ngClass]="{'d-flex': !defaultLayout && currentPostType === PostsType.TicketHistory,'aspect-foot' : userInfoToggle, 'sfdc__post--foot' : sfdcTicketView}"></app-post>
                </div>
                <div
                  *ngIf="object?.logCount>0 &&((postObj.tagID !== object.tagID && mentionExistsInTicketHistory) || !mentionExistsInTicketHistory) && object?.clickHereFlag"
                  class="post-detail__notes mt-12">
                  <div class="post-detail__notes--side"></div>
                  <div class="post-detail__notes--middle" [ngClass]="{'small_font-size' : !defaultLayout}">
                    {{ 'Mention-Logs' | translate:{value: object?.brandInfo?.brandID + '/' + object?.channelType + '/' + object?.id} }},
                    {{"Please" | translate}} <span (click)="openNotes(object,i)" class="colored__blue click-hover">{{ 'click-here' | translate }}</span> {{'to-see-all-activity-logs' | translate}}
                  </div>
                  <div class="post-detail__notes--side"></div>
                </div>
              </ng-template>
              <ng-template #BrandCommunicationLog>
                <!-- {{postViewEnum.chatView}} -->
                <ng-template [ngIf]="object.isBrandPost" [ngIfElse]="CommunicationLog">
                  <div class="post-reply post-detail__conversations--reply pt-15"
                    [ngClass]="{'w-90-p': !postDetailExpandView,'sfdc__post--foot' : sfdcTicketView }"
                    [ngStyle]="{'padding-right' : postView == 1 ? '15px' : '48px'}">
                    <app-post [ngClass]="{'d-flex flex-end new-ui-theme__post--reply': !defaultLayout && currentPostType === PostsType.TicketHistory}" [postDetailExpandView]="!userInfoToggle" [postView]="postView" [postData]="object"
                      [pageType]="currentPostType" [AllCheckBoxes]="checkAllCheckBox" [logTicketObj]="ticketSummaryUserHistory"
                      (postSelectEvent)="toggleBulkSelect($event)" (postActionClicked)="postActionClicked($event)"
                      [showLockStrip]="showLockStrip">
                    </app-post>
                    <!-- <app-post-message [baseMention] = "object" ></app-post-message> -->
                  </div>
                </ng-template>
                <ng-template #CommunicationLog>
                  <!-- {{object.channelType !== ChannelType.Voice && object.isNoteFromVoice}} -->
                  <!-- {{object.isCommunicationLog && !hideActionstatus}} -->
                  <!-- && postObj.channelGroup !== ChannelGroup.Voice || (postObj.channelGroup == ChannelGroup.Voice && object.status != 45 ) -->
        
                  <!-- for combine log show -->
                  <ng-container *ngIf="object?.iscombine && object?.logs?.length > 0 else singalCommunicationLog">
                    <div class="post-reply post-reply-log log-width ml-auto mt-12"
                      [ngClass]="{'post-log__chatView' : postView == postViewEnum.chatView}">
                      <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                          class="box-shadow-none">
                          <mat-expansion-panel-header [ngClass]="{'h-40' : !defaultLayout}">
                            <p [ngClass]="{'small_font-size font-weight-medium' : !defaultLayout}">{{object?.logs?.length}} {{'logs-are-combined-here' | translate}}, <a href="javascript:void(0);"
                                style="color: rgb(63, 169, 245); text-decoration: underline; font-weight: normal;">{{'click-here' | translate }}</a> {{'to-view-them' | translate}}.</p>
                          </mat-expansion-panel-header>
                          <ng-container *ngFor="let combineObject of object?.logs">
                            <div
                              *ngIf="combineObject.isCommunicationLog && !hideActionstatus && !combineObject.isNoteFromVoice">
                              <app-post-log [showIcon]="postView == postViewEnum.chatView"
                                [logMessage]="combineObject && combineObject.logText?combineObject:''"
                                [logObj]="ticketSummaryUserHistory" [isCombineLog]="object?.iscombine"
                                (editClicked)="openEditMenu($event,combineObject)" (noteDataObj)="recieveData($event)">
                              </app-post-log>
                            </div>
                          </ng-container>
                        </mat-expansion-panel>
                      </mat-accordion>
                    </div>
                  </ng-container>
                  <!-- for combine log show -->
                  <ng-template #singalCommunicationLog>
                    <div *ngIf="object.isCommunicationLog && !hideActionstatus && !object.isNoteFromVoice"
                      [ngClass]="{'post-log__chatView' : postView == postViewEnum.chatView}" class="post-reply post-reply-log">
        
                      <app-post-log [showIcon]="postView == postViewEnum.chatView" [ngClass]="{'ai-layout-log' : !defaultLayout}"
                        [logMessage]="object && object.logText?object:''" [logObj]="ticketSummaryUserHistory"
                        (editClicked)="openEditMenu($event,object)" (noteDataObj)="recieveData($event)">
                      </app-post-log>
                    </div>
                  </ng-template>
        
                  <button mat-icon-button #menuTrigger3="matMenuTrigger" [matMenuTriggerFor]="editnote"
                    style="display: none;"></button>
                  <mat-menu #editnote="matMenu" panelClass="editnote-dropdown"
                    class="note-elem__dropdown editnote-dropdown p-6">
                    <div class="note-elem">
                      <div class="note-elem__input pt-7" (click)="$event.stopPropagation()" style="height: 188px">
                        <mat-form-field appearance="outline" class="material__select">
                          <mat-label class="text-capitalize">{{"Edit note" | translate}}</mat-label>
                          <textarea matInput #noteTextArea1 [(ngModel)]="editednote"
                            (input)="noteTextChange(noteTextArea1, 'editednote')" class="resize"></textarea>
                        </mat-form-field>
                      </div>
                      <div [ngClass]="{ element__disable: ssreSimulationRight }"
                        *ngIf="mediaSelectedAsync$ | async as MediaSelected"
                        class="textarea-featured__foot--item--media pt-10 note-elem__attach">
                        <ng-template ngFor let-ugc [ngForOf]="MediaSelected">
                          <span *ngIf="ugc.mediaType == 2" matTooltip="{{ugc?.displayFileName}}"
                            class="textarea-featured__foot--item--icon">
                            <img class="media__img--icon" [src]="ugc.mediaPath" alt="" />
                            <span class="item__overlay">
                              <mat-icon class="delete__img--icon"
                                (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                            </span>
                          </span>
                          <span *ngIf="ugc.mediaType == 3" matTooltip="{{ugc?.displayFileName}}"
                            class="textarea-featured__foot--item--icon">
                            <video class="media__img--icon">
                              <source [src]="ugc.mediaPath" data-autoplay="false" type="video/m4v" />
                              <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mp4" />
                              <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mpeg" />
                              <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-msvideo" />
                              <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-ms-wmv" />
                              <source [src]="ugc.mediaPath" data-autoplay="false" type="video/avi" />
                            </video>
                            <span class="item__overlay--video">
                              <mat-icon class="delete__img--icon"
                                (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                              <mat-icon class="play__img--icon">play_circle_outline</mat-icon>
                            </span>
                          </span>
                          <span matTooltip="{{ugc?.displayFileName}}"
                            *ngIf="ugc.mediaType == mediaTypeEnum.PDF || ugc.mediaType == mediaTypeEnum.DOC || ugc.mediaType == mediaTypeEnum.EXCEL"
                            class="textarea-featured__foot--item--icon">
                            <img src="assets/images/account/pdf__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.PDF"
                              class="media__img--icon">
                            <img src="assets/images/account/doc__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.DOC"
                              class="media__img--icon">
                            <img src="assets/images/account/excl__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.EXCEL"
                              class="media__img--icon">
                            <span class="item__overlay">
                              <mat-icon class="delete__img--icon"
                                (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                            </span>
                          </span>
                        </ng-template>
                        <span class="textarea-featured__foot--item--icon block-center cursor-pointer"
                          *ngIf="selectedNoteMedia.length > 0"
                          (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
                          <mat-icon fontSet="material-icons-outlined" class="colored__locobuzz">add</mat-icon>
                        </span>
                      </div>
                      <!-- *ngIf="showMediaButton" -->
                      <div class="textarea-featured__foot--item mt-10" *ngIf="selectedNoteMedia.length <= 0">
                        <!-- <a [ngClass]="{'element__disable' : ssreSimulationRight }" href="javascript:void(0)" (click)="openMediaDialog()">
                                                                      <mat-icon fontSet="material-icons-outlined">insert_photo</mat-icon>
                                                                  </a> -->
                        <a [ngClass]="{ element__disable: ssreSimulationRight }"
                          class="textarea-featured__foot--icon text__regular--sm" href="javascript:void(0)"
                          (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
                          <mat-icon fontSet="material-icons-outlined custom__icon--md">insert_photo</mat-icon>
                          <span>{{ 'Attach-Media' | translate }}</span>
                          <span *ngIf="selectedNoteMedia.length > 0">({{ selectedNoteMedia.length }})</span>
                        </a>
                        <!-- <a href="javascript:void(0)" class="textarea-featured__foot--icon">
                                                                      UGC
                                                                  </a> -->
                      </div>
                      <div class="note-elem__actions" (click)="$event.stopPropagation()">
                        <button mat-button class="ml-auto colored__blue blank-hoverBtn mr-7 right-auto"
                          (click)="getNote(editedNoteData); closeEditMenu()">{{ 'Cancel' | translate }}</button>
                        <button mat-button (click)="editNote(editednote);$event.stopPropagation();$event.preventDefault()"
                          class="colored__blue blank-hoverBtn">
                          {{ 'Save' | translate }}
                        </button>
                      </div>
                    </div>
                  </mat-menu>
                  <div *ngIf="object?.loadMore" class="post-detail__notes">
                    <div class="post-detail__notes--side"></div>
                    <div class="post-detail__notes--middle cursor-pointer" [ngClass]="{'small_font-size' : !defaultLayout}" (click)="loadMore(i)">
                      <span class="colored__blue font-weight-500">{{ 'Load-More' | translate }}</span>
                    </div>
                    <div class="post-detail__notes--side"></div>
                  </div>
                </ng-template>
                <!-- form progress -->
                <div class="post-reply post-detail__conversations--reply mb-12" *ngIf="false">
                  <div class="form-progress">
                    <div class="form-progress__head">
                      <p class="text-capitalized text__label">Form Refill Progress</p>
                    </div>
                    <div class="form-progress__body">
                      <div class="form-progress__steps">
                        <ul class="form-progress__steps--list">
                          <li>
                            <span class="check done">
                              <mat-icon>done</mat-icon>
                            </span>
                            <div class="progress-view">
                              <span class="progress-text">Form sent</span>
                              <span class="progress-time">23 Aug 2020 at 2:38 pm</span>
                            </div>
                          </li>
                          <li>
                            <span class="check done">
                              <mat-icon>done</mat-icon>
                            </span>
                            <div class="progress-view">
                              <span class="progress-text">Form sent</span>
                              <span class="progress-time">23 Aug 2020 at 2:38 pm</span>
                            </div>
                          </li>
                          <li>
                            <span class="check"></span>
                            <div class="progress-view">
                              <span class="progress-text">Form sent</span>
                              <span class="progress-time">23 Aug 2020 at 2:38 pm</span>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- form progress ends -->
                <!-- filled form -->
                <div class="post-reply post-reply-log" [ngClass]="{'post-log__chatView' : postView == postViewEnum.chatView}"
                  *ngIf="false">
                  <div class="form-filled">
                    <div class="form-filled__head">
                      <mat-icon fontSet="material-icons-outlined">article</mat-icon>
                      <span>
                        <span class="text-underline">Andreu Mole</span> filled form at <span class="text-underline">15 Jan 2022,
                          6:30pm</span>
                      </span>
                    </div>
                    <div class="form-filled__body">
                      <ul class="form-filled__list">
                        <li>
                          <span class="form-filled__list--title">Name</span> :
                          <span class="form-filled__list--text">Andreu <mat-icon
                              fontSet="material-icons-outlined">content_copy</mat-icon> </span>
                        </li>
                        <li>
                          <span class="form-filled__list--title">Contact Number</span> :
                          <span class="form-filled__list--text">9876543210 <mat-icon
                              fontSet="material-icons-outlined">content_copy</mat-icon> </span>
                        </li>
                        <li>
                          <span class="form-filled__list--title">Pan Card Number</span> :
                          <span class="form-filled__list--text">Andreu <mat-icon
                              fontSet="material-icons-outlined">content_copy</mat-icon> </span>
                        </li>
                        <li>
                          <span class="form-filled__list--title">Name</span> :
                          <span class="form-filled__list--text">Andreu <mat-icon
                              fontSet="material-icons-outlined">content_copy</mat-icon>
                          </span>
                        </li>
                        <li>
                          <span class="form-filled__list--title">Contact Number</span> :
                          <span class="form-filled__list--text">9876543210 <mat-icon
                              fontSet="material-icons-outlined">content_copy</mat-icon>
                          </span>
                        </li>
                        <li>
                          <span class="form-filled__list--title">Pan Card Number</span> :
                          <span class="form-filled__list--text">Andreu <mat-icon
                              fontSet="material-icons-outlined">content_copy</mat-icon>
                          </span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <!-- Ends filled form -->
              </ng-template>
            </div>
            <div class="post-detail__conversations--item"
              *ngIf="comminicationLogLoading && postObj?.channelGroup!=ChannelGroup.Email">
              <app-post-loader></app-post-loader>
              <div class="post-reply">
                <app-post-loader></app-post-loader>
              </div>
              <app-post-loader></app-post-loader>
            </div>
            </ng-container>
            <ng-container *ngIf="postObj?.channelGroup==ChannelGroup.Email">
                    <div class="post-detail__conversations--item" *ngIf="previousDataLoader">
                      <app-post-loader class="email-loader"></app-post-loader>
                    </div>
              <div class="post-detail__conversations--item email-post__detail--wrapper">
                <div class="post__head conversations__post--head py-8 px-18">
                  <div class="post__head--profile">
                    <div class="post__head--channel">
                      <div class="channel g-12">
                        <!-- <span *ngIf="!(postObj.author.picUrl)" class="initials profile__img">{{ initials }}</span> -->
                        <img *ngIf="postObj.author.picUrl" [src]="(postObj.author.picUrl)
                          ? (postObj.author.picUrl)
                          : 'assets/images/agentimages/sample-image.svg'" class="channel__image" [ngClass]="{'medium-image-width' : !defaultLayout}" />
                        <span class="font-weight-600" [ngClass]="{'medium-font-size' : !defaultLayout}">
                          {{(postObj?.title)?postObj?.title:'No Subject'}}
                        </span>
                        <span class="post-email__ticket g-4" [ngClass]="{'small_font-size d-flex-items-center h-20' : !defaultLayout}">
                          <mat-icon class="s-18" fontSet="material-icons-outlined" [ngClass]="{'small-icon-font-size d-flex-items-center justify-content__center' : !defaultLayout}">local_activity</mat-icon>
                          <span>{{postObj?.ticketID}}</span>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngFor="let object of emailBaseMention;index as i; trackBy: trackByTagId" [@fadeInOut] class="email-post__detail--post" [ngStyle]="{'margin-top' : object?.showMore ? '-22px' : ''}">
                  <ng-template [ngIf]="object.showEmail && !object.isCommunicationLog" >
                    <app-post [userPostView]="true" [postDetailExpandView]="!userInfoToggle" [postView]="postView" [postData]="object"
                      [openReply]="i==emailBaseMention?.length-1 && !object.isBrandPost" [pageType]="currentPostType" [AllCheckBoxes]="checkAllCheckBox"
                      [postFootDisable]="postFootDisable" [showActionPerform]="postObj.tagID === object.tagID"
                      [autoCloseWindow]="autoCloseWindow" [isPostDetailsLogView]="true" (postSelectEvent)="toggleBulkSelect($event)"
                      (postActionClicked)="postActionClicked($event)" [showLockStrip]="showLockStrip"
                      [logTicketObj]="ticketSummaryUserHistory" [expandedView]="(emailBaseMention?.length-1 == i && !emailBaseMention[emailBaseMention?.length-1].isCommunicationLog) || (emailBaseMention?.length-2 == i && emailBaseMention[emailBaseMention?.length-1].isCommunicationLog)" [allMentionList]="baseLogObject"
                      [ngClass]="{'d-flex': !defaultLayout && currentPostType === PostsType.TicketHistory,'aspect-foot' : userInfoToggle, 'sfdc__post--foot' : sfdcTicketView}" [subject]="(postObj?.title)?postObj?.title:'No Subject'"></app-post>
                    </ng-template>
                    <div *ngIf="object?.showMore" (click)="expandAllEmails()" class="border-bottom__light-grey mt-4 position-relative email-post__detail--emailcounts mb-10 mt-10">
                      <span class="email__thread--count">{{object?.showMoreCount}}+</span>
                    </div>
                    <div *ngIf="object.showEmail" class="custom-border__email" [ngStyle]="{'display' : emailBaseMention?.length-1 == i ? 'none' : '' }"></div>
                   <ng-container *ngIf="i==emailBaseMention?.length-1" >
                    <ng-container *ngFor="let object of lastLogs">
                        <!-- {{object.channelType !== ChannelType.Voice && object.isNoteFromVoice}} -->
                        <!-- {{object.isCommunicationLog && !hideActionstatus}} -->
                        <!-- && postObj.channelGroup !== ChannelGroup.Voice || (postObj.channelGroup == ChannelGroup.Voice && object.status != 45 ) -->
                      
                        <!-- for combine log show -->
                        <ng-container *ngIf="object?.iscombine && object?.logs?.length > 0 else singalCommunicationLog">
                          <div class="post-reply post-reply-log log-width ml-auto mt-12"
                            [ngClass]="{'post-log__chatView' : postView == postViewEnum.chatView}">
                            <mat-accordion>
                              <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" class="box-shadow-none">
                                <mat-expansion-panel-header>
                                  <p>{{object?.logs?.length}} {{'logs-are-combined-here' | translate}}, <a href="javascript:void(0);"
                                      style="color: rgb(63, 169, 245); text-decoration: underline; font-weight: normal;">{{'Click-here' | translate}}</a> {{'to-view-them' | translate}}.</p>
                                </mat-expansion-panel-header>
                                <ng-container *ngFor="let combineObject of object?.logs">
                                  <div *ngIf="combineObject.isCommunicationLog && !hideActionstatus && !combineObject.isNoteFromVoice">
                                    <app-post-log [showIcon]="postView == postViewEnum.chatView"
                                      [logMessage]="combineObject && combineObject.logText?combineObject:''"
                                      [logObj]="ticketSummaryUserHistory" [isCombineLog]="object?.iscombine"
                                      (editClicked)="openEditMenu($event,combineObject)" (noteDataObj)="recieveData($event)">
                                    </app-post-log>
                                  </div>
                                </ng-container>
                              </mat-expansion-panel>
                            </mat-accordion>
                          </div>
                        </ng-container>
                        <!-- for combine log show -->
                        <ng-template #singalCommunicationLog>
                          <div *ngIf="object.isCommunicationLog && !hideActionstatus && !object.isNoteFromVoice"
                            [ngClass]="{'post-log__chatView' : postView == postViewEnum.chatView}" class="post-reply post-reply-log mt-5">
                      
                            <app-post-log [showIcon]="postView == postViewEnum.chatView" [logMessage]="object && object.logText?object:''"
                              [logObj]="ticketSummaryUserHistory" (editClicked)="openEditMenu($event,object)"
                              (noteDataObj)="recieveData($event)">
                            </app-post-log>
                          </div>
                        </ng-template>
                      
                        <button mat-icon-button #menuTrigger3="matMenuTrigger" class="h-1" [matMenuTriggerFor]="editnote" ></button>
                        <mat-menu #editnote="matMenu" panelClass="editnote-dropdown" class="note-elem__dropdown editnote-dropdown p-6">
                          <div class="note-elem">
                            <div class="note-elem__input pt-7" (click)="$event.stopPropagation()" style="height: 188px">
                              <mat-form-field appearance="outline" class="material__select">
                                <mat-label class="text-capitalize">{{ 'Edit-note' | translate }}</mat-label>
                                <textarea matInput #noteTextArea1 [(ngModel)]="editednote"
                                  (input)="noteTextChange(noteTextArea1, 'editednote')" class="resize"></textarea>
                              </mat-form-field>
                            </div>
                            <div [ngClass]="{ element__disable: ssreSimulationRight }" *ngIf="mediaSelectedAsync$ | async as MediaSelected"
                              class="textarea-featured__foot--item--media pt-10 note-elem__attach">
                              <ng-template ngFor let-ugc [ngForOf]="MediaSelected">
                                <span *ngIf="ugc.mediaType == 2" matTooltip="{{ugc?.displayFileName}}"
                                  class="textarea-featured__foot--item--icon">
                                  <img class="media__img--icon" [src]="ugc.mediaPath" alt="" />
                                  <span class="item__overlay">
                                    <mat-icon class="delete__img--icon"
                                      (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                                  </span>
                                </span>
                                <span *ngIf="ugc.mediaType == 3" matTooltip="{{ugc?.displayFileName}}"
                                  class="textarea-featured__foot--item--icon">
                                  <video class="media__img--icon">
                                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/m4v" />
                                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mp4" />
                                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/mpeg" />
                                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-msvideo" />
                                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/x-ms-wmv" />
                                    <source [src]="ugc.mediaPath" data-autoplay="false" type="video/avi" />
                                  </video>
                                  <span class="item__overlay--video">
                                    <mat-icon class="delete__img--icon"
                                      (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                                    <mat-icon class="play__img--icon">play_circle_outline</mat-icon>
                                  </span>
                                </span>
                                <span matTooltip="{{ugc?.displayFileName}}"
                                  *ngIf="ugc.mediaType == mediaTypeEnum.PDF || ugc.mediaType == mediaTypeEnum.DOC || ugc.mediaType == mediaTypeEnum.EXCEL"
                                  class="textarea-featured__foot--item--icon">
                                  <img src="assets/images/account/pdf__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.PDF"
                                    class="media__img--icon">
                                  <img src="assets/images/account/doc__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.DOC"
                                    class="media__img--icon">
                                  <img src="assets/images/account/excl__icon.svg" *ngIf="ugc.mediaType == mediaTypeEnum.EXCEL"
                                    class="media__img--icon">
                                  <span class="item__overlay">
                                    <mat-icon class="delete__img--icon"
                                      (click)="$event.stopPropagation();$event.preventDefault();removeSelectedNoteMedia(ugc)">delete_outline</mat-icon>
                                  </span>
                                </span>
                              </ng-template>
                              <span class="textarea-featured__foot--item--icon block-center cursor-pointer"
                                *ngIf="selectedNoteMedia.length > 0"
                                (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
                                <mat-icon fontSet="material-icons-outlined" class="colored__locobuzz">add</mat-icon>
                              </span>
                            </div>
                            <!-- *ngIf="showMediaButton" -->
                            <div class="textarea-featured__foot--item mt-10" *ngIf="selectedNoteMedia.length <= 0">
                              <!-- <a [ngClass]="{'element__disable' : ssreSimulationRight }" href="javascript:void(0)" (click)="openMediaDialog()">
                                                                                            <mat-icon fontSet="material-icons-outlined">insert_photo</mat-icon>
                                                                                        </a> -->
                              <a [ngClass]="{ element__disable: ssreSimulationRight }" class="textarea-featured__foot--icon text__regular--sm"
                                href="javascript:void(0)" (click)="$event.stopPropagation();$event.preventDefault();openMediaDialog();">
                                <mat-icon fontSet="material-icons-outlined custom__icon--md">insert_photo</mat-icon>
                                <span>{{ 'Attach-Media' | translate }}</span>
                                <span *ngIf="selectedNoteMedia.length > 0">({{ selectedNoteMedia.length }})</span>
                              </a>
                              <!-- <a href="javascript:void(0)" class="textarea-featured__foot--icon">
                                                                                            UGC
                                                                                        </a> -->
                            </div>
                            <div class="note-elem__actions" (click)="$event.stopPropagation()">
                              <button mat-button class="ml-auto colored__blue blank-hoverBtn mr-7 right-auto"
                                (click)="getNote(editedNoteData); closeEditMenu()">{{ 'Cancel' | translate }}</button>
                              <button mat-button (click)="editNote(editednote);$event.stopPropagation();$event.preventDefault()"
                                class="colored__blue blank-hoverBtn">
                                {{ 'Save' | translate }}
                              </button>
                            </div>
                          </div>
                        </mat-menu>
                        <div *ngIf="object?.loadMore" class="post-detail__notes">
                          <div class="post-detail__notes--side"></div>
                          <div class="post-detail__notes--middle cursor-pointer" [ngClass]="{'small_font-size' : !defaultLayout}" (click)="loadMore(baseLogObject?.length-1)">
                            <span class="colored__blue font-weight-500">{{ 'Load-More' | translate }}</span>
                          </div>
                          <div class="post-detail__notes--side"></div>
                        </div>
                    </ng-container>
                    </ng-container>
                      <div *ngIf="object.isCommunicationLog && !hideActionstatus && !object.showEmail"
                        [ngClass]="{'post-log__chatView' : postView == postViewEnum.chatView}" class="post-reply post-reply-log mt-10">
                      
                        <app-post-log [showIcon]="postView == postViewEnum.chatView" [logMessage]="object && object.logText?object:''"
                          [logObj]="ticketSummaryUserHistory">
                        </app-post-log>
                      </div>
                </div>
                <div class="email-post__detail--post" *ngIf="comminicationLogLoading">
                  <app-post-loader class="email-loader"></app-post-loader>
                  <div>
                    <app-post-loader class="email-loader"></app-post-loader>
                  </div>
                  <app-post-loader class="email-loader"></app-post-loader>
                </div>
              </div>
            </ng-container>
            <!-- to refresh the page -->
            <ng-container *ngIf="showRefreshButton">
              <div class="post-reply post-detail__conversations--reply">
                <app-post-minimal [ticketHistoryView]="true" [postData]="replySentMiniView"></app-post-minimal>
              </div>
              <!-- <app-post-log ></app-post-log> -->
            </ng-container>
            <ng-container *ngIf="showRefreshButton">
              <div class="post-reply post-detail__conversations--reply"><app-post-log></app-post-log></div>
            </ng-container>
          </div>
          <div class="post-detail__nodata"
            *ngIf="baseLogObject?.length==0 && !comminicationLogLoading && !isAPIFailed && postObj.channelGroup == ChannelGroup.Voice">
            <img class="img w-70" src="assets/icons/no-conversations.svg" alt="">
            <p class="title">{{ "Don't-have-previous-Conversation" | translate }}</p>
          </div>
          <!-- <div class="post-detail__conversations--item" *ngIf="comminicationLogLoading && postObj?.channelGroup!=ChannelGroup.Email">
            <app-post-loader></app-post-loader>
            <div class="post-reply">
              <app-post-loader></app-post-loader>
            </div>
            <app-post-loader></app-post-loader>
          </div> -->
          <div *ngIf="baseLogObject?.length==0 && isAPIFailed" class="post-detail__nodata">
            <img class="img" src="assets/images/something_went_wrong.svg" alt="">
            <p class="title">{{ 'Oops-Something-went-wrong' | translate }}</p>
            <p>{{ 'unexpected-error-occurred-apologies' | translate }}</p>
            <span (click)="getCommunicationLogHistory()" class="btn cursor-pointer" [ngStyle]="{opacity: false ? '0.6' : '1'}">
              <mat-icon fontSet="material-icons-outlined" [ngClass]="{'refresh' : false}">refresh</mat-icon>
              <span [ngClass]="{'d-none' : false}">{{ 'Retry' | translate }}</span>
            </span>
          </div>
          <ng-container *ngIf="!sfdcTicketView">
            <div [ngClass]="{ 'bg__blur bg__blur--dynamics': showBlurLockStrip, 'ozontel-ticket-blur' : ozontelFlag }"></div>
          </ng-container>
          <!-- <app-notification-alert></app-notification-alert> -->
          <ng-container *ngIf="!viewModeFlag">
            <app-chatbot class="sf-iframe__chatbox chatbot-position-unset" [status]="chatbotStatus" [brandList]="brandList"
              [filterStartEpoch]='filterStartEpoch' [filterEndEpoch]="filterEndEpoch" [botEnableChatbot]="chatEnableChatbot"
              [botEnableWhatsapp]="chatEnableWhatsapp" [botEnableMessenger]="chatEnableMessenger"
              [botEnableInstagram]="chatEnableInstagram" [botEnableGMB]="chatEnableGMB" [botEnableTelegram]="chatEnableTelegram"
              [crmChatBotView]="sfdcTicketView" (crmCloseEvent)="crmCloseEventRes($event)"></app-chatbot>
          </ng-container>
        </div>
      </mat-sidenav-content>
    
      <!-- Right Sidenav -->
      <mat-sidenav class="w-310" #sidenav position="end" mode="side" [(opened)]="isSideBarAttachmentOpen">
        <div class="flex-direction-column h-100-p justify-content__between">
          <div>
            <div class="d-flex-items-center justify-content__between p-10 border-bottom__light-grey">
              <p class="font-weight-600" [ngClass]="{'small_font-size' : !defaultLayout}">{{ 'Media-and-Docs' | translate }}</p>
              <mat-icon class="cursor-pointer" [ngClass]="{'small-icon-font-size' : !defaultLayout}" (click)="closeMediaPopup()">close</mat-icon>
            </div>
            <mat-tab-group mat-stretch-tabs [(selectedIndex)]="selectedIndex"  class="stretched-tabs">
              <mat-tab label="{{ 'Received' | translate }}" [ngClass]="{'small-image-width' : !defaultLayout}">
                <div class="p-10 flex-direction-column g-20 wrapper">
                  <div *ngFor="let obj of receivedMedia">
                    <p [ngClass]="{'small_font-size' : !defaultLayout}">{{obj.label}}</p>
                    <div *ngFor="let mediaObj of obj.items" class="flex-direction-column g-10 mt-10">
                      <div class="d-flex-items-center pl-2 pr-5 py-4 file-pill justify-content__between">
                        <div class="d-flex-items-center g-3">
                          <img class="w-21" [ngClass]="{'small-image-width' : !defaultLayout}" [src]="mediaObj.iconUrl" />
                          <!-- <mat-icon *ngIf="mediaObj.mediaType==mediaEnum.PDF"
                            class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                          <mat-icon *ngIf="mediaObj.mediaType==mediaEnum.IMAGE"
                            class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                          <img *ngIf="mediaObj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                          <img *ngIf="mediaObj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                          <img *ngIf="mediaObj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                          <p class="cursor-pointer" [ngClass]="{'small_font-size' : !defaultLayout}" [matTooltip]="mediaObj.name.length > 12 ? mediaObj.name :''" matTooltipClass="custom__tooltip-normal">{{
                            mediaObj?.name | slice: 0:16 }}{{ mediaObj?.name?.length
                            > 16 ? '...' : '' }}</p>
                        </div>
                        <div class="file-options g-5">
                          <mat-icon *ngIf="mediaObj.mediaType==mediaEnum.IMAGE || mediaObj.mediaType==mediaEnum.VIDEO" [ngClass]="{'small-icon-font-size' : !defaultLayout}" (click)="previewFile(mediaObj)" [matTooltip]="'Preview'" matTooltipClass="custom__tooltip-normal"
                            class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">preview</mat-icon>
                          <mat-icon  [matTooltip]="'Donwload'" [ngClass]="{'small-icon-font-size' : !defaultLayout}" (click)="downloadFile(mediaObj.mediaUrl,mediaObj.name)" matTooltipClass="custom__tooltip-normal"
                            class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">download</mat-icon>
                        </div>
                        <!-- <p class="file-size">10 MB</p> -->
                      </div>
                    </div>
                  </div>
                    <div class="noData-image block-center" *ngIf="receivedMedia?.length==0">
                      <mat-icon [ngClass]="!defaultLayout ? 's-40' : 's-70'">error_outline</mat-icon>
                      <p class="text" [ngClass]="{'large-font-size' : !defaultLayout}">{{ 'No-Attachment-Found' | translate }}</p>
                    </div>
                  <!-- <div>
                    <p>This Week</p>
                    <div class="flex-direction-column g-10">
                      <div class="d-flex-items-center pl-2 pr-5 py-4 file-pill justify-content__between">
                        <div class="d-flex-items-center g-3">
                          <mat-icon
                            class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                          <p>untitled_file.pdf</p>
                        </div>
                        <div class="file-options g-5">
                          <mat-icon
                            class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">preview</mat-icon>
                          <mat-icon
                            class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">download</mat-icon>
                        </div>
                        <p class="file-size">10 MB</p>
                      </div>
                      <div class="d-flex-items-center pl-2 pr-5 py-5 file-pill justify-content__between">
                        <div class="d-flex-items-center g-3">
                          <img class="w-21" src="assets/icons/excel-icon.svg">
                          <p>untitled_file.excl</p>
                        </div>
                        <div class="file-options g-5">
                          <mat-icon
                            class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">preview</mat-icon>
                          <mat-icon
                            class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">download</mat-icon>
                        </div>
                        <p class="file-size">3.5 MB</p>
                      </div>
                    </div>
                  </div> -->
                </div>
              </mat-tab>
              <mat-tab label="{{ 'Sent' | translate }}" [ngClass]="{'small-image-width' : !defaultLayout}">
                <div class="p-10 flex-direction-column g-20 wrapper">
                    <div *ngFor="let obj of sentMedia">
                      <p [ngClass]="{'small-icon-font-size' : !defaultLayout}">{{obj.label}}</p>
                      <div *ngFor="let mediaObj of obj.items" class="flex-direction-column g-10 mt-10">
                        <div class="d-flex-items-center pl-2 pr-5 py-4 file-pill justify-content__between">
                          <div class="d-flex-items-center g-3">
                            <img class="w-21" [ngClass]="{'small-image-width' : !defaultLayout}" [src]="mediaObj.iconUrl" />
                            <!-- <mat-icon *ngIf="mediaObj.mediaType==mediaEnum.PDF"
                              class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                            <mat-icon *ngIf="mediaObj.mediaType==mediaEnum.IMAGE"
                              class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                            <img *ngIf="mediaObj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                            <img *ngIf="mediaObj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                            <img *ngIf="mediaObj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                            <p class="cursor-pointer" [ngClass]="{'small_font-size' : !defaultLayout}" [matTooltip]="mediaObj.name.length > 12 ? mediaObj.name :''"
                              matTooltipClass="custom__tooltip-normal">{{
                              mediaObj?.name | slice: 0:16 }}{{ mediaObj?.name?.length
                              > 16 ? '...' : '' }}</p>
                          </div>
                          <div class="file-options g-5">
                            <mat-icon *ngIf="mediaObj.mediaType==mediaEnum.IMAGE || mediaObj.mediaType==mediaEnum.VIDEO"
                              (click)="previewFile(mediaObj)" [ngClass]="{'small-icon-font-size' : !defaultLayout}" [matTooltip]="'Preview'" matTooltipClass="custom__tooltip-normal"
                              class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">preview</mat-icon>
                            <mat-icon [matTooltip]="'Donwload'" [ngClass]="{'small-icon-font-size' : !defaultLayout}" (click)="downloadFile(mediaObj.mediaUrl,mediaObj.name)"
                              matTooltipClass="custom__tooltip-normal"
                              class="cursor-pointer bg__blue--lighter border-radius-4 material-icons-outlined font-size-18 d-flex-items-center justify-content__center file-option-icon">download</mat-icon>
                          </div>
                          <!-- <p class="file-size">10 MB</p> -->
                        </div>
                      </div>
                    </div>
                <div class="noData-image block-center" *ngIf="sentMedia?.length==0">
                  <mat-icon [ngClass]="!defaultLayout ? 's-40' : 's-70'">error_outline</mat-icon>
                  <p class="text" [ngClass]="{'small_font-size' : !defaultLayout}">{{ 'No-Attachment-Found' | translate }}</p>
                </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
          <div *ngIf="(receivedMedia?.length>0 && selectedIndex==0) || (sentMedia?.length>0 && selectedIndex==1)" class="p-10 d-flex-items-center justify-content__start border-top__light-grey">
            <button  (click)="downloadAllFiles()" class="p-10 d-flex-items-center bg__locobuzz cursor-pointer border-none border-radius-4">
              <p class="colored__white" [ngClass]="{'small_font-size' : !defaultLayout}">{{ 'Download-All' | translate }}</p>
            </button>
            <button  mat-stroked-button [ngClass]="{'small_font-size' : !defaultLayout}" class="ml-10"  color="accent"
              (click)="previewAllFiles()" >
              {{ 'Preview-All' | translate }}
            </button>
          </div>

        </div>
      </mat-sidenav>
    </mat-sidenav-container>

    
    <div class="calling-note"  *ngIf="callNote">
      <!-- callNote -->
      <app-calling-note (addNoteEvent)="addCallNote($event)" [postData]="object" [enableNote]="enableNote" [ivrData]="ivrData" [noteInput]="noteInput"></app-calling-note>
    </div>
  </div>
  <!-- <div class="bg__blur"></div> -->
  <!-- <div class="post-detail__profileinfo" *ngIf = "authorDetails && communicationLogResponse && upliftAndSentimentScore && ticketInfo ">
        <ng-template [ngIf]="communicationLogResponse.data && authorDetails.channelGroup">
        <app-post-userinfo [profileInfo]="postDetailData['profileInfo']" (someEvent)="CallTicketTimeLine($event)"
         [ticketTimeline]="communicationLogResponse"  [author]="authorDetails" [upliftAndSentimentScore] = "upliftAndSentimentScore" [ticketSumamry]="ticketInfo"></app-post-userinfo>
        </ng-template>
        </div> -->
    <ng-container *ngIf="userInfoToggle">
      <div class="post-detail__profileinfo">
        <app-post-userinfo [crmGetAuthorTicketDetails] ="crmGetAuthorTicketDetails" [TicketData]="TicketData" (CaseLeadFormOpenViewEmit) ="CaseLeadFormOpenView($event)" (CaseLeadFormOpenEmit) ="CaseLeadFormOpen($event)" (getRequestPopupEmit) ="getRequestPopup()" [clickHoverMenuTriggerFlag] ="clickHoverMenuTriggerFlag" [ticketHistoryData] ="ticketHistoryData" [rotate] = "rotate" [typeOfCrm] ="typeOfCrm" (syncSFDCDataEmit)="syncSFDCData()" [selectedNoteMedia] = "selectedNoteMedia" [noteSpinner]="noteSpinner" (openMediaDialogEmit) ="openMediaDialog()" (addNoteEmit) ="addNote($event)" (noteTextChangeEmit) = "noteTextChange($event?.noteTextArea, $event?.note)" (removeSelectedNoteMediaEmit) = "removeSelectedNoteMedia($event)" (clearNoteEmit) ="clearnote()" [TicketSummaryType]="TicketSummaryType" (changeTicketSummaryTypeEmit)="changeTicketSummaryType($event)" [ticketSummary]="ticketSummary" [isSummaryAPICalling] ="isSummaryAPICalling" [TicketSummaryDetails] ="TicketSummaryDetails" [selectedSummaryTab] ="selectedSummaryTab" (expandTicketSummaryEmit)="expandTicketSummary($event)" [isCreditExpire]="isCreditExpire" [profileInfo]="postDetailData['profileInfo']" [activeTab]="activeTab" (userEvent)="getConnectedAuthors($event)" (userPhoneNumber)="getUserPhoneNumber($event)" [ngClass]="{'dynamic-crm__profileInfo': hideQuickWindow}"
          [disableTicketOverview]="disableTicketOverview" class="bg__white dark-theme" (outputIndex)="outputIndexRes($event)"></app-post-userinfo>
        <div [ngClass]="{ bg__blur2: showBlurLockStrip }"></div>
      </div>
    </ng-container>
</div>
<app-post-bulk-actions [ticketList]="TicketData" class="primary shown block-center" [pageType]="currentPostType"
  (bulkActionEvent)="postBulkAction($event)" *ngIf="bulkActionpanelStatus"></app-post-bulk-actions>
  <div class="incomingCall" *ngIf="showCallPopup" [ngClass]="{'level-1': false}">
    <app-incoming-call [inbound]="inbound" [outboundCall]="outboundCall" [detailedView]="true" [singleRData]="callingData" (acceptCallEvent)="acceptCallEventRes($event)"></app-incoming-call>
  </div>
  <ng-container *ngIf="emailExpandView">
    <div class="cdk-overlay-container d-block">
      <div *ngIf="minimizeEmailView" class="cdk-overlay-backdrop cdk-overlay-dark-backdrop cdk-overlay-backdrop-showing">
      </div>
      <div class="cdk-global-overlay-wrapper" dir="ltr" style="justify-content: center; align-items: center;">
        <div class="cdk-overlay-pane" style="max-width: 80vw; pointer-events: auto; position: static;">
          <app-post-replybot></app-post-replybot>
        </div>
      </div>
    </div>
  </ng-container>
  <!-- -->
