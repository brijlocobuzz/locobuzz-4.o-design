<div (click)="openTicketDetail()" class="post__body" [ngClass]="{
    'close--postBG': ticketHistoryData?.currentticketstatus == 'Closed' || (clickhouseEnabled &&(ticketHistoryData?.isMarkUnseen || ticketHistoryData?.isMarkUneenBrandPost)),
    'cursor-pointer': openDetailOnClick && ticketHistoryData?.showTicketWindow, 'pt-0': minimalViewBody 
  }" [ngStyle]="{'border-radius' : pageType === PostsType?.TicketHistory ? '5px' : 'none', 'overflow' : postViewEnum.chatView==postView ? 'inherit' : 'hidden'}">
  <div class="post__alert post__alert--warning mt-0 mb-6" *ngIf="ticketHistoryData?.showPendingMessageStatus && postData?.isBrandPost && postData?.channelGroup==channelGroupEnum.AppStoreReviews && postData?.messageStatus == 0">
    <!-- <label class="post__alert--label">
      <mat-icon fontSet="material-icons-outlined" class="colored__yellow--dark mr-3 s-22">timer</mat-icon>
    </label> -->
    <span class="post__alert--info">
      <!-- <span class="text-bold text-underline">Brand Reply</span> -->
      <span>{{ 'brand-response-delay' | translate }}</span>
    </span>
  </div>
  <div class = "horizDiv">
    <div class="post__alert post__alert--warning mt-0 mb-4" *ngIf="
        ticketHistoryData?.promotedPostFlag
      " [ngClass] = "!ticketHistoryData?.isAdPosts && !ticketHistoryData?.isDarkAdPost ? 'colored-bg-gray' : ''">
      <ng-template>
        <label class="post__alert--label">{{ 'note' | translate }}</label>
      </ng-template>
      <span class="
          post__alert--info
          colored__yellow--dark
          |
          linkify:
          'linkifyOptions'
        " [ngClass] = "!ticketHistoryData?.isAdPosts && !ticketHistoryData?.isDarkAdPost ? 'colored-gray' : ''">
        <mat-icon class="colored__yellow--dark dollar_icon" [ngClass] = "!ticketHistoryData?.isAdPosts && !ticketHistoryData?.isDarkAdPost ? 'colored-gray' : ''">monetization_on</mat-icon>{{ticketHistoryData?.promotedPostText | translate}}
      </span>
    </div>
    <span *ngIf="postData?.isPromoted == 5" class="post__stat--icon text__label mt-3" matTooltipPosition="above"
        matTooltipClass="custom-tooltip"
        [matTooltip]="'dark-posts-tooltip' | translate">
        <img src="assets/images/account/info-button-yellow.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
    </span>
  </div>
  <ng-container *ngIf="pageType === PostsType.TicketHistory && postViewEnum.chatView==postView">
    <div class="chatview">
      <div class="chatview__head mr-10">
        <div class="chatview__channel">
          <img class="chatview__channel--image" [src]="post?.channelImage" alt="" />
          <span class="chatview__channel--label">{{ post?.channelName }}</span>
        </div>
      </div>
      <div class="chatview__head">
        <mat-icon class="chatview__head--icon mr-6" fontSet="material-icons-outlined" aria-hidden="false"
          aria-label="local activity">message</mat-icon>
        <div class="chatview__channel--label">
          {{ ticketHistoryData?.mentionid }}
        </div>
        <div class="custom__tooltip--hover custom__tooltip--category">
          <div class="custom__tooltip--item">
            <span class="custom__tooltip--label">
              <mat-icon class="post__foot--icon" fontSet="material-icons-outlined" aria-hidden="false"
                aria-label="local activity">message</mat-icon>{{ 'Mention-Id' | translate }}
            </span>
            <span class="custom__tooltip--value">{{ ticketHistoryData?.mentionid }}
              <mat-icon (cdkCopyToClipboardCopied)="copied('Mention id')"
                [cdkCopyToClipboard]="ticketHistoryData?.mentionid">
                content_copy
              </mat-icon>
            </span>
          </div>
        </div>
      </div>
      <div class="chatview__head" *ngIf="post?.ticketId > 0">
        <mat-icon class="chatview__head--icon mr-6" fontSet="material-icons-outlined" aria-hidden="false"
          aria-label="local activity">local_activity</mat-icon>
        <div class="chatview__channel--label">
          {{ post?.ticketId }}
        </div>
        <div class="custom__tooltip--hover custom__tooltip--category">
          <div class="custom__tooltip--item">
            <span class="custom__tooltip--label">
              <mat-icon class="post__foot--icon" fontSet="material-icons-outlined" aria-hidden="false"
                aria-label="local activity">local_activity</mat-icon>{{ 'Ticket-Id' | translate }}
            </span>
            <span class="custom__tooltip--value">{{ post?.ticketId }}
              <mat-icon (cdkCopyToClipboardCopied)="copied('Ticket id')"
                [cdkCopyToClipboard]="post?.ticketId">
                content_copy
              </mat-icon>
            </span>
          </div>
        </div>
      </div>
      <div class="chatview__head no-wrap ml-auto right-auto">
        <!-- <mat-icon class="chatview__head--icon mr-6" fontSet="material-icons-outlined" aria-hidden="false"
          aria-label="schedule icon">schedule</mat-icon>
        <span class="chatview__channel--label">{{ post?.ticketTime.timetoshow }}</span> -->
        <img
          *ngIf="(selectedSortBy == 'DateCreated' || selectedSortBy == 'MentionDateCreated') && pageType != PostsType.TicketHistory"
          src="assets/ticket-list/Created_Date.svg" />
        <img
          *ngIf="(selectedSortBy == 'LastUpdated' || selectedSortBy == 'MentionLastUpdated') && pageType != PostsType.TicketHistory"
          src="assets/ticket-list/Modification_On.svg" />
        <img
          *ngIf="selectedSortBy == 'Author' || pageType === PostsType.TicketHistory || selectedSortBy == 'Influencer' || selectedSortBy == 'MentionEngagement'"
          src="assets/ticket-list/Mentioned_On.svg" />
        <span class="post__head--label text-nowrap ml-4 mt-2">{{
          post?.ticketTime.timetoshow
          }}</span>
      </div>
    </div>
  </ng-container>
  <div class="post__body--email-options mb-12" [ngClass]="{'medium-font-size': !defaultLayout}" *ngIf="postData?.channelGroup == channelGroupEnum.Email && (selectedTicketView == 3)">

    <div class="bg__grey--light d-flex-items-center width-fit g-5 mb-10 border-radius-4 pl-7 pr-7">
      <p class="font-weight-600">{{ 'to' | translate }}</p>
      <!-- <img src="assets/images/brand-removebg.png" class="w-15">
      <p class="font-weight-600">SBI Support</p> -->
      <p class="colored__grey--dark">{{ticketHistoryData.toMailList[0]}}</p>
      <mat-icon (click)="$event.stopPropagation()" mat-button [matMenuTriggerFor]="emailInfo" class="cursor-pointer">arrow_drop_down</mat-icon>
    </div>
    <mat-menu class="w-450" #emailInfo="matMenu">
      <div  (click)="$event.stopPropagation()" class="p-10 flex-direction-column g-2">
        <div class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">{{ 'from' | translate }}:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>{{postData.fromMail}}</p>
              <!-- <p class="font-weight-600">Rahul Sharma</p>
              <p>&lt;rahulsharma&#64;gmail.com&gt;</p> -->
              
            </div>
          </div>
        </div>
        <div *ngIf="ticketHistoryData.toMailList?.length>0" class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">{{ 'to' | translate }}:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <!-- <p>SBI Support</p>
              <p>&lt;SBISupport&#64;gmail.com&gt;</p> -->
              <div class="d-flex-items-center g-5" *ngFor="let item of ticketHistoryData.toMailList;index as i">
                <!-- <p>SBI Support</p> -->
                <!-- <p>&lt;SBISupport&#64;gmail.com&gt;</p> -->
                <p>{{item}}<span *ngIf="i<ticketHistoryData.toMailList?.length-1">,</span></p>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="ticketHistoryData.ccMailList?.length>0" class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">{{ 'cc' | translate }}:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div>
              <div class="d-flex-items-center g-5">
                <!-- <p>Mohit</p>
                <p>&lt;mohitsharma&#64;gmail.com&gt;</p> -->
                <div *ngFor="let item of ticketHistoryData.ccMailList;index as i" class="d-flex-items-center g-5">
                  <!-- <p>Mohit</p> -->
                  <p>{{item}}<span *ngIf="i<ticketHistoryData.ccMailList?.length-1">,</span></p>
                </div>
              </div>
              <!-- <div class="d-flex-items-center g-5">
                <p>Maya</p>
                <p>&lt;maya12&#64;gmail.com&gt;</p>
              </div> -->
            </div>
          </div>
        </div>
        <div *ngIf="ticketHistoryData.bccMailList?.length>0" class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">{{ 'bcc' | translate }}:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div>
              <div class="d-flex-items-center g-5">
                    <div *ngFor="let item of ticketHistoryData.bccMailList;index as i" class="d-flex-items-center g-5">
                      <!-- <p>Mohit</p> -->
                      <!-- <p>&lt;mohitsharma&#64;gmail.com&gt;</p> -->
                      <p>{{item}}<span *ngIf="i<ticketHistoryData.bccMailList?.length-1">,</span></p>
                    </div>
                <!-- <p>Mohit</p>
                <p>&lt;mohitsharma&#64;gmail.com&gt;</p> -->
              </div>
              <!-- <div class="d-flex-items-center g-5">
                <p>Maya</p>
                <p>&lt;maya12&#64;gmail.com&gt;</p>
              </div> -->
            </div>
          </div>
        </div>
        <div class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">{{ 'date' | translate }}:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>{{mentionTime}}</p>
            </div>
          </div>
        </div>
        <div class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">{{ 'subject' | translate }}:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>{{ ticketHistoryData?.title ? ticketHistoryData?.title:'(No Subject)' }}</p>
            </div>
          </div>
        </div>
        <!-- <div class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">mailed-by:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>locobuzz.com</p>
            </div>
          </div>
        </div> -->
        <!-- <div class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">signed-by:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>locobuzz.com</p>
            </div>
          </div>
        </div>
        <div class="d-flex align-items__start g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <p class="colored__grey--dark">security:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>Standard Encryption (TLS)</p>
              <p><u>Learn More</u></p>
            </div>
          </div>
        </div>
        <div class="d-flex-items-center g-15">
          <div class="d-flex-items-center w-100 justify-content__end">
            <mat-icon class="colored__yellow">label_important</mat-icon>
            <p class="colored__grey--dark">:</p>
          </div>
          <div class="d-flex-items-center justify-content__start">
            <div class="d-flex-items-center g-5">
              <p>Important according to Google magic</p>
            </div>
          </div>
        </div> -->
      </div>
    </mat-menu>

    <!-- <p *ngIf="postData?.channelGroup == channelGroupEnum.Email; else otherChannelsTitle" class="text__label">
      {{ ticketHistoryData?.title ? ticketHistoryData?.title:'(No Subject)' }}
    </p> -->

     <!-- <ng-container *ngIf="pageType === PostsType.TicketHistory">
      <div class="chatview">
        <div class="chatview__head mr-10">
          <div class="chatview__channel">
            <img
              class="chatview__channel--image"
              src="assets/images/phone/call-up.svg"
              alt=""
            />
            <span class="chatview__channel--label">VOIP Call Received</span>
          </div>
        </div>
        <div class="chatview__head mr-10">
          <div class="chatview__channel">
            <img
              class="chatview__channel--image"
              [src]="post?.channelImage"
              alt=""
            />
            <span class="chatview__channel--label">{{ post?.channelName }}</span>
          </div>
        </div>
        <div class="chatview__head">
            <mat-icon class="chatview__head--icon mr-6" fontSet="material-icons-outlined"
            aria-hidden="false" aria-label="local activity">message</mat-icon>
            <div class="chatview__channel--label">
              {{ ticketHistoryData?.mentionid }}
            </div>
        </div>
        <div class="chatview__head">
          <mat-icon class="chatview__head--icon mr-6" fontSet="material-icons-outlined"
              aria-hidden="false" aria-label="local activity">local_activity</mat-icon>
          <div class="chatview__channel--label">
            {{ post?.ticketId }}
          </div>
        </div>
        <div class="chatview__head no-wrap ml-auto">
          <mat-icon
            class="chatview__head--icon mr-6"
            fontSet="material-icons-outlined"
            aria-hidden="false"
            aria-label="schedule icon"
            >schedule</mat-icon
          >
          <span class="chatview__channel--label">{{ post?.ticketTime.timetoshow }}</span>
        </div>
      </div>
    </ng-container>  -->
    <!-- <div class="mt-0 mb-10 border-bottom__light-grey ticket__trigger"> -->
      <!-- <div class="d-flex-items-center mb-10">
              <label class="text__label mb-0">From: </label>
              <div class="ml-5"> {{post?.Userinfo.socialid}}</div>
            </div> -->
  <!-- <div class="d-flex-items-center mb-10">
    <label class="text__label mb-0 to">To/Cc: </label>
    <div class="d-flex-items-center ml-5 mr-5 text__wrap w-100-p ellipsis">
      <span #emailSpanWidth class="ellipsis">{{ ticketHistoryData?.tomaillist }}</span>

      <a href="javascript:void(0)" class="email-arrow ml-auto"
        *ngIf="ticketHistoryData?.toCCBCCArrowFlag?true:emailSpanWidth ? (emailSpanWidth.offsetWidth < emailSpanWidth.scrollWidth) : false"
        (click)="$event.stopPropagation()" [matMenuTriggerFor]="email">
        <mat-icon>keyboard_arrow_down</mat-icon>
      </a>
    </div>
  </div>
      <mat-menu #email="matMenu" yPosition="below" class="email__matmenu">
        <div class="email__matmenu--block" *ngIf="ticketHistoryData?.toMailList.length > 0">
          <span class="to text-capitalize">to</span>
          <div class="email">
            <span *ngFor="let tomail of ticketHistoryData?.toMailList">
              {{ tomail }}
            </span>
          </div>
        </div>
        <div class="email__matmenu--block border-top__light-grey" *ngIf="ticketHistoryData?.ccMailList.length > 0">
          <span class="cc text-capitalize">cc</span>
          <div class="email">
            <span *ngFor="let ccmail of ticketHistoryData?.ccMailList">
              {{ ccmail }}
            </span>
          </div>
        </div>
        <div class="email__matmenu--block border-top__light-grey" *ngIf="ticketHistoryData?.bccMailList.length > 0">
          <span class="cc text-capitalize">bcc</span>
          <div class="email">
            <span *ngFor="let bccmail of ticketHistoryData?.bccMailList">
              {{ bccmail }}
            </span>
          </div>
        </div>
      </mat-menu>
    </div> -->
    <!-- <p *ngIf="
              postData?.channelGroup == channelGroupEnum.Email;
              else otherChannelsTitle
            " class="text__label d-flex-items-center">
      <label class="text__label mb-0 to p-5">Subject: </label>{{ ticketHistoryData?.title ? ticketHistoryData?.title:'(No Subject)' }}
    </p> -->
    <ng-template #otherChannelsTitle>
      <p class="text__label mb-0">{{ ticketHistoryData?.title }}</p>
    </ng-template>
  </div>
  <!-- post old UI before july 2025, post content and post attachments layout -->
  <ng-container *ngIf="false">
  <div class="post__body--data">
    <div class="user-chat-box mb-5"
      *ngIf="postData && postData?.channelGroup == channelGroupEnum.Telegram && postData?.emailContent && (postData?.emailContent?.mediaurl || postData?.emailContent?.replytomessagejson?.text)">
      <div class="bot-prev-msg-box" *ngIf="postData?.emailContent?.replytomessagejson?.text">
        <div class="bot-msg-box-sidebar" [ngClass]="{'isBrandPost_bg': postData?.isBrandPost}"></div>
        <p class="bot-name-tag" [ngClass]="{'isBrandPost_color' : postData?.isBrandPost}"
          *ngIf="postData?.emailContent?.replytomessagejson?.from?.first_name">
          {{postData?.emailContent?.replytomessagejson?.from?.first_name}}
          <span class="text__light ml-5"
            *ngIf="postData?.isBrandPost && postData?.emailContent?.replytomessagejson?.from?.username">(&#64;{{postData?.emailContent?.replytomessagejson?.from?.username}})</span>
        </p>
        <p class="bot-prev-msg-text mt-4"
          [innerHTML]="getTruncatedText(postData?.emailContent?.replytomessagejson?.text,500) | linkify: 'linkifyOptions' | safehtml">
        </p>
      </div>
      <div class="bot-prev-msg-box p-1 d-flex-items-center"
        *ngIf="!postData?.emailContent?.replytomessagejson?.text && postData?.emailContent?.mediaurl">
        <div class="bot-msg-box-sidebar mr-5" [ngClass]="{'isBrandPost_bg': postData?.isBrandPost}"></div>
        <div class="reply-img-preview"
          [ngClass]="{'reply-video-preview ': postData?.emailContent?.mediatype === MediaEnum.VIDEO}">
          <app-quote-media-containt [chat]="postData"></app-quote-media-containt>
          <div>
            <p class="bot-name-tag_img ml-8" [ngClass]="{'isBrandPost_color' : postData?.isBrandPost}">
              {{postData?.emailContent?.replytomessagejson?.from?.first_name}}
              <span class="text__light ml-5"
                *ngIf="postData?.emailContent?.replytomessagejson?.from?.username">(&#64;{{postData?.emailContent?.replytomessagejson?.from?.username}})</span>
            </p>
            <p class="bot-name-tag_img_title ml-8" *ngIf="postData?.emailContent?.mediatype === MediaEnum.IMAGE">{{'Image' | translate}}</p>
            <p class="bot-name-tag_img_title ml-8" *ngIf="postData?.emailContent?.mediatype === MediaEnum.ANIMATEDGIF">{{'GIF' | translate}}
            </p>
            <p class="bot-name-tag_img_title ml-8" *ngIf="postData?.emailContent?.mediatype === MediaEnum.VIDEO">{{'Video' | translate}}</p>
            <p class="bot-name-tag_img_title ml-8"
              *ngIf="(postData?.emailContent?.mediatype === MediaEnum.PDF || postData?.emailContent?.mediatype === MediaEnum.EXCEL || postData?.emailContent?.mediatype === MediaEnum.DOC) && postData?.emailContent?.replytomessagejson?.document?.file_name"
              [matTooltip]="postData?.emailContent?.replytomessagejson?.document?.file_name"
              matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              {{postData?.emailContent?.replytomessagejson?.document?.file_name}}</p>
          </div>
    
        </div>
        <p class="bot-prev-msg-text" *ngIf="postData?.emailContent?.replytomessagejson?.text"
          [innerHTML]="postData?.emailContent?.replytomessagejson?.text | linkify: 'linkifyOptions' | safehtml"></p>
      </div>
    </div>
    <ng-container>
      <div class="post__body--content anywhere">
      <div class="app-store mb-10 border-radius-4" *ngIf="
                  (postData?.channelGroup == channelGroupEnum.Sitejabber && postData?.ratingList && postData?.ratingList.length && !postData?.isBrandPost)">
      <span class="bg__grey--light d-flex-items-center" style="flex: 1;">
        <span class="d-flex-items-center rating_wrap">
            <span [ngClass]="i == 0 ? 'pl-5' : ''" *ngFor="let ratingData of postData?.ratingList; let i = index">
              <span class="d-flex g-5 mr-8" *ngIf="ratingData?.rating || ratingData?.rating == 0">
                <span class="text__label title-case-text">{{ratingData.type == 'overall' ? ('ratings' | translate) : (ratingData.type | translate)}} :</span>
                <app-star-rating *ngIf="ratingData.type == 'overall'" [rating]="ratingData?.rating || 0" [starCount]="5"
                  class="mb-0 pl-5" [editable]="false" [id]="post?.ticketID + i + '_rating'"></app-star-rating>
                <span class="d-flex-items-center">
                  <mat-icon *ngIf="ratingData.type != 'overall'" class="rating__item active">star</mat-icon>
                  <span class="font-weight-600 ml-1 rating__item active" style="font-size: 1.4rem !important;"
                    *ngIf=" ratingData.type != 'overall'">{{ratingData?.rating}}</span>
                </span>
              </span>
            </span>
        </span>
        <span class="bg__grey--light ml-auto mr-8 right-auto" *ngIf = "postData?.objectId">
          <b>{{ 'order-id' | translate }}</b> {{postData?.objectId}}
        </span>
      </span> 
     
      </div>

      <div class="mb-10 border-radius-4"
        *ngIf="postData?.channelGroup == channelGroupEnum.Survey">
          <div class="make-action__action content"
            *ngFor="let attribute of multiLineAttribute; let i = index">
            <div>
              <ng-container *ngIf="attribute?.fieldType == fieldTypeEnum.rating">
                <span class="text__label colored__locobuzz">{{attribute.labelname}} :</span>
                <div class="rating mb-10" [ngClass] = "{'mb-15': attribute?.rating_type == 'averageRating'}">
                  <ng-container [ngSwitch]="attribute?.rating_type">
                   <div class="rating-builder__wrapper" *ngSwitchCase="'averageRating'">
                      <p>
                        <span class="post__body--description font-weight-700">
                          <span class="font-size-22">{{attribute?.value}}</span> / {{attribute?.overallRatingScale}}
                        </span>
                      </p>
                    </div>
                    <div class="rating-builder__wrapper" *ngSwitchCase="'emoji'">
                      <div class="rating-builder__block emoji-builder" *ngFor="let rating of ratings">
                        <ng-container *ngIf="rating.value == 1">
                          <img  src="assets/icons/Tired.png" alt=""
                            [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected || attribute.value == rating.value,'filter-grey w-30':  attribute.value != rating.value}">
                        </ng-container>
                        <ng-container *ngIf="rating.value == 2">
                          <img  src="assets/icons/Frowning-Face.png" alt=""
                            [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected || attribute.value == rating.value,'filter-grey w-30':  attribute.value != rating.value}">
                        </ng-container>
                        <ng-container *ngIf="rating.value == 3">
                          <img  src="assets/icons/Neutral-Face.png" alt=""
                            [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected || attribute.value == rating.value,'filter-grey w-30':  attribute.value != rating.value}">
                        </ng-container>
                        <ng-container *ngIf="rating.value == 4">
                          <img  src="assets/icons/Smiling-Face-With-Smiling-Eyes.png" alt=""
                            [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected || attribute.value == rating.value,'filter-grey w-30':  attribute.value != rating.value}">
                        </ng-container>
                        <ng-container *ngIf="rating.value == 5">
                          <img  src="assets/icons/Smiling-Face-With-Heart-Eyes.png" alt=""
                            [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected || attribute.value == rating.value,'filter-grey w-30':  attribute.value != rating.value}">
                        </ng-container>
                      </div>
                    </div>
                    <div class="rating-builder__wrapper" *ngSwitchCase="'star'">
                      <div class="rating-builder__block emoji-builder g-10 cursor-pointer" *ngFor="let rating of starRatings;let i = index">
                        <img src="assets/icons/Star-unselect.png" class="w-28" *ngIf="!rating.isSelected">
                        <img src="assets/icons/Star.svg" class="w-30" *ngIf="rating.isSelected">
                      </div>
                    </div>
                    <div class="rating-builder__wrapper mt-10" *ngSwitchCase="'nps'">
                      <ul class="rating-builder__nps cursor-pointer">
                        <li class="list" [ngClass]="{
                                                    'bg__red--dark' : 6 > i,
                                                    'bg__yellow--dark' : i == 6 || i == 7,
                                                    'bg__green' : i > 7,
                                                    'w-50': attribute.value == rating.value,
                                                    'select-nps': attribute.value == rating.value, 'unselect-nps': attribute.value != rating.value
                                                }"
                          *ngFor="let rating of npsRating; let i = index">{{rating.value}}
                        </li>
                      </ul>
                    </div>
                  </ng-container>
                </div>
              </ng-container>
              <ng-container *ngIf="attribute?.fieldType != fieldTypeEnum.rating">
                <p>
                  <span class="post__body--description">
                    <span class="font-weight-600">{{attribute.labelname}} :</span> {{attribute.value}}
                  </span>
                </p>
              </ng-container>
            </div>
          </div>
          <ul class="make-action__action mt-8 flex-container__item-wrap" style="display: flex;">
            <li class="list cursor-pointer pr-10"
              *ngFor="let attribute of singleLineAttribute; let i = index">
              <span class="font-weight-600">{{attribute.labelname}}</span> : {{attribute.value}}
            </li>
          </ul>
          <div class="d-flex-items-center mt-12" style="flex-wrap: wrap" *ngIf = "surveyImages && surveyImages.length">
            <div class="post__body--media position-relative" (click)="$event.stopPropagation()">
              <div class="g-10 post__body--image w-100-p"
                (click)="surveyImagePreview(surveyImages); $event.stopPropagation()">
                <ng-container *ngFor="let img of surveyImages">
                  <img class="cursor-pointer br-white-r two__images--preview w-100-p" [src]="img" />
                </ng-container>
              </div>
            </div>
          </div>
      </div>
        <div class="app-store mb-6" *ngIf="
            (postData?.channelGroup == channelGroupEnum.GooglePlayStore && !postData?.isBrandPost) ||
            (postData?.channelGroup == channelGroupEnum.AppStoreReviews && !postData?.isBrandPost) ||
            postData?.channelGroup == channelGroupEnum.ECommerceWebsites ||
             (postData?.channelGroup == channelGroupEnum.GoogleMyReview && postData?.channelType !== channelTypeEnum.GMBChat) ||
              postData?.channelGroup == channelGroupEnum.GlassDoor ||
              postData?.channelGroup == channelGroupEnum.Yotpo ||
              postData?.channelGroup == channelGroupEnum.Zomato || postData?.channelGroup == channelGroupEnum.TripAdvisor || (postData?.channelGroup == channelGroupEnum.Booking && clickhouseEnabled)
           ">
          <span class="text__label colored__locobuzz"*ngIf="(clickhouseEnabled && (!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview)) || (!clickhouseEnabled && ((!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview) ))" >{{'User-Ratings' | translate}} :</span>
          <app-star-rating [rating]="postData?.rating || 0" [starCount]="(postData?.channelGroup == channelGroupEnum.Booking && clickhouseEnabled)?10:5" *ngIf="(clickhouseEnabled && ((!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview))) || (!clickhouseEnabled && ((!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview) ))" class="mb-0 pl-5" [editable]="false"
            [id]="post?.ticketID + '_rating'"></app-star-rating> 
          <span class="verified-buyer" *ngIf="postData?.channelGroup == channelGroupEnum.Yotpo && postData?.authorType == '1'">
            <mat-icon class="s-20">done</mat-icon><span class="text__light">{{'Verified-Buyer' | translate}}</span>
          </span>
            <span class="font-weight-600 mt-3 ml-3" *ngIf ="!clickhouseEnabled && postData?.appVersionName">{{postData?.rating?.toFixed(1)}}</span>
<span class="font-weight-600 mt-3 ml-3"
  *ngIf="clickhouseEnabled && postData?.channelGroup == channelGroupEnum.GooglePlayStore">{{postData?.rating?.toFixed(1)}}</span>       
       <span class="text__label colored__locobuzz ml-15" *ngIf ="postData?.channelGroup == channelGroupEnum.GooglePlayStore">{{ 'app-version' | translate }} : </span> <span class="ml-3 font-weight-600">{{postData?.appVersionName ? postData?.appVersionName : ''}}</span>
       <ng-container *ngIf="!postData?.appVersionName && postData?.channelGroup == channelGroupEnum.GooglePlayStore">
         <span class="font-size-20">-</span>
         <span>
           <mat-icon class="font-size-21 ml-2" matTooltip="{{'Version-Information-Not-Available' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">info</mat-icon>
         </span>
       </ng-container>
          <span class="text__label colored__locobuzz ml-15" *ngIf = "postData?.source">{{ 'device-name' | translate }} : </span> 
          <span class="ml-3 font-weight-600" *ngIf = "postData?.source" matTooltip="{{getToolTipData(postData?.source, 40)}}">{{postData?.source.substring(0, 40)}}<span
            *ngIf="postData?.source.length > 40">...</span>
          </span>
          <span class="text__label colored__locobuzz ml-15" *ngIf = "postData?.osVersion">{{ 'os-version' | translate }} : </span> <span class="ml-3 font-weight-600" *ngIf = "postData?.osVersion">{{postData?.osVersion}}</span>

        </div>
        <div class="post__body--content-text"
          *ngIf="postData?.channelGroup == channelGroupEnum.WhatsApp && ticketHistoryData?.title" [innerHTML]="
            ticketHistoryData?.title | linkify: 'linkifyOptions'
          "></div>
        <div (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.title && (postData?.channelGroup == channelGroupEnum.Reddit || postData?.channelGroup == channelGroupEnum.Blogs || postData?.channelGroup == channelGroupEnum.DiscussionForums || postData?.channelGroup == channelGroupEnum?.Sitejabber ||
            postData?.channelGroup == channelGroupEnum.News || postData?.channelGroup == channelGroupEnum.ComplaintWebsites || postData?.channelGroup == channelGroupEnum.TeamBHP || postData?.channelGroup == channelGroupEnum.GlassDoor || postData?.channelGroup == channelGroupEnum.TripAdvisor || (postData?.channelGroup == channelGroupEnum.Booking && clickhouseEnabled))" class="post__body--description text-bold">
            <span *ngIf = "postData?.channelGroup == channelGroupEnum?.Sitejabber && postData?.title != postData?.description">
              <span *ngIf = "postData?.title.includes('...'); else elseTitle">{{postData?.title.substr(0, postData?.title.indexOf('...'))}}</span>
              <ng-template #elseTitle>{{postData?.title}}</ng-template>
            </span>
            <ng-container *ngIf = "postData?.channelGroup != channelGroupEnum?.Sitejabber">{{postData?.title}}</ng-container>
            
          </div>
              <!-- <div class="post__quora--parent" (click)="quoraParentPost()">
                <img src="assets/images/common/Parent_Post_Icon.svg" alt="" class="mr-7"> <span>Parent Post</span>
              </div> -->
            <!-- quora -->
              <!-- <div class="post__body--description">
                <p>
                  <span class="post__quora--question">Question:</span> <span class="text__label ml-7">Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic, doloribus illo! Necessitatibus omnis velit est odio saepe nisi, alias quaerat voluptas debitis.</span>
                </p>
                <p class="mt-10 mb-7">
                  <span class="post__quora--answer">Answer:</span> <span class="ml-7">Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed incidunt nam quidem. Vel dolores et omnis laboriosam nulla voluptas error, illum quisquam eos libero eius sed dignissimos eligendi delectus possimus.</span>
                </p>
                </div> -->
            <!-- ends quora -->
          <!-- && postData?.channelGroup != channelGroupEnum.Voice -->
        <!-- <ng-container *ngIf="postData?.channelGroup != channelGroupEnum.Voice; else VoipNote"> -->
          <!-- <div (click)="preventDetailedPopupFromOpening($event)"
            *ngIf="ticketHistoryData?.description && !ticketHistoryData?.descriptionWithTitle &&  postData?.channelGroup != channelGroupEnum.Voice"
            class="post__body--description" [innerHTML]="ticketHistoryData?.description | linkify: 'linkifyOptions'">
          </div> -->
          <p *ngIf="postData?.channelGroup == channelGroupEnum.GlassDoor">
            <span class="text__label colored__green--dark" *ngIf="postData?.caption">{{ 'pros' | translate }}: </span>
            <span (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.caption" class="post__body--description"
              [innerHTML]="postData?.caption">
            </span>
            <!-- <span *ngIf="postData?.caption && readMore">
              <span *ngIf="postData?.caption.substr(0,showMoreLessCount)?.length==400"
                (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                Read more</span>
              <span *ngIf="postData?.caption.substr(0,showMoreLessCount)?.length>400"
                (click)="showMoreLessCount=400;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
                less</span>
            </span> -->
          </p>
          <span *ngIf="ticketHistoryData?.bookingGoodBadReviewFlag" class="post__body--description">
            <ul>
              <li *ngIf="ticketHistoryData?.goodReview" class="mb-5 d-flex">
                <mat-icon class="colored__green--dark" fontSet="material-icons-outlined">mood</mat-icon>
                <span class="ml-7">{{ticketHistoryData?.goodReview}}</span>
              </li>
              <li *ngIf="ticketHistoryData?.badReview" class="d-flex">
                <mat-icon class="colored__red--dark" fontSet="material-icons-outlined">sentiment_dissatisfied</mat-icon>
                <span class="ml-7">{{ticketHistoryData?.badReview}}</span>
              </li>
            </ul>
          </span>
          <p *ngIf="postData?.channelGroup == channelGroupEnum.GlassDoor">
            <span class="text__label colored__red--dark" *ngIf="postData?.description">{{ 'cons' | translate }}: </span>
            <span (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.description" class="post__body--description"
              [innerHTML]="(stripHtml(postData?.description)?.length > 700 ? postData?.description?.substr(0, getTruncationIndexForVisibleText(postData?.description, this.showMoreLessCount)) : postData?.description) |safehtml">
            </span>
            <span *ngIf="postData?.description && readMore && stripHtml(postData?.description)?.length > 700">
              <span *ngIf="postData?.description.substr(0,showMoreLessCount)?.length==600"
                (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                {{ 'read-more' | translate }}</span>
              <span *ngIf="postData?.description.substr(0,showMoreLessCount)?.length>600"
                (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> {{'read-less' | translate}}</span>
            </span>
          </p>
          <p *ngIf="postData?.channelGroup == channelGroupEnum.GlassDoor">
            <span class="text__label colored__locobuzz" *ngIf="postData?.annotation">{{ 'advice-to-management' | translate }}: </span>
            <span (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.annotation" class="post__body--description"
              [innerHTML]="postData?.annotation">
            </span>
            <!-- <span *ngIf="postData?.annotation && readMore">
              <span *ngIf="postData?.annotation.substr(0,showMoreLessCount)?.length==400"
                (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                Read more</span>
              <span *ngIf="postData?.annotation.substr(0,showMoreLessCount)?.length>400"
                (click)="showMoreLessCount=400;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
                less</span>
            </span> -->
          </p>
          <p *ngIf = "postData?.channelGroup != channelGroupEnum.Survey && postData?.channelGroup != channelGroupEnum.Pantip" [dir]="getTextDirection()">
            <span (click)="preventDetailedPopupFromOpening($event)"
            *ngIf="ticketHistoryData?.description && !ticketHistoryData?.descriptionWithTitle && postData?.channelGroup != channelGroupEnum.Voice && postData?.channelGroup != channelGroupEnum.GlassDoor"
            class="post__body--description" [innerHTML]="formatTextForDirection(ticketHistoryData?.description, getTextDirection()) | safehtml"
            >
            </span>
            <span *ngIf="ticketHistoryData?.description && !ticketHistoryData?.descriptionWithTitle && postData?.channelGroup != channelGroupEnum.Voice && postData?.channelGroup != channelGroupEnum.GlassDoor && readMore && stripHtml(ticketHistoryData?.description)?.length > 700">
                <span *ngIf="stripHtml(ticketHistoryData?.description)?.substr(0,showMoreLessCount)?.length==600" (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz" [dir]="getTextDirection()">... {{ 'read-more' | translate }}</span>
                <span *ngIf="stripHtml(ticketHistoryData?.description)?.substr(0,showMoreLessCount)?.length>600" (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz" [dir]="getTextDirection()"> {{ 'read-less' | translate }}</span>
            </span>
          </p>

          <div class="post__body--desctwitter bg__grey" *ngIf ="postData && postData?.channelGroup == channelGroupEnum.Twitter && postData?.instagramPostType == 3 && postData?.emailContent">
            <div class="d-flex-items-center">
              <img class="profile-twitter" *ngIf ="postData?.emailContent?.profileimageurl" src="{{postData?.emailContent?.profileimageurl}}"> 
              <span class="ml-5 font-weight-600">{{postData?.emailContent?.username}}</span> 
              <span class="text__light ml-5">(&#64;{{postData?.emailContent?.screenname}})</span>
            </div>
            <span class="post__body--description mt-10" (click)="$event.stopPropagation()" [innerHTML]="postData?.emailContent?.tweettext | linkify: 'linkifyOptions' | safehtml">
            </span>
          </div>


          <ng-container
            *ngIf="postData?.channelGroup == channelGroupEnum.Voice && ticketHistoryData?.showVoipDesc">
            <div (click)="preventDetailedPopupFromOpening($event)"
              *ngIf="ticketHistoryData?.description &&  postData?.channelGroup == channelGroupEnum.Voice && ticketHistoryData?.showVoipDesc"
              class="post__body--description" [ngClass]="{'mb-7' : postData?.channelGroup==channelGroupEnum.Voice}">
              {{ticketHistoryData?.description}}
              <span class="post__body--description text-underline colored__locobuzz">{{voipDate}} </span> {{'at-for-time' | translate}}
              <span class="post__body--description text-underline colored__locobuzz">{{voipTime}} </span>
              <span *ngIf="ivrData"> ({{ivrData}})</span>
            </div>
          </ng-container>
        <!-- </ng-container> -->
        <!-- <ng-template #VoipNote> -->
          <!-- *ngIf="post?.note" -->
          <!-- <div class="post__alert post__alert--warning"> -->
            <!-- <label class="post__alert--label" *ngIf="ticketHistoryData?.isrejectedNote; else LastNote">Rejected Note:
            </label>
            <ng-template #LastNote>
              <label class="post__alert--label">Note: </label>
            </ng-template> -->
            <!-- <span class="post__alert--info | linkify: 'linkifyOptions'">
              {{ ticketHistoryData?.description }}</span>
          </div>
        </ng-template> -->



        <!-- <div (click)="preventDetailedPopupFromOpening($event)" *ngIf="ticketHistoryData?.descriptionWithTitle">
          <p style="font-weight: bold;text-decoration: underline;margin-bottom: 5px;" *ngIf="ticketHistoryData?.title">{{
            ticketHistoryData?.title}}</p>
          <p *ngIf="ticketHistoryData?.description" [innerHTML]="
            ticketHistoryData?.description | linkify: 'linkifyOptions'
          "></p>
        </div> -->
        <div (click)="preventDetailedPopupFromOpening($event)" *ngIf="ticketHistoryData?.descriptionWithTitle">
          <p class="font-weight-700 text-underline mb-5" *ngIf="ticketHistoryData?.title">
            {{ticketHistoryData?.title}}
          </p>
          <span *ngIf="ticketHistoryData?.description"
            [innerHTML]="(stripHtml(ticketHistoryData?.description)?.length > 700 ? ticketHistoryData?.description?.substr(0,
              getTruncationIndexForVisibleText(ticketHistoryData?.description, this.showMoreLessCount)) : ticketHistoryData?.description)">
          </span>
          <span *ngIf="readMore && stripHtml(ticketHistoryData?.description)?.length > 700">
            <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length==600"
              (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
            {{ 'read-more' | translate }}</span>
            <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length>600"
              (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> {{ 'read-less' | translate }}</span>
          </span>
        </div>
        <div *ngIf="ticketHistoryData?.youtubeSanitizeUrlObject">
          <youtube-player [videoId]="ticketHistoryData?.youtubeSanitizeUrlObject" (ready)="savePlayer($event)"
            [playerVars]="playerVars" [height]="160" [width]="300">

          </youtube-player>
          <!-- <iframe [src]="ticketHistoryData?.youtubeSanitizeUrlObject"  frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->
        </div>


          <!-- the same view can be shown in more than one case -->
          <ng-container *ngIf="selectedTicketView==1">
            <div class="post__note post__note--image post__email" *ngIf="ticketHistoryData?.htmlData && ticketHistoryData?.htmlData?.trim()?.length > 0 else textviewEmail">
              <iframe #iframeStyle sandbox="allow-same-origin" (load)="iframeViewLoaded(iframeStyle)" [srcdoc]="ticketHistoryData?.htmlData | safehtml" frameborder="0"
              height="100%"  width="100%">
              </iframe>
            </div>
            <ng-template #textviewEmail>
              <div class="post__note post__note--image post__email" *ngIf="ticketHistoryData?.emailPlainText && ticketHistoryData?.emailPlainText.length > 0">
                {{ticketHistoryData?.emailPlainText.length > 700 ? ticketHistoryData?.emailPlainText?.substr(0, EmailShowMoreLessCount) : ticketHistoryData?.emailPlainText}}                
            
                <ng-container *ngIf="ticketHistoryData?.emailPlainText.length > 700">
                  <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length == 600"
                    (click)="EmailShowMoreLessCount = ticketHistoryData?.emailPlainText?.length;$event.stopPropagation()"
                    class="cursor-pointer colored__locobuzz">...
                    Read more
                  </span>
                  <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length > 600"
                    (click)="EmailShowMoreLessCount = 600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                    Read less
                  </span>
                </ng-container>
              </div>
            </ng-template>
          </ng-container>
          <ng-container *ngIf="selectedTicketView==2">
            <div class="post__note post__note--image emailfriendly" *ngIf="ticketHistoryData?.emailPlainText">
                {{ticketHistoryData?.emailPlainText.length > 700 ? ticketHistoryData?.emailPlainText?.substr(0, EmailShowMoreLessCount) : ticketHistoryData?.emailPlainText}}


              <ng-container *ngIf="ticketHistoryData?.emailPlainText.length > 700">
                <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length == 600"
                  (click)="EmailShowMoreLessCount = ticketHistoryData?.emailPlainText?.length;$event.stopPropagation()"
                  class="cursor-pointer colored__locobuzz">...
                  {{ 'read-more' | translate }}
                </span>
                <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length > 600"
                  (click)="EmailShowMoreLessCount = 600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                  {{ 'read-less' | translate }}
                </span>
              </ng-container>
            </div>
          </ng-container>
          <ng-container *ngIf="selectedTicketView==3">
          <div class="post__note post__note--image emailfriendly bg__white" [ngClass]="{'medium-font-size': !defaultLayout}" *ngIf="ticketHistoryData?.title || ticketHistoryData?.emailPlainText">
            <p><b class="mb-5" *ngIf="ticketHistoryData?.title">{{ticketHistoryData?.title}}</b></p>
            <ng-container *ngIf="ticketHistoryData?.emailPlainText">
              <br>
            
              <span [innerHTML]="(stripHtml(ticketHistoryData?.emailPlainText)?.length > 700 ? ticketHistoryData?.emailPlainText?.substr(0,
                            getTruncationIndexForVisibleText(ticketHistoryData?.emailPlainText, EmailShowMoreLessCount)) : ticketHistoryData?.emailPlainText)">
              </span>

              <ng-container *ngIf="stripHtml(ticketHistoryData?.emailPlainText)?.length > 700">
                <span *ngIf="ticketHistoryData?.emailPlainText.substr(0, EmailShowMoreLessCount)?.length == 600"
                  (click)="EmailShowMoreLessCount = ticketHistoryData?.emailPlainText?.length;$event.stopPropagation()"
                  class="cursor-pointer colored__locobuzz">
                  ...{{'read-more' | translate}}
                </span>
                <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length > 600"
                  (click)="EmailShowMoreLessCount = 600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">
                  ...{{'read-less' | translate}}
                </span>
              </ng-container>
            </ng-container>
            <!-- <span (click)="$event.stopPropagation();attchmentFlag=true" *ngIf="!attchmentFlag && attachmentLength>0" class="
                                  post__alert--attachment
                                  colored__yellow--dark
                                ">
              <mat-icon class="colored__yellow--dark">attach_file</mat-icon>
              {{ attachmentLength }} {{attachmentLength>0?'attachments':'attachment'}}
            </span> -->
          </div>
          </ng-container>

        <ng-container *ngIf="postData?.channelGroup === channelGroupEnum.Pantip">
          <div
            *ngIf="postData?.emailContentHtml && postData?.emailContentHtml?.trim()?.length > 0 else description">
            <iframe #iframeStyle sandbox="allow-same-origin allow-scripts" (load)="iframeViewLoaded(iframeStyle)"
              [srcdoc]="pantipContent | safehtml" frameborder="0" height="100%" width="100%">
            </iframe>
          </div>
          <ng-template #description>
            <div class="post__body--description">
              <span *ngIf="postData?.title && postData.channelType === channelTypeEnum.PantipTopics" class="d-flex mb-20" [innerHTML]="postData?.title | safehtml"></span>
              <span *ngIf="ticketHistoryData?.description"
                [innerHTML]="(stripHtml(ticketHistoryData?.description)?.length > 700 ? ticketHistoryData?.description?.substr(0,
                            getTruncationIndexForVisibleText(ticketHistoryData?.description, this.showMoreLessCount)) : ticketHistoryData?.description) | safehtml">
              </span>
              <span
                *ngIf="ticketHistoryData?.description && readMore && stripHtml(ticketHistoryData?.description)?.length > 700">
                <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length == 600"
                  (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">... Read more</span>
                <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length > 600"
                  (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read less</span>
              </span>
            </div>
          </ng-template>
          <div [ngClass]="{'ml-10': !postData?.isBrandPost, 'mt-10': postData?.isBrandPost}">
            <span>
              <img src="assets/images/common/like.svg" class="mt-2 mr-5" matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.like : 0 }}</span>
              <img src="assets/images/common/laugh.svg" class="mt-3 mr-5" matTooltip="{{'Laugh' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.laugh : 0 }}</span>
              <img src="assets/images/common/Heart.svg" class="mt-3 mr-5" matTooltip="{{'Love' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.love : 0 }}</span>
              <img src="assets/images/common/impress.svg" class="mt-3 mr-5" matTooltip="{{'Impress' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.impress : 0}}</span>
              <img src="assets/images/common/scary.svg" class="mt-3 mr-5" matTooltip="{{'Scary' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.scary : 0}}</span>
              <img src="assets/images/common/wow.svg" class="mt-3 mr-5" matTooltip="{{'Wow' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{(postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.wow : 0}}</span>
              <img src="assets/images/common/pantip_comment.svg" class="mt-3 mr-5" matTooltip="{{'Comment' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span>{{postData?.mentionMetadata?.commentCount != null ? postData?.mentionMetadata?.commentCount : 0}}</span>
            </span>
          </div>
          <div *ngIf="postData?.pantipTopicType == 2" class="mt-5">
            <span class="ml-10 font-weight-500">To view the poll results, please use the Open Link button below.</span>
          </div>
        </ng-container>
        
        <ng-container *ngIf="ticketHistoryData?.carouselMediaObj">
          <span class="messages__attachFile--carousel"
            *ngIf="ticketHistoryData?.carouselMediaObj.mediaContent.length === 1">
            <div class="card">
              <p-carousel [value]="ticketHistoryData?.carouselMediaObj.mediaContent[0].buttons" [numVisible]="1" [numScroll]="1" [circular]="false"
                [responsiveOptions]="responsiveOptions">
                <ng-template let-product pTemplate="item">
                  <div class="carousel__item">
                    <div class="carousel__content">
                      <div class="carousel__content--text ">
                        <p class="text__label text-capitalize pt-5 pb-0 mb-5 font-size-14 font-weight-500"
                          *ngIf="product?.title && !product?.title?.includes('null')">{{product.title}}</p>
                        <p class=" mb-10 line-height-13 font-size-14 font-weight-500" *ngIf="product?.subtitle &&!product?.subtitle?.includes('null')">
                          {{product.subtitle}}</p>
                      </div>
                      <ng-container *ngIf="product?.buttons?.length > 0">
                        <div class="carousel__button mt-25">
                          <button mat-flat-button color="accent" class="text-capitalize border-radius-25 mb-10"
                            *ngFor="let button of product.buttons">{{button.title}}</button>
                        </div>
                      </ng-container>
                    </div>
                    <div class="carousel__image" *ngIf="product?.image_url !== 'null'">
                      <img [src]="product.image_url" (click)="openCaroselMedia(product.image_url)" alt=""
                        onError="this.src='assets/images/chatbot/img-expired.svg';">
                    </div>
                  </div>
                </ng-template>
              </p-carousel>
            </div>
            <!-- <mat-carousel timings="250ms ease-in" [autoplay]="false" interval="5000" color="accent" maxWidth="auto"
              [maintainAspectRatio]="false"
              [slideHeight]="ticketHistoryData?.carouselMediaObj.mediaContent[0].attachmentObj.attachmentHeight"
              [loop]="true" [hideArrows]="false" [hideIndicators]="false" [useKeyboard]="true" [useMouseWheel]="false"
              orientation="ltr">
              <mat-carousel-slide #matCarouselSlide
                *ngFor="let slideItem of ticketHistoryData?.carouselMediaObj.mediaContent[0].buttons; let i = index"
                overlayColor="#00000040" [hideOverlay]="false">
                <div class="carousel__item">
                  <div class="carousel__content">
                    <div class="carousel__content--text">
                      <p class="text__label text-capitalize pt-5 pb-0 mb-5"
                        *ngIf="slideItem?.title && !slideItem?.title?.includes('null')">{{slideItem.title}}</p>
                      <p class=" mb-10 line-height-13"
                        *ngIf="slideItem?.subtitle &&!slideItem?.subtitle?.includes('null')">
                        {{slideItem.subtitle}}</p>
                    </div>
                    <ng-container *ngIf="slideItem?.buttons?.length > 0">
                      <div class="carousel__button">
                        <button mat-flat-button color="accent" class="text-capitalize border-radius-25 mb-10"
                          *ngFor="let button of slideItem.buttons">{{button.title}}</button>
                      </div>
                    </ng-container>
                  </div>
                  <div class="carousel__image" *ngIf="slideItem?.image_url !== 'null'">
                    <img [src]="slideItem.image_url" (click)="openCaroselMedia(slideItem.image_url)" alt=""
                      onError="this.src='assets/images/chatbot/img-expired.svg';">
                  </div>
                </div>
              </mat-carousel-slide>

            </mat-carousel> -->
          </span>
        </ng-container>
        <!-- <div class="post__alert post__alert--warning" *ngIf="post?.note">
          <label class="post__alert--label" *ngIf="ticketHistoryData?.isrejectedNote; else LastNote">Rejected Note:
          </label>
          <ng-template #LastNote>
            <label class="post__alert--label">Note: </label>
          </ng-template>
          <span class="post__alert--info | linkify: 'linkifyOptions'">
            {{ post?.note }}</span>
        </div> -->
        <div class="recording overflow-hidden"  (click)="$event.stopPropagation()" *ngIf="postData?.channelGroup==channelGroupEnum.Voice" >
          <app-audio-slider [postData]="postData" [ticketHistoryData]="ticketHistoryData"  ></app-audio-slider>
          <!-- <div class="recording__audio" *ngIf="postData?.mediaType==MediaEnum.AUDIO; else audioOther">
            <div class="recording__audio--play">
              <mat-icon>{{AudioPlayPause? 'play_circle_outline' : 'pause_circle_outline'}}</mat-icon>

              <span class="recording__audio--icon" #audioPlay [loader]="audioLoading" *ngIf="iconPlayAudio && postData?.contentID==this._postDetailService.audioID; else playOther"
                (click)="state.currentTime && postData?.contentID==this._postDetailService.audioID ? playAudio() : openFile(postData?.contentID,ticketHistoryData?.voipAudioUrls[0])">
                <mat-icon>play_circle_outline</mat-icon>
              </span>
              <ng-template #playOther>
                <span class="recording__audio--icon" *ngIf="iconPlayAudio || state.currentTime == state.duration || postData?.contentID!=this._postDetailService.audioID"
                  (click)="openFile(postData?.contentID,ticketHistoryData?.voipAudioUrls[0])">
                  <mat-icon>play_circle_outline</mat-icon>
                </span>
              </ng-template>
              <span class="recording__audio--icon" *ngIf="iconPauseAudio && state.currentTime!==state.duration && postData?.contentID==this._postDetailService.audioID" (click)=" pauseAudio()">
                <mat-spinner *ngIf="audioLoading" [diameter]="20"></mat-spinner>
                <mat-icon *ngIf="!audioLoading">pause_circle_outline</mat-icon>
              </span>
            </div>
            <div class="recording__audio--slider">
              <span *ngIf="state.currentTime!==state.duration && postData?.contentID==this._postDetailService.audioID; else slideOther">
                <mat-slider class="d-flex" min="0" [max]="state?.duration" [value]="state?.currentTime"
                  (change)="onSliderChangeEnd($event)">
                </mat-slider>
              </span>
              <ng-template #slideOther>
                <span>
                  <mat-slider class="d-flex" aria-label="unit(s)"></mat-slider>
                </span>
              </ng-template>
            </div>
            <div class="recording__audio--time">
              <span style="white-space: nowrap;" *ngIf="state.currentTime!==state.duration && postData?.contentID==this._postDetailService.audioID; else timeOther">
                {{ state?.readableCurrentTime }}
              </span>
              <ng-template #timeOther>
                <span>
                  00:00
                </span>
              </ng-template>
            </div>
          </div> -->

        </div>
      </div>
      <!-- safe content -->
    </ng-container>
    <!-- start tiktok -->
      <div class="post__body--content anywhere" *ngIf="false">
        <div class="d-flex">
          <div class="d-flex-items-center g-10" style="flex-wrap: wrap">
            <div class="post__body--media position-relative w-100 mt-0 mr-10">
              <!-- ----------------{{ticketHistoryData |}} -->
              <img src="https://rb.gy/mihr89" class="cursor-pointer post__body--image tiktok-media one__images--preview" alt="Attachment" />
              <mat-icon class="video__play--icon">
                play_circle_outline
              </mat-icon>
            </div>
          </div>
          <p class="post__body--content-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.
            <span class="colored__locobuzz"> #tiktok #beattikto #dancemove #other </span> amet consectetur adipisicing elit</p>
        </div>
        <div class="d-flex-items-center g-12 mt-10">
          <span class="d-flex-items-center">
            <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">favorite_border</mat-icon> <span>12.5k</span>
          </span>
          <span class="d-flex-items-center">
            <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">textsms</mat-icon> <span>1k</span>
          </span>
          <span class="d-flex-items-center">
            <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">visibility</mat-icon> <span>1k</span>
          </span>
          <span class="d-flex-items-center">
            <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">share</mat-icon> <span>1k</span>
          </span>          
        </div>
      </div>
    <!-- tiktok ends -->
    <ng-template>
      <div class="post__body--content">
        <p class="post__body--label">
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr.
        </p>
        <div class="post__body--more">
          <span>2</span>
        </div>
        <div class="post__body--email">
          <img class="post__body--profile" src="assets/social-mention/post/default_brand.svg" />
          <p>
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
            erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
            et ea rebum.
          </p>
        </div>
        <div class="post__body--email">
          <img class="post__body--profile" src="assets/social-mention/post/default_brand.svg" />
          <p>
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
            erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
            et ea rebum.
          </p>
        </div>
        <div class="post__body--email">
          <img class="post__body--profile" src="assets/social-mention/post/default_brand.svg" />
          <p>
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
            erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
            et ea rebum.
          </p>
        </div>
      </div>
    </ng-template>

    <ng-container *ngFor="let item of postData?.attachmentMetadata?.mediaContents">
      <a href="{{item?.thumbUrl}}" target="_blank" *ngIf="item?.mediaType == MediaEnum.OTHER && postData?.channelGroup !== channelGroupEnum.Email && postData?.channelGroup !== channelGroupEnum.Pantip" class="colored__locobuzz">{{item?.thumbUrl}}</a>
      <ng-container
        *ngIf="postData?.channelGroup == channelGroupEnum.Telegram && (item?.mediaType ==  MediaEnum.PDF || item?.mediaType ==  MediaEnum.DOC || item?.mediaType ==  MediaEnum.EXCEL || item?.mediaType ==  MediaEnum.TEXT)">
        <div class="post__document--files files">
      
          <ng-container *ngIf="item?.mediaType == MediaEnum.PDF else dataDocOrExcels">
            <a [href]="item.mediaUrl" download="item.name" target="_blank" class="post__document--files-download download"
              (click)="$event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined">download</mat-icon>
            </a>
          </ng-container>
          <ng-template #dataDocOrExcels>
            <a [href]="item.mediaUrl" download="item.name" class="post__document--files-download download"
              (click)="$event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined">download</mat-icon>
            </a>
          </ng-template>
      
      
          <div class="post__document--files-icon"
            (click)="openAttachmentDocAndAudioPreviewForTelegram(item);$event.stopPropagation()">
            <img class="img" *ngIf="item.mediaType == MediaEnum.PDF" src="assets/images/account/pdf__icon.svg">
            <img class="img" *ngIf="item.mediaType == MediaEnum.DOC" src="assets/images/account/doc__icon.svg">
            <img class="img" *ngIf="item.mediaType == MediaEnum.EXCEL" src="assets/images/account/excl__icon.svg">
            <img class="img" *ngIf="item.mediaType == MediaEnum.TEXT" src="assets/images/chatbot/txt.svg">
          </div>
          <div class="post__document--files-name"
            (click)="openAttachmentDocAndAudioPreviewForTelegram(item);$event.stopPropagation()">
            <p class="document" [matTooltip]="item.name.length > 22 ? item.name : ''" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">{{item.name}}</p>
          </div>
        </div>
      </ng-container>
    </ng-container>
    <div #attachmentContainer class="d-flex-items-center g-10" style="flex-wrap: wrap">
      <div class="post__body--media position-relative " (click)="$event.stopPropagation()"
        *ngIf="(ticketHistoryData?.imageurls?.length > 0 && postData?.channelGroup !== channelGroupEnum.Email && postData?.channelGroup !== channelGroupEnum.Pantip)"  
        [ngStyle]="{ display: ticketHistoryData?.imageurls[0] ? 'flex' : 'none' }">
        <!-- ----------------{{ticketHistoryData |}} -->
        <span class="position-relative" *ngIf="ticketHistoryData?.imageurls.length == 1" [ngStyle]="{'width' : ticketHistoryData?.imageurls.length == 1 ? '100px' : '100%'}">
        <img matTooltip="{{'Click-to-view-the-image' | translate}}" class="w-70-p" matTooltipPosition="above"
            matTooltipClass="custom-tooltip" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]); $event.stopPropagation()"  *ngIf = "ticketHistoryData?.imageurls[0].includes('WebHook/GetTwitterDMImage')" src="/assets/images/Image_Placeholder.png">
        <img *ngIf = "!ticketHistoryData?.imageurls[0].includes('WebHook/GetTwitterDMImage')" class="cursor-pointer post__body--image one__images--preview" alt="Attachment" 
          [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]); $event.stopPropagation()"  [style.width.%]="95"  />
        <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0]) && ticketHistoryData?.imageurls.length == 1" >
        <mat-icon class="video__play--icon" 
          (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation(); triggerWebhookForVideo();">
          play_circle_outline
        </mat-icon>
      </div>
      </span>
        <div *ngIf="ticketHistoryData?.imageurls.length == 2 && postData?.channelGroup !== channelGroupEnum.Pantip" class="height-100 post__body--image two__images--block" [ngStyle]="{'width':ticketHistoryData?.videoUrls.length >0 ? '130px' : '250px'}"
          (click)="$event.stopPropagation()">
          <span class="position-relative">
          <img class="cursor-pointer width-50 height-100 two__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[0]"  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])" [style.width.%]="100"  />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
              <mat-icon class="video__play--icon" 
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
          </span>
          <span class="position-relative">
          <img class="cursor-pointer width-50 height-100 ml-5 two__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"  [style.width.%]="100"  />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
              <mat-icon class="video__play--icon" 
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
          </span>
        </div>
        
        <div *ngIf="ticketHistoryData?.imageurls.length == 3 && postData?.channelGroup !== channelGroupEnum.Pantip" class="height-100 three__images--block post__body--image"
          (click)="$event.stopPropagation()">
          <div class="three__images" >
            <span class="position-relative w-100-p">
            <img class="cursor-pointer w-100-p height-100 three__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"  [style.width.%]="100"  />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])" >
              <mat-icon class="video__play--icon" 
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
            </span>
            <span class="position-relative w-100-p">
            <img class="cursor-pointer w-100-p height-100 ml-5 three__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"  [style.width.%]="100"  />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
              <mat-icon class="video__play--icon" 
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
            </span>
          </div>
          <div class="w-100-p three__images">
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-100 height-100 three__images--full border-radius-none" [src]="ticketHistoryData?.imageurls[2]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2])"  [style.width.%]="100"  />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[2])">
              <mat-icon class="video__play--icon" 
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
          </span>
          </div>
        </div>

        <div *ngIf="ticketHistoryData?.imageurls.length == 4 && postData?.channelGroup !== channelGroupEnum.Pantip" class="height-100 post__body--image four__images--block"
          (click)=" $event.stopPropagation()">
          <div class="four__images">
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 four__images--preview" [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"  [style.width.%]="100"  />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
                <mat-icon class="video__play--icon" 
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 ml-5 four__images--preview" [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"  [style.width.%]="100"  />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
              <mat-icon class="video__play--icon" 
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
            </span>
          </div>
          <div class="four__images">
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 four__images--preview" [src]="ticketHistoryData?.imageurls[2]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2])"  [style.width.%]="100"  />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[2])">
                <mat-icon class="video__play--icon" 
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 ml-5 four__images--preview" [src]="ticketHistoryData?.imageurls[3]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3])"  [style.width.%]="100"  />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[3])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
        </div>

        <div *ngIf="ticketHistoryData?.imageurls.length > 4 && postData?.channelGroup !== channelGroupEnum.Pantip" class="height-100 post__body--image more__images--block"
          (click)=" $event.stopPropagation()">
          <!-- last change -->
          <div class="more__images">
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 more__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"   [style.width.%]="100"  />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
                <mat-icon class="video__play--icon" 
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 ml-5 more__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[1]"  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"  [style.width.%]="100"  />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
                <mat-icon class="video__play--icon" 
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
          <div class="more__images">
            <span class="position-relative w-100-p">
            <img class="cursor-pointer width-50 height-100 more__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[2]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2])"  [style.width.%]="100"  />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[2])">
                <mat-icon class="video__play--icon" 
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <div class="post__body--image-more w-100-p height-100 ml-5">
              <span class="position-relative w-100-p">
              <img class="cursor-pointer w-100-p height-100 more__images--preview border-radius-none" [src]="ticketHistoryData?.imageurls[3]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3])"  [style.width.%]="100"  />
                <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[3])">
                  <mat-icon class="video__play--icon"  style="top: 4.5rem;"
                    (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3]);$event.stopPropagation()">
                    play_circle_outline
                  </mat-icon>
                </div>
              </span>
              <div (click)="openAttachmentPreview(); $event.stopPropagation()"
                class="post__body--media-count media-count active border-radius-none" *ngIf="ticketHistoryData?.imageurls.length > 4">
                +{{ ticketHistoryData?.imageurls.length - 4 }}
              </div>
            </div>
          </div>
        </div>
        
      </div>
              <ng-container  *ngIf="ticketHistoryData?.fileUrls?.length>0 && (postData.channelGroup != channelGroupEnum.Email)">
                <span (click)="$event.stopPropagation()" matTooltip={{file.fileName}} matTooltipPosition="above"
            matTooltipClass="custom-tooltip" *ngFor="let file of ticketHistoryData?.fileUrls" class="messages__attachFile">
                  <span class="messages__attachFile--file" (click)="downloadTextFile(file)" *ngIf = "file && file?.fileUrl && file?.fileUrl.endsWith('.txt'); else otherFile">
                    <span class="d-flex-items-center">
                      <img src="assets/images/other-attachment.svg" />
                      <span class="messages__attachFile--name">{{file.fileName}}</span>
                    </span>
                    <a class="messages__attachFile--download">
                      <mat-icon>file_download</mat-icon>
                    </a>
                  </span>
                  <ng-template #otherFile>
                      <span class="messages__attachFile--file">
                        <span class="d-flex-items-center">
                          <img src="assets/images/other-attachment.svg" />
                          <span class="messages__attachFile--name">{{file.fileName}}</span>
                        </span>
                        <a class="messages__attachFile--download" [download]="file.fileName" href={{file.fileUrl}} target="_blank">
                          <mat-icon>file_download</mat-icon>
                        </a>
                      </span>
                  </ng-template>
                </span>
              </ng-container >
      <ng-container *ngIf="(ticketHistoryData?.videoUrls?.length > 0 && postData?.channelGroup !== channelGroupEnum.Email)">
      <div *ngFor="let mediaObj of ticketHistoryData?.videoUrls" class="post__body--media position-relative w-100 h-100"
        (click)="openAttachmentPreview(mediaObj.thumbUrl); $event.stopPropagation()">
        <video class="w-100-p video object-cover" poster={{mediaObj.thumbUrl}} controls style="border-radius: 10px" width="100%" height="100%">
          <source [src]="mediaObj.fileUrl" type="video/mp4" />
          <source [src]="mediaObj.fileUrl" type="video/ogg" />
         {{'Your-browser-video' | translate}}
        </video>
        <mat-icon class="video__play--icon">play_circle_outline</mat-icon>
      </div>
      </ng-container>
      <!-- file attachment -->
      <ng-container *ngIf="postData?.channelGroup == channelGroupEnum.Email">
        <!-- <div class="post__document--files files" *ngFor="let file of ticketHistoryData?.documentUrls">

          <ng-container *ngIf="file?.mediaType == MediaEnum.PDF else dataDocOrExcels">
            <a [href]="file.fileUrl" download="file.fileName" target="_blank" class="post__document--files-download download"
              (click)="$event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined">download</mat-icon>
            </a>
          </ng-container>
          <ng-template #dataDocOrExcels>
            <a [href]="file.fileUrl" download="file.fileName" class="post__document--files-download download"
              (click)="$event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined">download</mat-icon>
            </a>
          </ng-template>
          
          
          <div class="post__document--files-icon" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
            <img class="img" *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/account/pdf__icon.svg">
            <img class="img" *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/account/doc__icon.svg">
            <img class="img" *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/account/excl__icon.svg">
          </div>          
          <div class="post__document--files-name" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
            <p class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">{{file.fileName}}</p>
            </div>
        </div> -->
          <div *ngIf="attachmentList?.length>0" (click)="$event.stopPropagation()" class="post-email__attachments mt-12 w-100-p">
            <div  class="d-flex">
              <p class="font-weight-500">{{attachmentList?.length}} {{attachmentList?.length>1?'Attachments':'Attachment'}}</p>
              <a *ngIf="attachmentList?.length>1" [matTooltip]="'Download all attachments'" matTooltipPosition="above"
            matTooltipClass="custom-tooltip" class="file-download-all ml-auto right-auto" (click)="downloadAllFiles()">
                <mat-icon fontSet="material-icons-outlined">file_download</mat-icon>
              </a>
            </div>
            <div class="d-flex-items-center g-10 mt-6">
              <div (click)="openMediaPreview(obj,false)" #attachmentRef *ngFor="let obj of attachmentList | slice:0:maximumAttachmentLength ;index as i"
                class="d-flex-items-center pl-2 pr-5 py-2 file-pill h-30">
                <img  class="w-21" [src]="obj.iconUrl" />
                <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                  class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                  class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                <p class="cursor-pointer" [matTooltip]="obj.name"
                  matTooltipClass="custom__tooltip-normal">{{ obj?.name | slice: 0:8 }}{{ obj?.name?.length
                  > 8 ? '...' : '' }}</p>
                <mat-icon (click)="downloadFile(obj.mediaUrl,obj.name);$event.stopPropagation()" class="ml-6 s-18 cursor-pointer"
                  fontSet="material-icons-outlined">file_download</mat-icon>
              </div>
              <div *ngIf="showMoreAttachment">
                <span *ngIf="remainingCount>0" class="more-count cursor-pointer" (click)="$event.stopPropagation()" [matMenuTriggerFor]="attachmentMore">+{{remainingCount}}</span>
                  <mat-menu #attachmentMore="matMenu" class="">
                  <button mat-menu-item class="d-flex-items-center" (click)="openMediaPreview(obj,false)" 
                    *ngFor="let obj of attachmentList | slice:maximumAttachmentLength:attachmentList.length ;index as i">
                    <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                      class="material-icons-outlined colored__red mr-6 font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                    <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                      class="material-icons-outlined colored__purple mr-6 font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                    <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                    <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                    <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                    <span class="d-flex-items-center">
                      <img class="w-21 mr-6" [src]="obj.iconUrl" />
                      <span class="more-count__text text__ellipsis" [matTooltip]="obj.name"
                        matTooltipClass="custom__tooltip-normal">
                        {{ obj?.name | slice: 0:15 }}{{ obj?.name?.length
                        > 15 ? '...' : '' }}</span>
                      <mat-icon (click)="downloadFile(obj.mediaUrl,obj.name);$event.stopPropagation()" class="ml-auto mr-0 s-18 cursor-pointer right-auto"
                        fontSet="material-icons-outlined">file_download</mat-icon>
                    </span>
                      </button>
                  </mat-menu>
              </div>
              <!-- <div class="d-flex-items-center pl-2 pr-5 py-2 file-pill">
                              <mat-icon
                                  class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                              <p>untitled_file.jpg</p>
                              <mat-icon class="ml-6 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
                          </div>
                          <div class="d-flex-items-center g-3 pl-2 pr-5 py-4 file-pill">
                              <img class="w-21" src="assets/icons/excel-icon.svg">
                              <p>untitled_file.excl</p>
                              <mat-icon class="ml-6 s-18" fontSet="material-icons-outlined">close</mat-icon>
                          </div> -->
            </div>
          </div>
      </ng-container>
      <!-- ends file attachment -->
    </div>

    <!-- <div class="post__body--media position-relative" *ngIf="postData?.channelGroup != channelGroupEnum.Email && ticketHistoryData?.documentUrls" [ngClass]="{
        'mt-30 ml-12': postData?.channelGroup == channelGroupEnum.Email
      }" [ngStyle]="{ display: ticketHistoryData?.documentUrls[0] ? 'flex' : 'none' }">
      <a *ngIf="ticketHistoryData?.documentUrls.length == 1" [href]="ticketHistoryData?.documentUrls[0].fileUrl"
        download="ticketHistoryData?.documentUrls[0].fileName" target="_blank" (click)="$event.stopPropagation()">
        <img class="cursor-pointer post__body--image" *ngIf="ticketHistoryData?.documentUrls.length == 1"
          [src]="ticketHistoryData?.documentUrls[0].thumbUrl" />
      </a>
      <mat-icon class="video__play--icon" *ngIf="videoIcon">play_circle_outline</mat-icon>
    </div> -->

    <div class="post__document"
      *ngIf="postData?.channelGroup != channelGroupEnum.Email && postData?.channelGroup != channelGroupEnum.Telegram && ticketHistoryData?.documentUrls.length > 0"
      [ngStyle]="{ display: ticketHistoryData?.documentUrls[0] ? 'flex' : 'none' }">
      <span class="post__document--files">
        <a *ngIf="ticketHistoryData?.documentUrls.length == 1" [href]="ticketHistoryData?.documentUrls[0].fileUrl"
          download="ticketHistoryData?.documentUrls[0].fileName" target="_blank" (click)="$event.stopPropagation()">
          <img *ngIf="ticketHistoryData?.documentUrls.length == 1" [src]="ticketHistoryData?.documentUrls[0].thumbUrl" />
          {{ticketHistoryData?.documentUrls[0].fileName}}
        </a>
      </span>
    </div>

    <div class="post__body--media position-relative" *ngIf="(ticketHistoryData?.audioUrls.length > 0 && postData?.channelGroup!==channelGroupEnum.Email) " [ngClass]="{
        'mt-30 ml-12': postData?.channelGroup == channelGroupEnum.Email
      }" [ngStyle]="{ display: ticketHistoryData?.audioUrls[0] ? 'block' : 'none' }">
      <img class="cursor-pointer post__body--image" *ngIf="ticketHistoryData?.audioUrls.length == 1"
        [src]="ticketHistoryData?.audioUrls[0].thumbUrl"
        (click)="openAttachmentDocAndAudioPreview(ticketHistoryData?.audioUrls[0].fileUrl); $event.stopPropagation()" />
      <mat-icon class="video__play--icon" *ngIf="videoIcon">play_circle_outline</mat-icon>
    </div>

    <!-- <div class="post__document" *ngIf="postData?.channelGroup == channelGroupEnum.Email && attchmentFlag">
      <span class="post__document--files" *ngFor="let file of ticketHistoryData?.documentUrls"> -->
        <!-- <a [href]="file.fileUrl" download="file.fileName" target="_blank" (click)="$event.stopPropagation()">
                <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
                <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
                <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
                <span class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
                  matTooltipClass="custom__tooltip-normal">{{file.fileName}}</span>
              </a> -->
    
        <!-- <a href="javascript:void(0);" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
          <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
          <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
          <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
          <span class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
            matTooltipClass="custom__tooltip-normal">
            {{file.fileName}}
          </span>
        </a>
      </span>
    </div> -->

    <!-- <div
      class="post__body--media position-relative"
      *ngIf="ticketHistoryData?.imageurls"
      [ngClass]="{
        'mt-30 ml-12': postData?.channelGroup == channelGroupEnum.Email
      }"
      [ngStyle]="{ display: ticketHistoryData?.imageurls[0] ? 'block' : 'none' }"
    >
      <img
        class="cursor-pointer"
        [src]="ticketHistoryData?.imageurls[0]"
        (click)="openAttachmentPreview(); $event.stopPropagation()"
      />
      <mat-icon class="video__play--icon" *ngIf="videoIcon"
        >play_circle_outline</mat-icon
      >
      <div
        (click)="openAttachmentPreview(); $event.stopPropagation()"
        class="post__body--media-count media-count"
        *ngIf="ticketHistoryData?.imageurls.length > 1"
      >
        +{{ ticketHistoryData?.imageurls.length - 1 }}
      </div>
    </div> -->
    <!-- <div class="post__body--media-video position-relative" *ngIf="ticketHistoryData?.videoUrls.length > 0"
      (click)="openAttachmentPreview(); $event.stopPropagation()" [ngStyle]="{
        display: ticketHistoryData?.videoUrls[0].fileUrl ? 'block' : 'none'
      }">
      <video class="video" controls style="border-radius: 10px">
        <source [src]="ticketHistoryData?.videoUrls[0].fileUrl" type="video/mp4" />
        <source [src]="ticketHistoryData?.videoUrls[0].fileUrl" type="video/ogg" />
        Your browser does not support HTML video.
      </video>
      <mat-icon class="video__play--icon" *ngIf="videoIcon">play_circle_outline</mat-icon>
    </div> -->
    <div class="note-attachment note-attachment-has">
    <ng-container >
      <div class="post__alert post__alert--warning mt-0" *ngIf=" post?.isLastNoteShow  && (note ||(fileList && fileList?.length > 0 )|| (medialist.length > 0 && medialist))" (click)="this.noteMediaCount.showDownload = !this.noteMediaCount.showDownload;this.noteMediaCount.showDownload?checkNotesWidth():''; $event.stopPropagation(); $event.preventDefault();">
        <label class="post__alert--label" *ngIf="ticketHistoryData.isrejectedNote; else LastNote">{{'Rejected-Note' | translate}}:
        </label>
        <ng-template #LastNote>
          <label class="post__alert--label">{{'note' | translate}}: </label>
        </ng-template>
        <span class="post__alert--info | linkify: 'linkifyOptions'" [innerHTML] = "note != postData?.ticketInfo?.lastNote && note ? postData?.ticketInfo?.lastNote : note">
          <!-- {{ note }} -->
        </span>
        <span class="post__alert--attachment pl-0 pr-0 m-0">
          <!-- this.noteMediaCount?.pdfCount > 0  -->
          <span class="post__alert--attachment-icon ml-8" *ngIf="this.noteMediaCount?.pdfCount > 0">
            <span class="post__alert--attachment-pdficon">{{'pdf' | translate}}</span> <span class="mr-7 ml-4"
              *ngIf="this.noteMediaCount?.pdfCount > 1">+{{this.noteMediaCount?.pdfCount - 1}}</span>
          </span>
          <!-- this.noteMediaCount?.xlsCount > 0 -->
          <span class="post__alert--attachment-icon ml-8" *ngIf="this.noteMediaCount?.xlsCount > 0">
            <span class="post__alert--attachment-pdficon bg__green">{{'excel' | translate}}</span> <span class="mr-7 ml-4"
              *ngIf="this.noteMediaCount?.xlsCount > 1">+{{this.noteMediaCount?.xlsCount - 1}}</span>
          </span>
          <!-- this.noteMediaCount?.docCount > 0 -->
          <span class="post__alert--attachment-icon ml-8" *ngIf="this.noteMediaCount?.docCount > 0">
            <span class="post__alert--attachment-pdficon bg__locobuzz">{{'doc' | translate}}</span> <span class="mr-7 ml-4"
              *ngIf="this.noteMediaCount?.docCount > 1">+{{this.noteMediaCount?.docCount - 1}}</span>
          </span>
          <span class="post__alert--attachment-imgicon ml-8" *ngIf="this.noteMediaCount?.mediaCount > 0 "
            style="font-size: 1.4rem;">
            <mat-icon fontSet="material-icons-outlined" class="s-24">image</mat-icon> <span class="ml-4"
              *ngIf="this.noteMediaCount?.mediaCount > 1">+{{this.noteMediaCount?.mediaCount -1}}</span>
          </span>
        </span>
      </div>
      <p *ngIf="!this.noteMediaCount?.showDownload && postData?.isTicketNoteEdited && postData?.status == 45">{{'edited-on' | translate}} {{postData?.ticketNoteEditedOn | datetimeFormatter:'DD-MMMM-YYYY hh:mm A'}}</p>
      <div class="post__alert post__filled--form" *ngIf="post?.formFilledNote">
        <mat-icon fontSet="material-icons-outlined">article</mat-icon>
        <span>
          <span class="text-underline">{{authorName}}</span> {{'has-filled-the-form' | translate}}
        </span>
      </div>
    </ng-container>
    <!-- <ng-template #VoipNote> -->
      <!-- *ngIf="post?.note" -->
      <!-- <div class="post__alert post__alert--warning" *ngIf="ticketHistoryData?.voipNote"> -->
        <!-- <label class="post__alert--label" *ngIf="ticketHistoryData?.isrejectedNote; else LastNote">Rejected Note:
                </label>
                <ng-template #LastNote>
                  <label class="post__alert--label">Note: </label>
                </ng-template> -->
        <!-- <label class="post__alert--label">{{'note' | translate}}: </label>
        <span class="post__alert--info | linkify: 'linkifyOptions'" *ngIf="ticketHistoryData?.voipNote?.length < 350; else moreLessNote">
          {{ ticketHistoryData?.voipNote }}
        </span>
      </div>
      <ng-template #moreLessNote>
        <span class="post__alert--info | linkify: 'linkifyOptions'">
          {{ moreNote && ticketHistoryData?.voipNote?.length > 450 ? ticketHistoryData?.voipNote.substring(0,350) : ticketHistoryData?.voipNote }}
        </span>
        <ng-container *ngIf="ticketHistoryData?.voipNote?.length > 450">
          <span *ngIf="moreNote" (click)="moreNote=!moreNote; $event.stopPropagation(); $event.preventDefault();" class="colored__locobuzz cursor-pointer">...{{'read-more' | translate}}</span>
          <span *ngIf="!moreNote"(click)="moreNote=!moreNote; $event.stopPropagation(); $event.preventDefault();" class="colored__locobuzz cursor-pointer"> {{'read-less' | translate}}</span>
        </ng-container>
      </ng-template>
    </ng-template> -->
    <ng-container *ngIf="this.noteMediaCount.showDownload">
        <div class="d-flex-items-center g-10 note-attachment__attached">
          <div #attachmentNoteRef (click)="openMediaPreview(obj,true);$event.stopPropagation()"
            *ngFor="let obj of notesAttachmentList | slice:0:maximumAttachmentNoteLength ;index as i"
            class="d-flex-items-center pl-2 pr-5 py-2 file-pill h-30">
            <img class="w-21 mr-6" [src]="obj.iconUrl" />
            <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                          class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                        <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                          class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                        <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                        <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                        <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
            <p class="cursor-pointer" [matTooltip]="obj.fileName.length > 12 ? obj.fileName :''"
              matTooltipClass="custom__tooltip-normal">{{ obj?.fileName | slice: 0:8 }}{{ obj?.fileName?.length
              > 8 ? '...' : '' }}</p>
            <mat-icon (click)="downloadFile(obj.mediaUrl,obj.fileName);$event.stopPropagation()" class="ml-6 s-18 cursor-pointer"
              fontSet="material-icons-outlined">file_download</mat-icon>
          </div>
          <div *ngIf="showMoreNoteAttachment">
            <span class="more-count cursor-pointer" *ngIf="remainingNotesCount>0" (click)="$event.stopPropagation()"
              [matMenuTriggerFor]="attachmentMore">+{{remainingNotesCount}}</span>
            <mat-menu #attachmentMore="matMenu" class="">
              <button mat-menu-item class="d-flex-items-center" (click)="openMediaPreview(obj,true)"
                *ngFor="let obj of notesAttachmentList | slice:maximumAttachmentNoteLength:notesAttachmentList.length ;index as i">
                <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                              class="material-icons-outlined colored__red mr-6 font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                            <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                              class="material-icons-outlined colored__purple mr-6 font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                            <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                            <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                            <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                <span class="d-flex-items-center">
                  <img class="w-21 mr-6" [src]="obj.iconUrl" />
                  <span class="more-count__text text__ellipsis" [matTooltip]="obj.fileName.length > 12 ? obj.fileName :''"
                    matTooltipClass="custom__tooltip-normal">
                    {{ obj?.fileName | slice: 0:15 }}{{ obj?.fileName?.length
                    > 15 ? '...' : '' }}</span>
                  <mat-icon (click)="downloadFile(obj.mediaUrl,obj.fileName);$event.stopPropagation()"
                    class="ml-auto mr-0 s-18 cursor-pointer right-auto" fontSet="material-icons-outlined">file_download</mat-icon>
                </span>
              </button>
            </mat-menu>
          </div>
          <!-- <div class="d-flex-items-center pl-2 pr-5 py-2 file-pill">
                                      <mat-icon
                                          class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                                      <p>untitled_file.jpg</p>
                                      <mat-icon class="ml-6 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
                                  </div>
                                  <div class="d-flex-items-center g-3 pl-2 pr-5 py-4 file-pill">
                                      <img class="w-21" src="assets/icons/excel-icon.svg">
                                      <p>untitled_file.excl</p>
                                      <mat-icon class="ml-6 s-18" fontSet="material-icons-outlined">close</mat-icon>
                                  </div> -->
        </div>
    <p *ngIf="postData?.isTicketNoteEdited && this.noteMediaCount?.showDownload && postData?.status == 45">{{'edited-on' | translate}} {{postData?.ticketNoteEditedOn | datetimeFormatter:'DD-MMMM-YYYY hh:mm A'}}</p>
    </ng-container>
    </div>
    <ng-container *ngIf="scanContentUrlList?.length>0 && !noLinkFound">
      <div *ngFor="let urlObj of scanContentUrlList"
        [ngClass]="{'green-pill': urlObj.status==1,'red-pill':urlObj.status==2}"
        class="post__alert post__alert--warning mt-8">
        <label class="post__alert--label " [ngClass]="{'green-pill': urlObj.status==1,'red-pill':urlObj.status==2}">
          <mat-icon
            [ngClass]="{'colored__green--dark': urlObj.status==1,'colored__red--dark':urlObj.status==2}">
            {{urlObj.status==1?'gpp_good':'gpp_bad'}}</mat-icon>{{urlObj.status==1?'SafeLink':'Unsafe Content'}}:
        </label>
        <span (click)="$event.stopPropagation()" class="
                      post__alert--info
                    " [innerHTML]="
                urlObj.url | linkify: 'linkifyOptions'">
        </span>
      </div>
    </ng-container>
    <ng-template [ngIf]="postData?.channelGroup == channelGroupEnum.Quora && (pageType === PostsType.Mentions || pageType === PostsType.TicketHistory)">
    <div class="post__quora--share">
      <div matTooltip="{{'Upvote' | translate}}" matTooltipPosition="above"
          matTooltipClass="custom__tooltip-normal" *ngIf="postData.channelType === channelTypeEnum.QuoraAnswer || postData.channelType === channelTypeEnum.QuoraComment " class="post__quora--icon">
        <img src="assets/images/upvote.svg" alt=""> <span class="ml-5">{{postData?.mentionMetadata?.likeCount?postData?.mentionMetadata.likeCount:0 | numberFormatCommaSeperate}}</span>
      </div>
      <div matTooltip="{{'Share' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraAnswer"
          matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
        <img src="assets/images/Quora_Share.svg" alt=""> <span class="ml-5">{{postData?.mentionMetadata?.shareCount?postData?.mentionMetadata.shareCount:0 | numberFormatCommaSeperate}}</span>
      </div>
      <div matTooltip="{{'Comment' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraQuestion || postData.channelType === channelTypeEnum.QuoraAnswer"
          matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
        <img src="assets/images/comments.svg" alt=""> <span class="ml-5">{{postData?.mentionMetadata?.commentCount?postData?.mentionMetadata.commentCount:0 | numberFormatCommaSeperate}}</span>
      </div>
      <div matTooltip="{{'View' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraAnswer"
          matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
        <img src="assets/images/Views_eye.svg" alt=""> <span class="ml-5">{{postData?.mentionMetadata?.videoViews?postData.mentionMetadata.videoViews:0 | numberFormatCommaSeperate}}</span>
      </div>
        <div matTooltip="{{'Answer' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraQuestion"
          matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
        <mat-icon fontset="material-icons-outlined" aria-label="question answer"
          class="mat-icon notranslate material-icons-outlined mat-icon-no-color s-20">question_answer</mat-icon> <span
            class="ml-5">{{postData?.mentionMetadata?.answerCount?postData.mentionMetadata.answerCount:0 |
            numberFormatCommaSeperate}}</span>
        </div>
    </div>
    </ng-template>
    <ng-template
      [ngIf]="post?.channelgroup === channelGroupEnum.TikTok && post?.channeltype == channelTypeEnum.TikTokBrandPost && (pageType === PostsType.Mentions || pageType === PostsType.TicketHistory)">
      <div class="post__quora--share">
        <div matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
          class="post__quora--icon">
          <span class="post__stat--icon text__label">
            <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
          </span>
          <span class="ml-5">{{(postData?.mentionMetadata?.likeCount ? postData?.mentionMetadata.likeCount : 0) | numberFormatCommaSeperate}}</span>
        </div>
        <div matTooltip="{{'Share' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
          class="post__quora--icon">
          <span class="post__stat--icon text__label">
            <mat-icon fontSet="material-icons-outlined" class="forward-icon">reply</mat-icon>
          </span>
          <span class="ml-5">{{(postData?.mentionMetadata?.shareCount ?
            postData?.mentionMetadata.shareCount : 0) | numberFormatCommaSeperate}}</span>
        </div>
        <div matTooltip="{{'Comment' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
          class="post__quora--icon">
          <span class="post__stat--icon text__label">
            <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
          </span>
          <span class="ml-5">{{(postData?.mentionMetadata?.commentCount ?
            postData?.mentionMetadata.commentCount : 0) | numberFormatCommaSeperate}}</span>
        </div>
        <div matTooltip="{{'Saved' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
          <span class="post__stat--icon text__label">
            <mat-icon fontSet="material-icons-outlined">turned_in_not</mat-icon>
          </span>
          <span class="ml-5">{{(postData?.mentionMetadata?.savedCount ?
            postData?.mentionMetadata.savedCount : 0) | numberFormatCommaSeperate}}</span>
        </div>
        <div matTooltip="{{'View' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
          class="post__quora--icon">
          <span class="post__stat--icon text__label">
            <mat-icon fontSet="material-icons-outlined">visibility</mat-icon>
          </span>
          <span class="ml-5">{{(postData?.mentionMetadata?.videoViews ?
            postData?.mentionMetadata.videoViews : 0) | numberFormatCommaSeperate}}</span>
        </div>
        <div class="post__stat--item">
          <span class="post__stat--icon text__label">{{'Engagement' | translate}}: </span>
          <span class="post__stat--value text__label ml-3 no-underline">
            {{post?.engagement | numberFormatCommaSeperate}}</span> 
            <span *ngIf="
                          post?.showEngagementFxFlag && post?.engagement != 'NA'" (click)="updateReachAndImpression()" class="post__stat--icon text__label ml-4" matTooltipPosition="above"
              matTooltipClass="custom-tooltip"
              matTooltip="{{'Reach-and-Impression-Formula-Info' | translate}}">
              <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
            </span>
        </div>
        <div class="post__stat--item" *ngIf = "!ticketHistoryData?.isDarkAdPost">
          <span class="post__stat--icon text__label">{{'Reach' | translate}}: </span>
          <span class="post__stat--value text__label ml-3 no-underline">
            {{ post?.reach | numberFormatCommaSeperate }}</span> 
              <span *ngIf="
                          post?.showReachFxFlag && post?.reach != 'NA'
                        " (click)="updateReachAndImpression()" class="post__stat--icon text__label ml-4" matTooltipPosition="above"
                matTooltipClass="custom-tooltip"
                matTooltip="{{'Reach-and-Impression-Formula-Info' | translate}}">
                <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
              </span>
        </div>
        <div class="post__stat--item" *ngIf = "!ticketHistoryData?.isDarkAdPost">
          <span class="post__stat--icon text__label">{{'Impression' | translate}}: </span>
          <span class="post__stat--value text__label ml-3 no-underline">
            {{ post?.impression | numberFormatCommaSeperate }}</span>
            <span  *ngIf="
                          post?.showImpressionFxFlag && post?.impression != 'NA'" (click)="updateReachAndImpression()" class="post__stat--icon text__label ml-4" matTooltipPosition="above"
              matTooltipClass="custom-tooltip"
              matTooltip="{{'Reach-and-Impression-Formula-Info' | translate}}">
              <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
            </span>
        </div>
      </div>
    </ng-template>
      <ng-template
        [ngIf]="clickhouseEnabled && post?.channelgroup === channelGroupEnum.TikTok && post?.channeltype == channelTypeEnum.TikTokComments && (pageType === PostsType.Mentions)">
        <div class="post__quora--share">
          <div matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
            class="post__quora--icon">
            <span class="post__stat--icon text__label">
              <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
            </span>
            <span class="ml-5">{{(postData?.mentionMetadata?.likeCount ? postData?.mentionMetadata.likeCount : 0) | numberFormatCommaSeperate}}</span>
          </div>
          <div matTooltip="{{'Comment' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
            class="post__quora--icon">
            <span class="post__stat--icon text__label">
              <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
            </span>
            <span class="ml-5">{{(postData?.mentionMetadata?.commentCount ?
              postData?.mentionMetadata.commentCount : 0 )| numberFormatCommaSeperate}}</span>
          </div>
        </div>
      </ng-template>
      <ng-template
      [ngIf]="clickhouseEnabled && post?.channelgroup === channelGroupEnum.GoogleMyReview && (post?.channeltype == channelTypeEnum.GMBAnswers || post?.channeltype == channelTypeEnum.GMBQuestion || (post?.channeltype == channelTypeEnum.GoogleMyReview && !postData?.isBrandPost))">
      <div class="post__quora--share">
        <div matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
          class="post__quora--icon">
          <span class="post__stat--icon text__label">
            <mat-icon fontSet="material-icons-outlined">thumb_up</mat-icon>
          </span>
          <span class="ml-5">{{(postData?.mentionMetadata?.likeCount ? postData?.mentionMetadata.likeCount : 0) | numberFormatCommaSeperate}}</span>
        </div>
        <div matTooltip="{{'Answer-Count' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
        class="post__quora--icon" *ngIf="post?.channeltype != channelTypeEnum.GMBAnswers && post?.channeltype != channelTypeEnum.GoogleMyReview ">
        <span class="post__stat--icon text__label" >
          <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
        </span>
        <span class="ml-5">{{(postData?.mentionMetadata?.answerCount ?
          postData?.mentionMetadata.answerCount : 0 )| numberFormatCommaSeperate}}</span>
      </div>
        
      </div>
    </ng-template>
    <!-- missed call start -->
    <!-- <div class="post__alert post__alert--missedcall">
      <label class="post__alert--label missedcall__label">
        <mat-icon fontSet="material-icons-outlined">call_missed</mat-icon> Missed Call:
      </label>
      <span class="post__alert--info missedcall__info">
        You have received a missed call from <span class="missedcall__number">+91 98765 43210</span> due to agents phone was busy.
      </span>
    </div> -->
    <!-- missed call ends -->
  <!-- <div class="post__document" *ngIf="postData?.channelGroup == channelGroupEnum.Email && attchmentFlag">
    <span class="post__document--files" *ngFor="let file of ticketHistoryData?.documentUrls"> -->
      <!-- <a [href]="file.fileUrl" download="file.fileName" target="_blank" (click)="$event.stopPropagation()">
            <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
            <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
            <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
            <span class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">{{file.fileName}}</span>
          </a> -->
    
      <!-- <a href="javascript:void(0);" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
        <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
        <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
        <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
        <span class="document" [matTooltip]="file.fileName.length > 22 ? file?.fileName : ''" matTooltipPosition="above"
          matTooltipClass="custom__tooltip-normal">{{file.fileName}}</span>
      </a>
    </span>
  </div> -->
  <div *ngIf="showTranslated" class="post__body--data mt-8 mb-8">
    <div class="post__note">
      <p *ngIf="!isTranslateError" class="post__note--title">
        {{'translated-from' | translate}}:
        <a (click)="$event.stopPropagation()" class="post__note--highlight" (click)="$event.stopPropagation()">{{
          translateFrom }}</a>
        To:
        <a (click)="$event.stopPropagation()" class="post__note--highlight post__note--dropdown"
          [matMenuTriggerFor]="languageDropdown">{{ translateTo }}
          <mat-icon>keyboard_arrow_down</mat-icon>
        </a>
        <mat-icon (click)="resetTranslation(); $event.stopPropagation()" fontSet="material-icons-outlined"
          class="cursor-pointer">
          highlight_off</mat-icon>
      </p>

      <mat-menu #languageDropdown="matMenu" class="h-300">
        <button *ngFor="let language of Object.keys(languages)" (click)="
            setTranslateTo(
              languages[language].DisplayName,
              languages[language].PassingName
            );
            $event.stopPropagation();closeMenu()
          " mat-menu-item>
          {{ languages[language].DisplayName }}
        </button>
      </mat-menu>
      <span class="post__note--info" [innerHtml]="translatedText">{{ translatedText }}</span>
      <mat-icon *ngIf="isTranslateError" (click)="resetTranslation(); $event.stopPropagation()"
        fontSet="material-icons-outlined" class="cursor-pointer">highlight_off</mat-icon>
    </div>
  </div>
  <div *ngIf="pollsDetails">
    <!-- Poll Start -->
    <div *ngFor="let item of pollsDetails?.options | slice:0:endIndex" class="post__poll">
      <div class="post__poll--wrapper">
        <span class="font-weight-500 text-capitalize" >{{item?.text}}</span>
        <div class="post__poll--box">
          <div class="post__poll--block">
            <span class="post__poll--strip"  [ngStyle]="{'width': item?.vote_percent}"></span>
          </div>
            <span class="post__poll--count">{{item?.vote_percent}} <span class="font-weight-500 cursor-pointer" matTooltip="{{'Votes' | translate}}" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">({{item?.vote_count}})</span></span>
        </div>        
      </div>
    </div>
      <span *ngIf="pollsDetails?.options?.length>3">
        <span *ngIf="endIndex==3"
          (click)="endIndex=pollsDetails?.options?.length;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">
          {{ 'see-more' | translate }}</span>
        <span *ngIf="endIndex>3"
          (click)="endIndex=3;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> {{ 'see-less' | translate }}</span>
      </span>
  </div>
  <!-- Poll Ends -->
  <!-- engagement -->
  <div class="post__stat" *ngIf="(pageType === PostsType.Mentions || showParentPostHeader) && !hideStatsCount">
    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'reply' | translate" *ngIf="
        post?.channelgroup === channelGroupEnum.Twitter &&
        post?.channeltype !== channelTypeEnum.DirectMessages && !hideReplyFlag
      ">
      <span class="post__stat--icon">
        <mat-icon fontSet="material-icons-outlined">reply</mat-icon>
      </span>
      <span class="post__stat--value no-underline">{{
        replyCount | numberFormatCommaSeperate
        }}</span>
    </div>
    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'like' | translate" *ngIf="
        post?.channelgroup === channelGroupEnum.Twitter &&
        post?.channeltype !== channelTypeEnum.DirectMessages && !hideLikeFlag
      ">
      <span class="post__stat--icon">
        <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
      </span>
      <span class="post__stat--value no-underline">{{ likeCount | numberFormatCommaSeperate}}</span>
    </div>
    <ng-container *ngIf="post?.channelgroup === channelGroupEnum.Reddit && !hideLikeFlag">
      <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="Upvote">
        <img src="assets/icons/reddit-upvote.svg" alt="upvote" class="w-18 h-18 post__stat--icon">
        <!-- <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon> -->
        <span class="post__stat--value no-underline ml-3 text__label">{{ (postData?.mentionMetadata?.likeCount || 0) |
          numberFormatCommaSeperate}}</span>
      </div>
    
      <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="Downvote">
        <img src="assets/icons/reddit-downvote.svg" alt="downvote" class="w-18 h-18 post__stat--icon">
        <!-- <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon> -->
        <span class="post__stat--value no-underline ml-3 text__label">{{ (postData?.mentionMetadata?.NumNegativeVoteCount ||
          0) | numberFormatCommaSeperate}}</span>
      </div>
    </ng-container>
    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'retweet' | translate"
      *ngIf="
        post?.channelgroup === channelGroupEnum.Twitter &&
        post?.channeltype !== channelTypeEnum.DirectMessages && !hideRetweetFlag
      ">
      <span class="post__stat--icon">
        <mat-icon fontSet="material-icons-outlined">repeat</mat-icon>
      </span>
      <span class="post__stat--value no-underline">{{
        retweetCount | numberFormatCommaSeperate
        }}</span>
    </div>
    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'Like' | translate" *ngIf="
            (post?.channelgroup === channelGroupEnum.Facebook &&
              post?.channeltype !== channelTypeEnum.FBMessages) ||
            post?.channelgroup === channelGroupEnum.Youtube ||
            (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
              post?.channeltype !== channelTypeEnum.LinkedInComments)
          ">
      <span class="post__stat--icon text__label">
        <mat-icon fontSet="material-icons-outlined">thumb_up_alt</mat-icon>
      </span>
      <span class="post__stat--value text__label ml-3 no-underline">
        {{ post?.likecount | numberFormatCommaSeperate }}</span> 
    </div>
    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'Like' | translate" *ngIf="
                (post?.channelgroup === channelGroupEnum.Instagram &&
                  post?.channeltype !== channelTypeEnum.InstagramMessages)
              ">
      <span class="post__stat--icon text__label">
        <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
      </span>
      <span class="post__stat--value text__label ml-3 no-underline">
        {{ post?.likecount | numberFormatCommaSeperate }}</span>
    </div>
    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'Share' | translate" *ngIf="
        (post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages &&
        post?.channeltype !== channelTypeEnum.FbGroupComments) ||
        (post?.channelgroup === channelGroupEnum.Instagram &&
          post?.channeltype !== channelTypeEnum.InstagramMessages && post?.channeltype !== channelTypeEnum.InstagramPagePosts) ||
        (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
          post?.channeltype !== channelTypeEnum.LinkedInComments)
      ">
      <span class="post__stat--icon">
        <mat-icon fontSet="material-icons-outlined" class="forward-icon">reply</mat-icon>
      </span>
      <span class="post__stat--value no-underline">{{
        post?.retweetcount | numberFormatCommaSeperate
        }}</span>
    </div>

    <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'Comment' | translate"
      *ngIf="
        (post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages &&
        post?.channeltype !== channelTypeEnum.FbGroupComments) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
          post?.channeltype !== channelTypeEnum.InstagramMessages) ||
        (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
          post?.channeltype !== channelTypeEnum.LinkedInComments) ||
          post?.channelgroup === channelGroupEnum.Youtube || post?.channelgroup === channelGroupEnum.Reddit
      ">
      <span class="post__stat--icon text__label">
        <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
      </span>
      <span class="post__stat--value text__label ml-3 no-underline">
        {{ post?.commentcount | numberFormatCommaSeperate}}</span>
    </div>
    <div class="post__stat--item" [ngClass]="{'bg-number': showMetricColor}" matTooltipPosition="above" matTooltipClass="custom-tooltip" [matTooltip]="'video-views' | translate"
      *ngIf="
      !hideVideoFlag &&
        ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages) ||
          (post?.channelgroup === channelGroupEnum.Twitter &&
            post?.channeltype !== channelTypeEnum.DirectMessages) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
            post?.channeltype !== channelTypeEnum.InstagramMessages && postData?.mentionFetchedFrom && !ticketHistoryData?.isDarkAdPost ) ||
          post?.channelgroup === channelGroupEnum.Youtube ||
          (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
            post?.channeltype !== channelTypeEnum.LinkedInComments)) &&
        post?.isbrandpost &&
        (ticketHistoryData?.videoUrls.length > 0 || postData?.mediaType === MediaEnum.VIDEO || ticketHistoryData?.youtubeSanitizeUrlObject)
      ">
      <span class="post__stat--icon text__label">
        <mat-icon fontSet="material-icons-outlined">visibility</mat-icon>
      </span>
      <span class="post__stat--value text__label ml-3 no-underline">
        {{ post?.videoviews | numberFormatCommaSeperate }}</span>
    </div>
    <div class="post__stat--item" *ngIf="
(showEngagementFormula) &&
       ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages && (!clickhouseEnabled && post?.channeltype === channelTypeEnum.FBComments)) ||
        (post?.channelgroup === channelGroupEnum.Twitter &&
          post?.channeltype !== channelTypeEnum.DirectMessages) ||
        (post?.channelgroup === channelGroupEnum.Instagram &&
          post?.channeltype !== channelTypeEnum.InstagramMessages) ||
        post?.channelgroup === channelGroupEnum.Youtube ||
        (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
          post?.channeltype !== channelTypeEnum.LinkedInComments))
      ">
      <span class="post__stat--icon text__label"> {{'Engagement' | translate}}: </span>
      <span class="post__stat--value text__label ml-3 no-underline" [ngClass]="{'bg-number': showMetricColor && (postData?.isPromoted == 2 || postData?.isPromoted == 3)}">
        {{ post?.engagement | numberFormatCommaSeperate }}</span>
    </div>
    <div class="post__stat--item" *ngIf=" 
    (showEngagementFormula) && 
        (post?.showEngagementFxFlag && post?.engagement != 'NA' &&
        ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages && (!clickhouseEnabled && post?.channeltype === channelTypeEnum.FBComments)) ||
          (post?.channelgroup === channelGroupEnum.Twitter &&
            post?.channeltype !== channelTypeEnum.DirectMessages) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
            post?.channeltype !== channelTypeEnum.InstagramMessages) ||
          post?.channelgroup === channelGroupEnum.Youtube ||
          (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
            post?.channeltype !== channelTypeEnum.LinkedInComments)))
      ">
      <span (click)="updateReachAndImpression()" class="post__stat--icon text__label" matTooltipPosition="above"
        matTooltipClass="custom-tooltip"
        matTooltip="{{'Reach-and-Impression-Formula-Info' | translate}}">
        <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
      </span>
      <span class="post__stat--value text__label ml-3 no-underline"></span>
    </div>
    <div class="post__stat--item" *ngIf="
showReachImpression &&
        ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages &&
        post?.channeltype !== channelTypeEnum.FbGroupComments) ||
          (post?.channelgroup === channelGroupEnum.Twitter &&
          post?.channeltype !== channelTypeEnum.DirectMessages) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
            post?.channeltype !== channelTypeEnum.InstagramMessages) ||
          post?.channelgroup === channelGroupEnum.Youtube) ||
           (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
          post?.channeltype !== channelTypeEnum.LinkedInComments)
      ">
      <span class="post__stat--icon text__label"> {{ 'Reach' | translate }}: </span>
      <span class="post__stat--value text__label ml-3 no-underline" [ngClass]="{'bg-number': showMetricColor && (postData?.isPromoted == 2 || postData?.isPromoted == 3)}">
        {{ post?.reach | numberFormatCommaSeperate }}</span>
    </div>
    <div class="post__stat--item" *ngIf="
    showReachImpression &&
        post?.showReachFxFlag && post?.reach != 'NA' &&
        ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages&&
        post?.channeltype !== channelTypeEnum.FbGroupComments) ||
          (post?.channelgroup === channelGroupEnum.Twitter &&
            post?.channeltype !== channelTypeEnum.DirectMessages) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
            post?.channeltype !== channelTypeEnum.InstagramMessages) ||
          post?.channelgroup === channelGroupEnum.Youtube ||
          (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
            post?.channeltype !== channelTypeEnum.LinkedInComments))
      ">
      <span (click)="updateReachAndImpression()" class="post__stat--icon text__label" matTooltipPosition="above"
        matTooltipClass="custom-tooltip"
        matTooltip="{{'Reach-and-Impression-Formula-Info' | translate}}">
        <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
      </span>
      <span class="post__stat--value text__label ml-3 no-underline"></span>
    </div>
    <div class="post__stat--item mr-0" *ngIf="
showReachImpression &&
        ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages &&
        post?.channeltype !== channelTypeEnum.FbGroupComments) ||
          (post?.channelgroup === channelGroupEnum.Twitter &&
            post?.channeltype !== channelTypeEnum.DirectMessages) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
            post?.channeltype !== channelTypeEnum.InstagramMessages) ||
          post?.channelgroup === channelGroupEnum.Youtube ||
          (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
            post?.channeltype !== channelTypeEnum.LinkedInComments))
      ">
      <span class="post__stat--icon text__label"> {{ 'impression' | translate }}: </span>
      <span class="post__stat--value text__label ml-3 no-underline" [ngClass]="{'bg-number': showMetricColor}">
        {{ post?.impression | numberFormatCommaSeperate }}</span>
    </div>
    <div class="post__stat--item" *ngIf="
    showReachImpression &&
        post?.showImpressionFxFlag && post?.impression != 'NA' &&
        ((post?.channelgroup === channelGroupEnum.Facebook &&
          post?.channeltype !== channelTypeEnum.FBMessages &&
        post?.channeltype !== channelTypeEnum.FbGroupComments) ||
          (post?.channelgroup === channelGroupEnum.Twitter &&
            post?.channeltype !== channelTypeEnum.DirectMessages) ||
          (post?.channelgroup === channelGroupEnum.Instagram &&
            post?.channeltype !== channelTypeEnum.InstagramMessages) ||
          post?.channelgroup === channelGroupEnum.Youtube ||
          (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
            post?.channeltype !== channelTypeEnum.LinkedInComments))
      ">
      <span (click)="updateReachAndImpression()" class="post__stat--icon text__label" matTooltipPosition="above"
        matTooltipClass="custom-tooltip"
        matTooltip="{{'Reach-and-Impression-Formula-Info' | translate}}">
        <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
      </span>
      <span class="post__stat--value text__label ml-3 no-underline"></span>
    </div>
    <div class="post__stat--item" *ngIf="post?.channeltype === channelTypeEnum.InstagramPagePosts && postData?.isBrandPost">
      <span (mouseenter)="showMetricColor = true" (mouseleave)="showMetricColor = false" *ngIf="postData?.isPromoted == 0" class="post__stat--icon text__label mt-3" matTooltipPosition="above" matTooltipClass="custom-tooltip"
        matTooltip="{{'Instagram-Views-Metric-Info' | translate}}">
        <img src="assets/images/account/info-button-grey.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
      </span>
      <span *ngIf="postData?.isPromoted == 1" class="post__stat--icon text__label mt-3" matTooltipPosition="above" matTooltipClass="custom-tooltip"
        matTooltip="{{'Boosted-Posts-Source' | translate}}"> 
        <img src="assets/images/account/info-button-grey.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
      </span>
      <span (mouseenter)="showMetricColor = true" (mouseleave)="showMetricColor = false" *ngIf="(postData?.isPromoted == 2 || postData?.isPromoted == 3)" class="post__stat--icon text__label mt-3" matTooltipPosition="above" matTooltipClass="custom-tooltip"
        matTooltip="{{'Source-Meta-AD-Manager' | translate}}">
        <img src="assets/images/account/info-button-yellow.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
      </span>
      <span (mouseenter)="showMetricColor = true" (mouseleave)="showMetricColor = false"
        *ngIf="postData?.isPromoted == 5" class="post__stat--icon text__label mt-3"
        matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'No-AD-ID'| translate}}">
        <img src="assets/images/account/info-button-yellow.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
      </span>
    </div>
  </div>
  <!-- engagement ends here -->
  <!-- in 2.0 we showing parent post if post is deleted from social media -->
  <!-- [ngClass]="{ element__disable: ticketHistoryData?.isDeletedMentionDisable }" -->
  <div  *ngIf="
      pageType === PostsType.TicketHistory && !hideActionableButton &&
      ticketHistoryData?.communicationLogProperty.showLikeShareBox
    ">
    <mat-menu #handleSelect="matMenu" xPosition="after" yPosition="above">
      <div (click)="$event.stopPropagation()">
        <!-- <ng-template matMenuContent let-type="type">
          <div class="px-10 pb-10 bb__light-grey">
            <span class="text__label">{{ type }}</span>
          </div>
          <ng-container *ngIf="handleNamesObs$ | async as handles">
            <button mat-menu-item *ngFor="let item of handles"
              (click)="setSocialHandle(item); $event.stopPropagation()">
              <div class="d-flex-items-center likeUnlikeBlock">
                <span class="likeUnlikeBlock--check" [ngClass]="{ active: item.isactive }">
                  <mat-icon role="img" class="mat-icon notranslate material-icons" aria-hidden="true"
                    data-mat-icon-type="font">check_circle</mat-icon>
                </span>
                <img class="mr-4 img w-20" [src]="item.profilepic" alt="Brand Image"
                  onerror="this.src='assets/images/agentimages/sample-image.svg'" />
                <span>{{ item.handleName }}</span>
              </div>
            </button>
          </ng-container>
          <div class="d-flex-items-center p-10 bt__light-grey">
            <a class="ml-auto colored__locobuzz" (click)="submitActionHandle()">Submit</a>
          </div>
        </ng-template> -->

        <ng-template matMenuContent let-type="type">
          <div class="p-10 bb__light-grey">
            <span class="text__label">{{ type }}</span>
          </div>
          <div *ngIf="likeRetweetHandleList.length>0" class="p-10 pb-0">
            <span class="text__label">{{type=='Like/Unlike by handle'? ('Liked' | translate) : ('Retweeted' | translate)}}
              {{'Handles' | translate}}</span>
          </div>
          <button mat-menu-item *ngFor="let item of this.likeRetweetHandleList" (click)="setSocialHandle(item,1,type)">
            <div class="d-flex-items-center likeUnlikeBlock">
              <span class="likeUnlikeBlock--check" [ngClass]="{active: item.isactive}">
                <mat-icon role="img" class="mat-icon notranslate material-icons" aria-hidden="true"
                  data-mat-icon-type="font">check_circle</mat-icon>
              </span>
              <img class="mr-4 img w-20" onError="this.src='assets/images/agentimages/sample-image.svg'"
                [src]="item.profilepic" alt="Brand Image" />
              <span>{{ item.handleName }}</span>
            </div>
          </button>
          <div *ngIf="unLikeUndoRetweetHandleList.length>0" class="p-10 pt-5"
            [ngClass]="{'pb-0': likeRetweetHandleList.length>0}">
            <span class="text__label">{{type=='Like/Unlike by handle'? ('Like-By' | translate) : ('Retweet-By' | translate)}}</span>
          </div>
          <button mat-menu-item *ngFor="let item of this.unLikeUndoRetweetHandleList"
            (click)="setSocialHandle(item,2,type)">
            <div class="d-flex-items-center likeUnlikeBlock">
              <span class="likeUnlikeBlock--check" [ngClass]="{active: item.isactive}">
                <mat-icon role="img" class="mat-icon notranslate material-icons" aria-hidden="true"
                  data-mat-icon-type="font">check_circle</mat-icon>
              </span>
              <img class="mr-4 img w-20" onError="this.src='assets/images/agentimages/sample-image.svg'"
                [src]="item.profilepic" alt="Brand Image" />
              <span>{{ item.handleName }}</span>
            </div>
          </button>
          <div class="d-flex-items-center p-10 bt__light-grey" *ngIf="submitButtonName">
            <a (click)="submitActionHandle()" class="ml-auto colored__locobuzz right-auto">{{submitButtonName}} {{'Handle' | translate}}</a>
          </div>
        </ng-template>
      </div>
    </mat-menu>
    <ng-template
      [ngIf]="postData?.channelGroup == channelGroupEnum.Facebook && postData?.channelType!=channelTypeEnum.FBMessages && postData?.author.name!='Anonymous'">
      <div class="post__stat">
        <div *ngIf="ticketHistoryData?.communicationLogProperty.likeEnabled" class="post__stat--item">
          <span class="post__stat--icon" (click)="
            mentionActionFlag=ticketHistoryData?.communicationLogProperty.likeStatus;likeDisLikePopup(selectedHandle)
            ">
            <mat-icon fontSet="material-icons-outlined">{{
              ticketHistoryData?.communicationLogProperty.likeStatus
              ? 'favorite'
              : 'favorite_border'
              }}
            </mat-icon>
          </span>
          <span class="post__stat--value">{{
            likeCount | numberFormatCommaSeperate
            }}</span>
        </div>
        <!-- <div class="post__stat--item">
          <span class="post__stat--icon">
            <mat-icon fontSet="material-icons-outlined">repeat</mat-icon>
          </span>
          <span class="post__stat--value">{{ticketHistoryData?.communicationLogProperty.shareCount}}</span>
        </div> -->
      </div>
    </ng-template>
    <div *ngIf="
        postData?.channelGroup == channelGroupEnum.Twitter;
        else otherChannels
      " class="post__stat">
      <div
        *ngIf="ticketHistoryData?.communicationLogProperty.likeEnabled && postData?.channelType!=channelTypeEnum.DirectMessages"
        class="post__stat--item">
        <span [matMenuTriggerFor]="handleSelect" #clickLikehandleMenuTrigger="matMenuTrigger"
          [matMenuTriggerData]="{ type: ('Like-Unlike' | translate) }" class="post__stat--icon" (click)="
            setMentionFlag(
              getMentionAction.LikeUnlike,
              ticketHistoryData?.communicationLogProperty.likeStatus
            );
            $event.stopPropagation()
          ">
          <mat-icon fontSet="material-icons-outlined" [ngClass]="{
              colored__locobuzz:
                ticketHistoryData?.communicationLogProperty.likeStatus == true
            }">{{
            ticketHistoryData?.communicationLogProperty.likeStatus
            ? 'favorite'
            : 'favorite_border'
            }}</mat-icon>
        </span>
        <span class="post__stat--value">{{
          likeCount | numberFormatCommaSeperate
          }}</span>
      </div>
      <div *ngIf="ticketHistoryData?.communicationLogProperty.reTweetEnabled" class="post__stat--item">
        <span [matMenuTriggerFor]="handleSelect" #clickhandleMenuTrigger="matMenuTrigger"
          [matMenuTriggerData]="{ type: ('Retweet-by-handle' | translate ) }" (click)="
            setMentionFlag(getMentionAction.RetweetUntweet, true, true);
            $event.stopPropagation()
          " class="post__stat--icon">
          <mat-icon fontSet="material-icons-outlined" [ngClass]="{
              colored__locobuzz:
                ticketHistoryData?.communicationLogProperty.retweetStatus
            }">repeat</mat-icon>
        </span>
        <span class="post__stat--value">{{
          retweetCount | numberFormatCommaSeperate
          }}</span>
      </div>

      <!-- <div class="post__stat--item ml-auto"
        *ngIf="post?.mentionCategoryTop && post?.mentionCategoryTop != '' && !ticketHistoryData?.showMarkactionable"
        (click)="openCategoryDialog('mentionCategory'); $event.stopPropagation();">
        <span class="post__stat--icon">
          <mat-icon class="post__foot--icon mr-5" [ngClass]="{ 'colored__red': post?.mentionCatColor === getSentiment.Negative || post?.mentionCatColor === getSentiment.Mixed,'colored__green': post?.mentionCatColor === getSentiment.Positive,
                            'colored__yellow--dark': post?.mentionCatColor === getSentiment.Neutral }"
            fontSet="material-icons-outlined" aria-hidden="false" aria-label="speaker notes">speaker_notes
          </mat-icon>
        </span>

        <span class="post__stat--value text-underline">{{ post?.mentionCategoryTop }}</span>
      </div> -->
    </div>
    <ng-template #otherChannels>
      <div class="post__stat--item" *ngIf="
            postData?.channelGroup == channelGroupEnum.Youtube 
        ">
        <div class="mr-10"
          *ngIf="ticketHistoryData?.communicationLogProperty.likeEnabled && (postData?.channelType == channelTypeEnum.YouTubePosts)">
          <span class="post__stat--icon" (click)="
               mentionActionFlag=ticketHistoryData?.communicationLogProperty.likeStatus;likeDisLikePopup(selectedHandle)
            ">
            <mat-icon fontSet="material-icons-outlined">{{
              ticketHistoryData?.communicationLogProperty.likeStatus
              ? 'favorite'
              : 'favorite_border'
              }}</mat-icon>
          </span>
          <span class="post__stat--value">{{
            likeCount | numberFormatCommaSeperate
            }}</span>
        </div>
        <!-- <div>
          <span class="post__stat--icon">
            <mat-icon fontSet="material-icons-outlined">repeat</mat-icon>
          </span>
          <span class="post__stat--value">{{ticketHistoryData?.communicationLogProperty.shareCount}}</span>
        </div> -->
      </div>
      <div class="post__stat--item parent-post colored__blue cursor-pointer" *ngIf="ticketHistoryData?.viewparentpost"
        (click)="openParentPost(); $event.stopPropagation()">
        <mat-icon fontSet="material-icons-outlined">arrow_upward</mat-icon>
        <span class="post__stat--value no-underline text-capitalize">{{ 'view-parent-post' | translate }}</span>
      </div>
    </ng-template>
  </div>
  <div class=""
    *ngIf="ticketHistoryData.isSSREPreview && showActionPerform && ticketHistoryData.isWorkflowEnabled">
    <div
      class="d-flex-items-center g-10 workflow-note-container py-5 pl-5 border-radius-2">
      <img src="assets/images/common/loader_color.svg">
      <div>
        <p class="colored__purple--dark">{{ 'workflow-handling-message' | translate }}</p>
      </div>
    </div>
    </div>
  <!-- SSRE Note -->
  <div class="post__note mt-10" *ngIf="ticketHistoryData?.isSSREPreview && showActionPerform && !ticketHistoryData.isWorkflowEnabled">
    <div class="post__note--head" [innerHTML]="ticketHistoryData?.SSREPreview.actionPerformed"></div>
    <div class="ssreBtn d-flex-items-center">
      <div class="post__note--body">
        <span class="post__note--body--info" [innerHTML]="ticketHistoryData?.SSREPreview.messageContent"></span>
        <!-- ssre-buttons live -->
        <div class="post__note--body--action ml-auto right-auto" *ngIf="ticketHistoryData?.isLiveSSRE">
          <!-- <a class="btn__negative mr-9" matTooltip="Do Nothing" matTooltipClass="custom-tooltip" matTooltipPosition="above">
            <mat-icon>hide_source</mat-icon>
          </a> -->
          <a class="btn__negative mr-9" matTooltip="{{ 'wrong' | translate }}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
            (click)="ssreLiveWrongPopupLogic(); $event.stopPropagation()">
            <mat-icon>close</mat-icon>
          </a>
          <a class="btn__positive" matTooltip="{{ 'verify' | translate }}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
            (click)="ssreLiveRightVerified(); $event.stopPropagation()">
            <mat-icon>check</mat-icon>
          </a>
        </div>
        <!-- ssre-buttons simulation -->
        <div class="post__foot--item post__foot--itemaction" *ngIf="ticketHistoryData?.isSimulationSSRE">
          <a class="btn__negative mr-9" matTooltip="{{ 'wrong' | translate }}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
            (click)="ssreSimulationWrongPopupLogic(); $event.stopPropagation()">
            <mat-icon>close</mat-icon>
          </a>
          <a class="btn__positive" matTooltip="{{ 'right' | translate }}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
            (click)="ssreSimulationRightPopupLogic(); $event.stopPropagation()">
            <mat-icon>check</mat-icon>
          </a>
        </div>
      </div>
    </div>
  </div>
  <!-- Approve and Reject Note -->
  <div class="post__note" *ngIf="ticketHistoryData?.isMakerCheckerPreview && showActionPerform">
    <div class="post__note--head">
      <p class="post__note--title" [innerHTML]="ticketHistoryData?.MakerCheckerPreview.actionPerformed"></p>
    </div>
    <div class="post__note--body">
      <span class="post__note--body--info" [innerHTML]="ticketHistoryData?.MakerCheckerPreview.messageContent" style="overflow-wrap: anywhere; padding-right: 1.2rem;"></span>

      <!-- button for ticket action -->
      <div class="post__note--body--action ml-auto pt-0 pb-0 pr-0 g-8 right-auto"
        *ngIf="ticketHistoryData?.isApproveRejectMakerChecker">
        <a class="btn__neutral" matTooltip="{{'Modify' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
          (click)="replyModified(); $event.stopPropagation()">
          <mat-icon>edit</mat-icon>
        </a>
        <a class="btn__negative" matTooltip="{{ 'reject' | translate }}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
          (click)="clearnote(); $event.stopPropagation()" [matMenuTriggerFor]="rejectnote">
          <mat-icon>close</mat-icon>
        </a>
        <a class="btn__positive" matTooltip="{{ 'approve' | translate }}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
          (click)="replyApproved(); $event.stopPropagation()">
          <mat-icon>check</mat-icon>
        </a>
        <mat-menu #rejectnote="matMenu" class="note-elem__dropdown">
          <div class="note-elem pr-20 pl-20 pt-10">
            <div class="note-elem__input" (click)="$event.stopPropagation()">
              <mat-form-field appearance="outline" class="outline--none material__select material__select--adaptive">
                <mat-label class="text-capitalize dark__text__random">{{ 'add-note' | translate }}<span class="colored__red">&nbsp;*</span>
                </mat-label>
                <textarea matInput #txtArea [(ngModel)]="makercheckerrejectnote" appearance="outline" class="resize" (ngModelChange)="noteTextChange(txtArea, 'makercheckerrejectnote')">
                </textarea>
              </mat-form-field>
            </div>
            <div class="note-elem__actions">
              <button mat-stroked-button (click)="CannedResponse(3); $event.stopPropagation()">
                {{ 'canned-response' | translate }}
              </button>
              <button mat-button color="accent" class="ml-auto right-auto">{{ 'cancel' | translate }}</button>
              <button mat-button color="accent" (click)="replyRejected();">
                {{ 'Save' | translate }}
              </button>
            </div>
          </div>
        </mat-menu>
      </div>
      <!-- ends ticket action -->
    </div>
  </div>

  <div class="post__note post__note--image" *ngIf="false">
    <img src="assets/images/media/media-1.jpg" srcset="assets/images/media/media-1.jpg" />
  </div>
</div>
</ng-container>
<!-- post old UI before july 2025, post content and post attachments layout -->
<!-- post new UI july 2025, post content and post attachments side by side layout -->
<ng-container *ngIf="true">
  <div class="post__body--data" [dir]="getTextDirection()" [ngClass] = "{'sideby-side': !defaultLayout && postData?.description && postData?.channelGroup != channelGroupEnum.Email}">
    <div class="user-chat-box mb-5"
      *ngIf="postData && postData?.channelGroup == channelGroupEnum.Telegram && postData?.emailContent && (postData?.emailContent?.mediaurl || postData?.emailContent?.replytomessagejson?.text)">
      <div class="bot-prev-msg-box" *ngIf="postData?.emailContent?.replytomessagejson?.text">
        <div class="bot-msg-box-sidebar" [ngClass]="{'isBrandPost_bg': postData?.isBrandPost}"></div>
        <p class="bot-name-tag" [ngClass]="{'isBrandPost_color' : postData?.isBrandPost}"
          *ngIf="postData?.emailContent?.replytomessagejson?.from?.first_name">
          {{postData?.emailContent?.replytomessagejson?.from?.first_name}}
          <span class="text__light ml-5"
            *ngIf="postData?.isBrandPost && postData?.emailContent?.replytomessagejson?.from?.username">(&#64;{{postData?.emailContent?.replytomessagejson?.from?.username}})</span>
        </p>
        <p class="bot-prev-msg-text mt-4"
          [innerHTML]="getTruncatedText(postData?.emailContent?.replytomessagejson?.text,500) | linkify: 'linkifyOptions' | safehtml">
        </p>
      </div>
      <div class="bot-prev-msg-box p-1 d-flex-items-center"
        *ngIf="!postData?.emailContent?.replytomessagejson?.text && postData?.emailContent?.mediaurl">
        <div class="bot-msg-box-sidebar mr-5" [ngClass]="{'isBrandPost_bg': postData?.isBrandPost}"></div>
        <div class="reply-img-preview"
          [ngClass]="{'reply-video-preview ': postData?.emailContent?.mediatype === MediaEnum.VIDEO}">
          <app-quote-media-containt [chat]="postData"></app-quote-media-containt>
          <div>
            <p class="bot-name-tag_img ml-8" [ngClass]="{'isBrandPost_color' : postData?.isBrandPost}">
              {{postData?.emailContent?.replytomessagejson?.from?.first_name}}
              <span class="text__light ml-5"
                *ngIf="postData?.emailContent?.replytomessagejson?.from?.username">(&#64;{{postData?.emailContent?.replytomessagejson?.from?.username}})</span>
            </p>
            <p class="bot-name-tag_img_title ml-8" *ngIf="postData?.emailContent?.mediatype === MediaEnum.IMAGE">Image</p>
            <p class="bot-name-tag_img_title ml-8" *ngIf="postData?.emailContent?.mediatype === MediaEnum.ANIMATEDGIF">GIF
            </p>
            <p class="bot-name-tag_img_title ml-8" *ngIf="postData?.emailContent?.mediatype === MediaEnum.VIDEO">Video</p>
            <p class="bot-name-tag_img_title ml-8"
              *ngIf="(postData?.emailContent?.mediatype === MediaEnum.PDF || postData?.emailContent?.mediatype === MediaEnum.EXCEL || postData?.emailContent?.mediatype === MediaEnum.DOC) && postData?.emailContent?.replytomessagejson?.document?.file_name"
              [matTooltip]="postData?.emailContent?.replytomessagejson?.document?.file_name" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">
              {{postData?.emailContent?.replytomessagejson?.document?.file_name}}</p>
          </div>

        </div>
        <p class="bot-prev-msg-text" *ngIf="postData?.emailContent?.replytomessagejson?.text"
          [innerHTML]="postData?.emailContent?.replytomessagejson?.text | linkify: 'linkifyOptions' | safehtml"></p>
      </div>
    </div>
    <ng-container>
      <div class="flex-full">
      <div class="post__body--content anywhere" [ngClass]="{'medium-font-size': !defaultLayout}">
        <div class="app-store mb-10 border-radius-4"
          *ngIf="
                    (postData?.channelGroup == channelGroupEnum.Sitejabber && postData?.ratingList && postData?.ratingList.length && !postData?.isBrandPost)">
          <span class="bg__grey--light d-flex-items-center" style="flex: 1;">
            <span class="d-flex-items-center rating_wrap">
              <span [ngClass]="i == 0 ? 'pl-5' : ''" *ngFor="let ratingData of postData?.ratingList; let i = index">
                <span class="d-flex g-5 mr-8" *ngIf="ratingData?.rating || ratingData?.rating == 0">
                  <span class="text__label title-case-text">{{ratingData.type == 'overall' ? 'Ratings' : ratingData.type}}
                    :</span>
                  <app-star-rating *ngIf="ratingData.type == 'overall'" [rating]="ratingData?.rating || 0" [starCount]="5"
                    class="mb-0 pl-5" [editable]="false" [id]="post?.ticketID + i + '_rating'"></app-star-rating>
                  <span class="d-flex-items-center">
                    <mat-icon *ngIf="ratingData.type != 'overall'" class="rating__item active">star</mat-icon>
                    <span class="font-weight-600 ml-1 rating__item active" style="font-size: 1.4rem !important;"
                      *ngIf=" ratingData.type != 'overall'">{{ratingData?.rating}}</span>
                  </span>
                </span>
              </span>
            </span>
            <span class="bg__grey--light ml-auto mr-8" *ngIf="postData?.objectId">
              <b>Order ID:</b> {{postData?.objectId}}
            </span>
          </span>

        </div>

        <div class="border-radius-4" *ngIf="postData?.channelGroup == channelGroupEnum.Survey">
          <div class="make-action__action content" [ngClass]="{'mt-7 mb-2': i != 0 && attribute?.fieldType != fieldTypeEnum.rating}" *ngFor="let attribute of multiLineAttribute; let i = index">
          <ng-container *ngIf="attribute?.fieldType == fieldTypeEnum.rating">
            <span class="font-weight-700 mr-10" [ngClass] = "{'mb-15': attribute?.rating_type == 'averageRating'}">{{attribute.labelname}} :</span>
            <div class="rating mb-2">
                <ng-container [ngSwitch]="attribute?.rating_type">
                  <div class="rating-builder__wrapper" *ngSwitchCase="'averageRating'">
                    <p>
                      <span class="post__body--description font-weight-700">
                        <span class="font-size-22">{{attribute?.value}}</span> / {{attribute?.overallRatingScale}}
                      </span>
                    </p>
                  </div>
                  <div class="rating-builder__wrapper" *ngSwitchCase="'emoji'">
                    <div class="rating-builder__block emoji-builder" *ngFor="let rating of ratings">
                      <ng-container *ngIf="rating.value == 1">
                        <img src="assets/icons/Tired.png" alt=""
                          [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected,'filter-grey w-25':  attribute.value != rating.value}">
                      </ng-container>
                      <ng-container *ngIf="rating.value == 2">
                        <img src="assets/icons/Frowning-Face.png" alt=""
                          [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected,'filter-grey w-25':  attribute.value != rating.value}">
                      </ng-container>
                      <ng-container *ngIf="rating.value == 3">
                        <img src="assets/icons/Neutral-Face.png" alt=""
                          [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected,'filter-grey w-25':  attribute.value != rating.value}">
                      </ng-container>
                      <ng-container *ngIf="rating.value == 4">
                        <img src="assets/icons/Smiling-Face-With-Smiling-Eyes.png" alt=""
                          [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected,'filter-grey w-25':  attribute.value != rating.value}">
                      </ng-container>
                      <ng-container *ngIf="rating.value == 5">
                        <img src="assets/icons/Smiling-Face-With-Heart-Eyes.png" alt=""
                          [ngClass]="{'filter-grey':  attribute.value != rating.value && isAnyOneSelected, 'emoji-selected w-30':  attribute.value == rating.value,'w-25': rating.isSelected,'filter-grey w-25':  attribute.value != rating.value}">
                      </ng-container>
                    </div>
                  </div>
                  <div class="rating-builder__wrapper" *ngSwitchCase="'star'">
                    <div class="rating-builder__block emoji-builder g-10 cursor-pointer"
                      *ngFor="let rating of starRatings;let i = index">
                      <img src="assets/icons/Star-unselect.png" class="w-28" *ngIf="!rating.isSelected">
                      <img src="assets/icons/Star.svg" class="w-30" *ngIf="rating.isSelected">
                    </div>
                  </div>
                  <div class="rating-builder__wrapper" *ngSwitchCase="'nps'">
                    <ul class="rating-builder__nps cursor-pointer">
                      <li class="list" [ngClass]="{
                                                                  'bg__red--dark' : 6 > i,
                                                                  'bg__yellow--dark' : i == 6 || i == 7,
                                                                  'bg__green' : i > 7,
                                                                  'w-30': attribute.value == rating.value,
                                                                  'select-nps': attribute.value == rating.value, 'unselect-nps': attribute.value != rating.value
                                                              }" *ngFor="let rating of npsRating; let i = index">{{rating.value}}
                      </li>
                    </ul>
                  </div>
                </ng-container>
            </div>
          </ng-container>
          <ng-container *ngIf="attribute?.fieldType != fieldTypeEnum.rating">
            <p>
              <span class="post__body--description">
                <span class="font-weight-700">{{attribute.labelname}} :</span> {{attribute.value}}
              </span>
            </p>
          </ng-container>
          </div>
          <ul class="make-action__action flex-container__item-wrap mt-5" *ngIf = "singleLineAttribute && singleLineAttribute.length" style="display: flex;">
            <li class="list cursor-pointer pr-10" *ngFor="let attribute of singleLineAttribute; let i = index">
              <span class="font-weight-700">{{attribute.labelname}}</span> : {{attribute.value}}
            </li>
          </ul>
          <div class="d-flex-items-center mt-10" style="flex-wrap: wrap" *ngIf="surveyImages && surveyImages.length">
            <div class="post__body--media position-relative" (click)="$event.stopPropagation()">
              <div class="g-10 post__body--image w-100-p"
                (click)="surveyImagePreview(surveyImages); $event.stopPropagation()">
                <ng-container *ngFor="let img of surveyImages">
                  <img class="cursor-pointer br-white-r two__images--preview w-100-p" [src]="img" />
                </ng-container>
              </div>
            </div>
          </div>
        </div>
        <div class="app-store mb-6" *ngIf="
              (postData?.channelGroup == channelGroupEnum.GooglePlayStore && !postData?.isBrandPost) ||
              (postData?.channelGroup == channelGroupEnum.AppStoreReviews && !postData?.isBrandPost) ||
              postData?.channelGroup == channelGroupEnum.ECommerceWebsites ||
              (postData?.channelGroup == channelGroupEnum.GoogleMyReview && postData?.channelType !== channelTypeEnum.GMBChat) ||
                postData?.channelGroup == channelGroupEnum.GlassDoor ||
                postData?.channelGroup == channelGroupEnum.Yotpo ||
                postData?.channelGroup == channelGroupEnum.Zomato || postData?.channelGroup == channelGroupEnum.TripAdvisor || (postData?.channelGroup == channelGroupEnum.Booking && clickhouseEnabled)
            ">
          <span class="text__label colored__locobuzz"
            *ngIf="(clickhouseEnabled && (!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview)) || (!clickhouseEnabled && ((!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview) ))">User
            Ratings :</span>
          <app-star-rating [rating]="postData?.rating || 0"
            [starCount]="(postData?.channelGroup == channelGroupEnum.Booking && clickhouseEnabled)?10:5"
            *ngIf="(clickhouseEnabled && ((!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview))) || (!clickhouseEnabled && ((!postData?.isBrandPost && postData?.channelType==channelTypeEnum.GoogleMyReview) || (postData?.channelGroup!=channelGroupEnum.GoogleMyReview) ))"
            class="mb-0 pl-5" [editable]="false" [id]="post?.ticketID + '_rating'"></app-star-rating>
          <span class="verified-buyer"
            *ngIf="postData?.channelGroup == channelGroupEnum.Yotpo && postData?.authorType == '1'">
            <mat-icon class="s-20">done</mat-icon><span class="text__light">Verified Buyer</span>
          </span>
          <span class="font-weight-600 mt-3 ml-3"
            *ngIf="!clickhouseEnabled && postData?.appVersionName">{{postData?.rating?.toFixed(1)}}</span>
          <span class="font-weight-600 mt-3 ml-3"
            *ngIf="clickhouseEnabled && postData?.channelGroup == channelGroupEnum.GooglePlayStore">{{postData?.rating?.toFixed(1)}}</span>
          <span class="text__label colored__locobuzz ml-15"
            *ngIf="postData?.channelGroup == channelGroupEnum.GooglePlayStore">App Version : </span> <span
            class="ml-3 font-weight-600 colored__main--text">{{postData?.appVersionName ? postData?.appVersionName : ''}}</span>
          <ng-container *ngIf="!postData?.appVersionName && postData?.channelGroup == channelGroupEnum.GooglePlayStore">
            <span class="font-size-20">-</span>
            <span>
              <mat-icon class="font-size-21 ml-2" matTooltip="{{'Version-Information-Not-Available' | translate}}"
                matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">info</mat-icon>
            </span>
          </ng-container>
          <span class="text__label colored__locobuzz ml-15" *ngIf="postData?.source">Device Name : </span>
          <span class="ml-3 font-weight-600 colored__main--text" *ngIf="postData?.source"
            matTooltip="{{getToolTipData(postData?.source, 40)}}">{{postData?.source.substring(0, 40)}}<span
              *ngIf="postData?.source.length > 40" class="colored__main--text">...</span>
          </span>
          <span class="text__label colored__locobuzz ml-15" *ngIf="postData?.osVersion">OS Version : </span> <span
            class="ml-3 font-weight-600 colored__main--text" *ngIf="postData?.osVersion">{{postData?.osVersion}}</span>

        </div>
        <div class="post__body--content-text"
          *ngIf="postData?.channelGroup == channelGroupEnum.WhatsApp && ticketHistoryData?.title" [innerHTML]="
              ticketHistoryData?.title | linkify: 'linkifyOptions'
            "></div>
        <div (click)="preventDetailedPopupFromOpening($event)"
          *ngIf="postData?.title && (postData?.channelGroup == channelGroupEnum.Reddit || postData?.channelGroup == channelGroupEnum.Blogs || postData?.channelGroup == channelGroupEnum.DiscussionForums || postData?.channelGroup == channelGroupEnum?.Sitejabber ||
              postData?.channelGroup == channelGroupEnum.News || postData?.channelGroup == channelGroupEnum.ComplaintWebsites || postData?.channelGroup == channelGroupEnum.TeamBHP || postData?.channelGroup == channelGroupEnum.GlassDoor || postData?.channelGroup == channelGroupEnum.TripAdvisor || postData?.channelGroup == channelGroupEnum.AppStoreReviews || (postData?.channelGroup == channelGroupEnum.Booking && clickhouseEnabled))"
          class="post__body--description text-bold">
          <span
            *ngIf="postData?.channelGroup == channelGroupEnum?.Sitejabber && postData?.title != postData?.description">
            <span *ngIf="postData?.title.includes('...'); else elseTitle">{{postData?.title.substr(0,
              postData?.title.indexOf('...'))}}</span>
            <ng-template #elseTitle>{{postData?.title}}</ng-template>
          </span>
          <ng-container *ngIf="postData?.channelGroup != channelGroupEnum?.Sitejabber">{{postData?.title}}</ng-container>

        </div>
        <!-- <div class="post__quora--parent" (click)="quoraParentPost()">
                  <img src="assets/images/common/Parent_Post_Icon.svg" alt="" class="mr-7"> <span>Parent Post</span>
                </div> -->
        <!-- quora -->
        <!-- <div class="post__body--description">
                  <p>
                    <span class="post__quora--question">Question:</span> <span class="text__label ml-7">Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic, doloribus illo! Necessitatibus omnis velit est odio saepe nisi, alias quaerat voluptas debitis.</span>
                  </p>
                  <p class="mt-10 mb-7">
                    <span class="post__quora--answer">Answer:</span> <span class="ml-7">Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed incidunt nam quidem. Vel dolores et omnis laboriosam nulla voluptas error, illum quisquam eos libero eius sed dignissimos eligendi delectus possimus.</span>
                  </p>
                  </div> -->
        <!-- ends quora -->
        <!-- && postData?.channelGroup != channelGroupEnum.Voice -->
        <!-- <ng-container *ngIf="postData?.channelGroup != channelGroupEnum.Voice; else VoipNote"> -->
        <!-- <div (click)="preventDetailedPopupFromOpening($event)"
              *ngIf="ticketHistoryData?.description && !ticketHistoryData?.descriptionWithTitle &&  postData?.channelGroup != channelGroupEnum.Voice"
              class="post__body--description" [innerHTML]="ticketHistoryData?.description | linkify: 'linkifyOptions'">
            </div> -->
        <p *ngIf="postData?.channelGroup == channelGroupEnum.GlassDoor">
          <span class="text__label colored__green--dark" *ngIf="postData?.caption">Pros: </span>
          <span (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.caption"
            class="post__body--description" [innerHTML]="postData?.caption">
          </span>
          <!-- <span *ngIf="postData?.caption && readMore">
                <span *ngIf="postData?.caption.substr(0,showMoreLessCount)?.length==400"
                  (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                  Read more</span>
                <span *ngIf="postData?.caption.substr(0,showMoreLessCount)?.length>400"
                  (click)="showMoreLessCount=400;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
                  less</span>
              </span> -->
        </p>
        <span *ngIf="ticketHistoryData?.bookingGoodBadReviewFlag" class="post__body--description">
          <ul>
            <li *ngIf="ticketHistoryData?.goodReview" class="mb-5 d-flex">
              <mat-icon class="colored__green--dark" fontSet="material-icons-outlined">mood</mat-icon>
              <span class="ml-7">{{ticketHistoryData?.goodReview}}</span>
            </li>
            <li *ngIf="ticketHistoryData?.badReview" class="d-flex">
              <mat-icon class="colored__red--dark" fontSet="material-icons-outlined">sentiment_dissatisfied</mat-icon>
              <span class="ml-7">{{ticketHistoryData?.badReview}}</span>
            </li>
          </ul>
        </span>
        <p *ngIf="postData?.channelGroup == channelGroupEnum.GlassDoor">
          <span class="text__label colored__red--dark" *ngIf="postData?.description">Cons: </span>
          <span (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.description"
            class="post__body--description"
              [innerHTML]="(stripHtml(postData?.description)?.length > 700 ? postData?.description?.substr(0,
              getTruncationIndexForVisibleText(postData?.description, this.showMoreLessCount)) : postData?.description) |safehtml">

          </span>
          <span *ngIf="postData?.description && readMore && stripHtml(postData?.description)?.length > 700">
            <span *ngIf="postData?.description.substr(0,showMoreLessCount)?.length==600"
              (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()"
              class="cursor-pointer colored__locobuzz">...
              Read more</span>
            <span *ngIf="postData?.description.substr(0,showMoreLessCount)?.length>600"
              (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
              less</span>
          </span>
        </p>
        <p *ngIf="postData?.channelGroup == channelGroupEnum.GlassDoor">
          <span class="text__label colored__locobuzz" *ngIf="postData?.annotation">Advice to Management: </span>
          <span (click)="preventDetailedPopupFromOpening($event)" *ngIf="postData?.annotation"
            class="post__body--description" [innerHTML]="postData?.annotation">
          </span>
          <!-- <span *ngIf="postData?.annotation && readMore">
                <span *ngIf="postData?.annotation.substr(0,showMoreLessCount)?.length==400"
                  (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                  Read more</span>
                <span *ngIf="postData?.annotation.substr(0,showMoreLessCount)?.length>400"
                  (click)="showMoreLessCount=400;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
                  less</span>
              </span> -->
        </p>
        <p *ngIf="postData?.channelGroup != channelGroupEnum.Survey && postData?.channelGroup != channelGroupEnum.Pantip"
          [dir]="getTextDirection()">
          <span (click)="preventDetailedPopupFromOpening($event)"
            *ngIf="ticketHistoryData?.description && !ticketHistoryData?.descriptionWithTitle && postData?.channelGroup != channelGroupEnum.Voice && postData?.channelGroup != channelGroupEnum.GlassDoor"
            class="post__body--description"
            [innerHTML]="formatTextForDirection(ticketHistoryData?.description, getTextDirection()) | safehtml">
          </span>
          <span
            *ngIf="ticketHistoryData?.description && !ticketHistoryData?.descriptionWithTitle && postData?.channelGroup != channelGroupEnum.Voice && postData?.channelGroup != channelGroupEnum.GlassDoor && readMore && ticketHistoryData?.description?.length && stripHtml(ticketHistoryData?.description)?.length > 700">
            <span *ngIf="stripHtml(ticketHistoryData?.description)?.substr(0,showMoreLessCount)?.length==600"
              (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()"
              class="cursor-pointer colored__locobuzz" [dir]="getTextDirection()">... Read more</span>
            <span *ngIf="stripHtml(ticketHistoryData?.description)?.substr(0,showMoreLessCount)?.length>600"
              (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"
              [dir]="getTextDirection()"> Read less</span>
          </span>
        </p>

        <div class="post__body--desctwitter bg__grey"
          *ngIf="postData && postData?.channelGroup == channelGroupEnum.Twitter && postData?.instagramPostType == 3 && postData?.emailContent">
          <div class="d-flex-items-center">
            <img class="profile-twitter" *ngIf="postData?.emailContent?.profileimageurl"
              src="{{postData?.emailContent?.profileimageurl}}">
            <span class="ml-5 font-weight-600">{{postData?.emailContent?.username}}</span>
            <span class="text__light ml-5">(&#64;{{postData?.emailContent?.screenname}})</span>
          </div>
          <span class="post__body--description mt-10" (click)="$event.stopPropagation()"
            [innerHTML]="postData?.emailContent?.tweettext | linkify: 'linkifyOptions' | safehtml">
          </span>
        </div>


        <ng-container *ngIf="postData?.channelGroup == channelGroupEnum.Voice && ticketHistoryData?.showVoipDesc">
          <div (click)="preventDetailedPopupFromOpening($event)"
            *ngIf="ticketHistoryData?.description &&  postData?.channelGroup == channelGroupEnum.Voice && ticketHistoryData?.showVoipDesc"
            class="post__body--description" [ngClass]="{'mb-7' : postData?.channelGroup==channelGroupEnum.Voice}">
          <span [innerHTML]="ticketHistoryData?.description | safehtml"></span>
            <!-- <span class="post__body--description text-underline colored__locobuzz">{{voipDate}} </span> at
            <span class="post__body--description text-underline colored__locobuzz">{{voipTime}} </span>
            <span *ngIf="ivrData"> ({{ivrData}})</span> -->
          </div>
        </ng-container>
        <!-- </ng-container> -->
        <!-- <ng-template #VoipNote> -->
        <!-- *ngIf="post?.note" -->
        <!-- <div class="post__alert post__alert--warning"> -->
        <!-- <label class="post__alert--label" *ngIf="ticketHistoryData?.isrejectedNote; else LastNote">Rejected Note:
              </label>
              <ng-template #LastNote>
                <label class="post__alert--label">Note: </label>
              </ng-template> -->
        <!-- <span class="post__alert--info | linkify: 'linkifyOptions'">
                {{ ticketHistoryData?.description }}</span>
            </div>
          </ng-template> -->



        <!-- <div (click)="preventDetailedPopupFromOpening($event)" *ngIf="ticketHistoryData?.descriptionWithTitle">
            <p style="font-weight: bold;text-decoration: underline;margin-bottom: 5px;" *ngIf="ticketHistoryData?.title">{{
              ticketHistoryData?.title}}</p>
            <p *ngIf="ticketHistoryData?.description" [innerHTML]="
              ticketHistoryData?.description | linkify: 'linkifyOptions'
            "></p>
          </div> -->
        <div (click)="preventDetailedPopupFromOpening($event)" *ngIf="ticketHistoryData?.descriptionWithTitle">
          <p class="font-weight-700 text-underline mb-5" *ngIf="ticketHistoryData?.title">
            {{ticketHistoryData?.title}}
          </p>
          <span *ngIf="ticketHistoryData?.description"
                          [innerHTML]="(stripHtml(ticketHistoryData?.description)?.length > 700 ? ticketHistoryData?.description?.substr(0,
                          getTruncationIndexForVisibleText(ticketHistoryData?.description, this.showMoreLessCount)) : ticketHistoryData?.description)">
           
          </span>
          <span *ngIf="readMore && stripHtml(ticketHistoryData?.description)?.length > 700">
            <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length==600"
              (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()"
              class="cursor-pointer colored__locobuzz">...
              Read more</span>
            <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length>600"
              (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
              less</span>
          </span>
        </div>
        <ng-container *ngIf="false">
        <div *ngIf="ticketHistoryData?.youtubeSanitizeUrlObject">
          <youtube-player [videoId]="ticketHistoryData?.youtubeSanitizeUrlObject" (ready)="savePlayer($event)"
            [playerVars]="playerVars" [height]="160" [width]="300">

          </youtube-player>
          <!-- <iframe [src]="ticketHistoryData?.youtubeSanitizeUrlObject"  frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->
        </div>
        </ng-container>

        <!-- the same view can be shown in more than one case -->
        <ng-container *ngIf="selectedTicketView==1">
          <div class="post__note post__note--image post__email"
            *ngIf="ticketHistoryData?.htmlData && ticketHistoryData?.htmlData?.trim()?.length > 0 else textviewEmail">
            <iframe #iframeStyle sandbox="allow-same-origin" (load)="iframeViewLoaded(iframeStyle)"
              [srcdoc]="ticketHistoryData?.htmlData | safehtml" frameborder="0" height="100%" width="100%">
            </iframe>
          </div>
          <ng-template #textviewEmail>
            <div class="post__note post__note--image post__email"
              *ngIf="ticketHistoryData?.emailPlainText && ticketHistoryData?.emailPlainText.length > 0">
              {{ticketHistoryData?.emailPlainText?.length > 700 ? ticketHistoryData?.emailPlainText?.substr(0, EmailShowMoreLessCount) : ticketHistoryData?.emailPlainText}}

                <ng-container *ngIf="ticketHistoryData?.emailPlainText?.length > 700">
                  <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length == 600"
                    (click)="EmailShowMoreLessCount = ticketHistoryData?.emailPlainText?.length;$event.stopPropagation()"
                    class="cursor-pointer colored__locobuzz">...
                    Read more
                  </span>
                  <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length > 600"
                    (click)="EmailShowMoreLessCount = 600;$event.stopPropagation()"
                    class="cursor-pointer colored__locobuzz">...
                    Read less
                  </span>
                </ng-container>
            </div>
          </ng-template>
        </ng-container>
        <ng-container *ngIf="selectedTicketView==2">
          <div class="post__note post__note--image emailfriendly" *ngIf="ticketHistoryData?.emailPlainText">

            {{ticketHistoryData?.emailPlainText?.length > 700 ? ticketHistoryData?.emailPlainText?.substr(0, EmailShowMoreLessCount) : ticketHistoryData?.emailPlainText }}

              <ng-container *ngIf="ticketHistoryData?.emailPlainText?.length > 700">
                <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length == 600"
                  (click)="EmailShowMoreLessCount = ticketHistoryData?.emailPlainText?.length;$event.stopPropagation()"
                  class="cursor-pointer colored__locobuzz">...
                  Read more
                </span>
                <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length > 600"
                  (click)="EmailShowMoreLessCount = 600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">...
                  Read less
                </span>
              </ng-container>
          </div>
        </ng-container>
        <ng-container *ngIf="selectedTicketView==3">
          <div class="post__note post__note--image emailfriendly bg__white" [ngClass]="{'medium-font-size': !defaultLayout}"
            *ngIf="ticketHistoryData?.title || ticketHistoryData?.emailPlainText">
            <p><b class="mb-5" *ngIf="ticketHistoryData?.title">{{ticketHistoryData?.title}}</b></p>
            <ng-container *ngIf="ticketHistoryData?.emailPlainText">
              <br>

              <span
                [innerHTML]="(stripHtml(ticketHistoryData?.emailPlainText)?.length > 700 ? ticketHistoryData?.emailPlainText?.substr(0,
                                          getTruncationIndexForVisibleText(ticketHistoryData?.emailPlainText, EmailShowMoreLessCount)) : ticketHistoryData?.emailPlainText)"></span>
                <ng-container *ngIf="ticketHistoryData?.emailPlainText?.length > 700">
                  <span *ngIf="ticketHistoryData?.emailPlainText.substr(0, EmailShowMoreLessCount)?.length == 600"
                    (click)="EmailShowMoreLessCount = ticketHistoryData?.emailPlainText?.length;$event.stopPropagation()"
                    class="cursor-pointer colored__locobuzz">
                    ...Read more
                  </span>
                  <span *ngIf="ticketHistoryData?.emailPlainText?.substr(0,EmailShowMoreLessCount)?.length > 600"
                    (click)="EmailShowMoreLessCount = 600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">
                    ...Read less
                  </span>
                </ng-container>
            </ng-container>
            <!-- <span (click)="$event.stopPropagation();attchmentFlag=true" *ngIf="!attchmentFlag && attachmentLength>0" class="
                                    post__alert--attachment
                                    colored__yellow--dark
                                  ">
                <mat-icon class="colored__yellow--dark">attach_file</mat-icon>
                {{ attachmentLength }} {{attachmentLength>0?'attachments':'attachment'}}
              </span> -->
          </div>
        </ng-container>

        <ng-container *ngIf="postData?.channelGroup === channelGroupEnum.Pantip">
          <div *ngIf="postData?.emailContentHtml && postData?.emailContentHtml?.trim()?.length > 0 else description">
            <iframe #iframeStyle sandbox="allow-same-origin allow-scripts" (load)="iframeViewLoaded(iframeStyle)"
              [srcdoc]="pantipContent | safehtml" frameborder="0" height="100%" width="100%">
            </iframe>
          </div>
          <ng-template #description>
            <div class="post__body--description">
              <span *ngIf="postData?.title && postData.channelType === channelTypeEnum.PantipTopics" class="d-flex mb-20"
                [innerHTML]="postData?.title | safehtml"></span>
              <span *ngIf="ticketHistoryData?.description"
                              [innerHTML]="(stripHtml(ticketHistoryData?.description)?.length > 700 ? ticketHistoryData?.description?.substr(0,
                              getTruncationIndexForVisibleText(ticketHistoryData?.description, this.showMoreLessCount)) : ticketHistoryData?.description) |safehtml"> </span>

                <span *ngIf="ticketHistoryData?.description && readMore && stripHtml(ticketHistoryData?.description)?.length > 700">
                  <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length == 600"
                    (click)="showMoreLessCount=descriptionCount;$event.stopPropagation()"
                    class="cursor-pointer colored__locobuzz">... Read more</span>
                  <span *ngIf="ticketHistoryData?.description.substr(0,showMoreLessCount)?.length > 600"
                    (click)="showMoreLessCount=600;$event.stopPropagation()" class="cursor-pointer colored__locobuzz"> Read
                    less</span>
                </span>
            </div>
          </ng-template>
          <div [ngClass]="{'ml-10': !postData?.isBrandPost, 'mt-10': postData?.isBrandPost}">
            <span>
              <img src="assets/images/common/like.svg" class="mt-2 mr-5" matTooltip="{{'Like' | translate}}" matTooltipPosition="above"
                matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ?
                reactions?.like : 0 }}</span>
              <img src="assets/images/common/laugh.svg" class="mt-3 mr-5" matTooltip="{{'Laugh' | translate}}" matTooltipPosition="above"
                matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ?
                reactions?.laugh : 0 }}</span>
              <img src="assets/images/common/Heart.svg" class="mt-3 mr-5" matTooltip="{{'Love' | translate}}" matTooltipPosition="above"
                matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ?
                reactions?.love : 0 }}</span>
              <img src="assets/images/common/impress.svg" class="mt-3 mr-5" matTooltip="{{'Impress' | translate}}"
                matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ?
                reactions?.impress : 0}}</span>
              <img src="assets/images/common/scary.svg" class="mt-3 mr-5" matTooltip="{{'Scary' | translate}}" matTooltipPosition="above"
                matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{ (postData?.reactionJson != null && postData?.reactionJson != 'null') ?
                reactions?.scary : 0}}</span>
              <img src="assets/images/common/wow.svg" class="mt-3 mr-5" matTooltip="{{'Wow' | translate}}" matTooltipPosition="above"
                matTooltipClass="custom__tooltip-normal">
              <span class="mr-10">{{(postData?.reactionJson != null && postData?.reactionJson != 'null') ? reactions?.wow
                : 0}}</span>
              <img src="assets/images/common/pantip_comment.svg" class="mt-3 mr-5" matTooltip="{{'Comment' | translate}}"
                matTooltipPosition="above" matTooltipClass="custom__tooltip-normal">
              <span>{{postData?.mentionMetadata?.commentCount != null ? postData?.mentionMetadata?.commentCount :
                0}}</span>
            </span>
          </div>
          <div *ngIf="postData?.pantipTopicType == 2" class="mt-5">
            <span class="ml-10 font-weight-500">To view the poll results, please use the Open Link button below.</span>
          </div>
        </ng-container>

        <ng-container *ngIf="ticketHistoryData?.carouselMediaObj">
          <span class="messages__attachFile--carousel"
            *ngIf="ticketHistoryData?.carouselMediaObj.mediaContent.length === 1">
            <div class="card">
              <p-carousel [value]="ticketHistoryData?.carouselMediaObj.mediaContent[0].buttons" [numVisible]="1"
                [numScroll]="1" [circular]="false" [responsiveOptions]="responsiveOptions">
                <ng-template let-product pTemplate="item">
                  <div class="carousel__item">
                    <div class="carousel__content">
                      <div class="carousel__content--text ">
                        <p class="text__label text-capitalize pt-5 pb-0 mb-5 font-size-14 font-weight-500"
                          *ngIf="product?.title && !product?.title?.includes('null')">{{product.title}}</p>
                        <p class=" mb-10 line-height-13 font-size-14 font-weight-500"
                          *ngIf="product?.subtitle &&!product?.subtitle?.includes('null')">
                          {{product.subtitle}}</p>
                      </div>
                      <ng-container *ngIf="product?.buttons?.length > 0">
                        <div class="carousel__button mt-25">
                          <button mat-flat-button color="accent" class="text-capitalize border-radius-25 mb-10"
                            *ngFor="let button of product.buttons">{{button.title}}</button>
                        </div>
                      </ng-container>
                    </div>
                    <div class="carousel__image" *ngIf="product?.image_url !== 'null'">
                      <img [src]="product.image_url" (click)="openCaroselMedia(product.image_url)" alt=""
                        onError="this.src='assets/images/chatbot/img-expired.svg';">
                    </div>
                  </div>
                </ng-template>
              </p-carousel>
            </div>
            <!-- <mat-carousel timings="250ms ease-in" [autoplay]="false" interval="5000" color="accent" maxWidth="auto"
                [maintainAspectRatio]="false"
                [slideHeight]="ticketHistoryData?.carouselMediaObj.mediaContent[0].attachmentObj.attachmentHeight"
                [loop]="true" [hideArrows]="false" [hideIndicators]="false" [useKeyboard]="true" [useMouseWheel]="false"
                orientation="ltr">
                <mat-carousel-slide #matCarouselSlide
                  *ngFor="let slideItem of ticketHistoryData?.carouselMediaObj.mediaContent[0].buttons; let i = index"
                  overlayColor="#00000040" [hideOverlay]="false">
                  <div class="carousel__item">
                    <div class="carousel__content">
                      <div class="carousel__content--text">
                        <p class="text__label text-capitalize pt-5 pb-0 mb-5"
                          *ngIf="slideItem?.title && !slideItem?.title?.includes('null')">{{slideItem.title}}</p>
                        <p class=" mb-10 line-height-13"
                          *ngIf="slideItem?.subtitle &&!slideItem?.subtitle?.includes('null')">
                          {{slideItem.subtitle}}</p>
                      </div>
                      <ng-container *ngIf="slideItem?.buttons?.length > 0">
                        <div class="carousel__button">
                          <button mat-flat-button color="accent" class="text-capitalize border-radius-25 mb-10"
                            *ngFor="let button of slideItem.buttons">{{button.title}}</button>
                        </div>
                      </ng-container>
                    </div>
                    <div class="carousel__image" *ngIf="slideItem?.image_url !== 'null'">
                      <img [src]="slideItem.image_url" (click)="openCaroselMedia(slideItem.image_url)" alt=""
                        onError="this.src='assets/images/chatbot/img-expired.svg';">
                    </div>
                  </div>
                </mat-carousel-slide>

              </mat-carousel> -->
          </span>
        </ng-container>
        <!-- <div class="post__alert post__alert--warning" *ngIf="post?.note">
            <label class="post__alert--label" *ngIf="ticketHistoryData?.isrejectedNote; else LastNote">Rejected Note:
            </label>
            <ng-template #LastNote>
              <label class="post__alert--label">Note: </label>
            </ng-template>
            <span class="post__alert--info | linkify: 'linkifyOptions'">
              {{ post?.note }}</span>
          </div> -->
        <div class="recording overflow-hidden" (click)="$event.stopPropagation()"
          *ngIf="postData?.channelGroup==channelGroupEnum.Voice">
          <app-audio-slider [postData]="postData" [ticketHistoryData]="ticketHistoryData"></app-audio-slider>
          <!-- <div class="recording__audio" *ngIf="postData?.mediaType==MediaEnum.AUDIO; else audioOther">
              <div class="recording__audio--play">
                <mat-icon>{{AudioPlayPause? 'play_circle_outline' : 'pause_circle_outline'}}</mat-icon>

                <span class="recording__audio--icon" #audioPlay [loader]="audioLoading" *ngIf="iconPlayAudio && postData?.contentID==this._postDetailService.audioID; else playOther"
                  (click)="state.currentTime && postData?.contentID==this._postDetailService.audioID ? playAudio() : openFile(postData?.contentID,ticketHistoryData?.voipAudioUrls[0])">
                  <mat-icon>play_circle_outline</mat-icon>
                </span>
                <ng-template #playOther>
                  <span class="recording__audio--icon" *ngIf="iconPlayAudio || state.currentTime == state.duration || postData?.contentID!=this._postDetailService.audioID"
                    (click)="openFile(postData?.contentID,ticketHistoryData?.voipAudioUrls[0])">
                    <mat-icon>play_circle_outline</mat-icon>
                  </span>
                </ng-template>
                <span class="recording__audio--icon" *ngIf="iconPauseAudio && state.currentTime!==state.duration && postData?.contentID==this._postDetailService.audioID" (click)=" pauseAudio()">
                  <mat-spinner *ngIf="audioLoading" [diameter]="20"></mat-spinner>
                  <mat-icon *ngIf="!audioLoading">pause_circle_outline</mat-icon>
                </span>
              </div>
              <div class="recording__audio--slider">
                <span *ngIf="state.currentTime!==state.duration && postData?.contentID==this._postDetailService.audioID; else slideOther">
                  <mat-slider class="d-flex" min="0" [max]="state?.duration" [value]="state?.currentTime"
                    (change)="onSliderChangeEnd($event)">
                  </mat-slider>
                </span>
                <ng-template #slideOther>
                  <span>
                    <mat-slider class="d-flex" aria-label="unit(s)"></mat-slider>
                  </span>
                </ng-template>
              </div>
              <div class="recording__audio--time">
                <span style="white-space: nowrap;" *ngIf="state.currentTime!==state.duration && postData?.contentID==this._postDetailService.audioID; else timeOther">
                  {{ state?.readableCurrentTime }}
                </span>
                <ng-template #timeOther>
                  <span>
                    00:00
                  </span>
                </ng-template>
              </div>
            </div> -->

        </div>
        
      </div>
      <div class="note-attachment note-attachment-has post__alert post__alert--warning" [ngClass]="{'small_font-size p-0': !defaultLayout}">
        <ng-container >
          <div class="post__alert post__alert--warning mt-5 py-0"
            *ngIf=" post?.isLastNoteShow  && (note ||(fileList && fileList?.length > 0 )|| (medialist.length > 0 && medialist))"
            (click)="this.noteMediaCount.showDownload = !this.noteMediaCount.showDownload;this.noteMediaCount.showDownload?checkNotesWidth():''; $event.stopPropagation(); $event.preventDefault();">
            <label class="post__alert--label" *ngIf="ticketHistoryData.isrejectedNote; else LastNote">Rejected Note:
            </label>
            <ng-template #LastNote>
              <label class="post__alert--label">{{'note' | translate}} </label>
            </ng-template>
            <span class="post__alert--info | linkify: 'linkifyOptions'"
              [innerHTML]="note != postData?.ticketInfo?.lastNote && note ? postData?.ticketInfo?.lastNote : note">
              <!-- {{ note }} -->
            </span>
            <span class="post__alert--attachment pl-0 pr-0 m-0">
              <!-- this.noteMediaCount?.pdfCount > 0  -->
              <span class="post__alert--attachment-icon ml-8" *ngIf="this.noteMediaCount?.pdfCount > 0">
                <span class="post__alert--attachment-pdficon">{{'pdf' | translate}}</span> <span class="mr-7 ml-4"
                  *ngIf="this.noteMediaCount?.pdfCount > 1">+{{this.noteMediaCount?.pdfCount - 1}}</span>
              </span>
              <!-- this.noteMediaCount?.xlsCount > 0 -->
              <span class="post__alert--attachment-icon ml-8" *ngIf="this.noteMediaCount?.xlsCount > 0">
                <span class="post__alert--attachment-pdficon bg__green">{{'excel' | translate}}</span> <span class="mr-7 ml-4"
                  *ngIf="this.noteMediaCount?.xlsCount > 1">+{{this.noteMediaCount?.xlsCount - 1}}</span>
              </span>
              <!-- this.noteMediaCount?.docCount > 0 -->
              <span class="post__alert--attachment-icon ml-8" *ngIf="this.noteMediaCount?.docCount > 0">
                <span class="post__alert--attachment-pdficon bg__locobuzz">{{'doc' | translate}}</span> <span class="mr-7 ml-4"
                  *ngIf="this.noteMediaCount?.docCount > 1">+{{this.noteMediaCount?.docCount - 1}}</span>
              </span>
              <span class="post__alert--attachment-imgicon ml-8" *ngIf="this.noteMediaCount?.mediaCount > 0 "
                style="font-size: 1.4rem;">
                <mat-icon fontSet="material-icons-outlined" [ngClass]="!defaultLayout ? 's-16' : 's-24' ">image</mat-icon> <span class="ml-4"
                  *ngIf="this.noteMediaCount?.mediaCount > 1">+{{this.noteMediaCount?.mediaCount -1}}</span>
              </span>
            </span>
          </div>
          <p *ngIf="!this.noteMediaCount?.showDownload && postData?.isTicketNoteEdited && postData?.status == 45">Edited on
            {{postData?.ticketNoteEditedOn | datetimeFormatter:'DD-MMMM-YYYY hh:mm A'}}</p>
          <div class="post__alert post__filled--form" *ngIf="post?.formFilledNote">
            <mat-icon fontSet="material-icons-outlined">article</mat-icon>
            <span>
              <span class="text-underline">{{authorName}}</span> {{'has-filled-the-form' | translate}}
            </span>
          </div>
        </ng-container>
        <!-- <ng-template #VoipNote> -->
          <!-- *ngIf="post?.note" -->
          <!-- <div class="post__alert post__alert--warning" *ngIf="ticketHistoryData?.voipNote"> -->
            <!-- <label class="post__alert--label" *ngIf="ticketHistoryData?.isrejectedNote; else LastNote">Rejected Note:
                                </label>
                                <ng-template #LastNote>
                                  <label class="post__alert--label">Note: </label>
                                </ng-template> -->
            <!-- <label class="post__alert--label">{{'note' | translate}} </label>
            <span class="post__alert--info | linkify: 'linkifyOptions'"
              *ngIf="ticketHistoryData?.voipNote?.length < 350; else moreLessNote">
              {{ ticketHistoryData?.voipNote }}
            </span>
          </div>
          <ng-template #moreLessNote>
            <span class="post__alert--info | linkify: 'linkifyOptions'">
              {{ (moreNote && ticketHistoryData?.voipNote?.length > 450) ? ticketHistoryData?.voipNote.substring(0,350) : ticketHistoryData?.voipNote }}
            </span>
              <ng-container *ngIf="ticketHistoryData?.voipNote?.length > 450">
                <span *ngIf="moreNote" (click)="moreNote=!moreNote; $event.stopPropagation(); $event.preventDefault();"
                  class="colored__locobuzz cursor-pointer">...Read More</span>
                <span *ngIf="!moreNote" (click)="moreNote=!moreNote; $event.stopPropagation(); $event.preventDefault();"
                  class="colored__locobuzz cursor-pointer"> Read Less</span>
              </ng-container>
          </ng-template>
        </ng-template> -->
        <ng-container *ngIf="this.noteMediaCount.showDownload">
          <div class="d-flex-items-center g-10 note-attachment__attached">
            <div #attachmentNoteRef (click)="openMediaPreview(obj,true);$event.stopPropagation()"
              *ngFor="let obj of notesAttachmentList | slice:0:maximumAttachmentNoteLength ;index as i"
              class="d-flex-items-center pl-2 pr-5 py-2 file-pill h-30">
              <img class="w-21 mr-6" [src]="obj.iconUrl" />
              <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                                          class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                                        <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                                          class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                                        <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                                        <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                                        <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
              <p class="cursor-pointer" [matTooltip]="obj.fileName.length > 12 ? obj.fileName :''"
                matTooltipClass="custom__tooltip-normal">{{ obj?.fileName | slice: 0:8 }}{{ obj?.fileName?.length
                > 8 ? '...' : '' }}</p>
              <mat-icon (click)="downloadFile(obj.mediaUrl,obj.fileName);$event.stopPropagation()"
                class="ml-6 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
            </div>
            <div *ngIf="showMoreNoteAttachment">
              <span class="more-count cursor-pointer" *ngIf="remainingNotesCount>0" (click)="$event.stopPropagation()"
                [matMenuTriggerFor]="attachmentMore">+{{remainingNotesCount}}</span>
              <mat-menu #attachmentMore="matMenu" class="">
                <button mat-menu-item class="d-flex-items-center" (click)="openMediaPreview(obj,true)"
                  *ngFor="let obj of notesAttachmentList | slice:maximumAttachmentNoteLength:notesAttachmentList.length ;index as i">
                  <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                                              class="material-icons-outlined colored__red mr-6 font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                                            <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                                              class="material-icons-outlined colored__purple mr-6 font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                                            <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                                            <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                                            <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                  <span class="d-flex-items-center">
                    <img class="w-21 mr-6" [src]="obj.iconUrl" />
                    <span class="more-count__text text__ellipsis" [matTooltip]="obj.fileName.length > 12 ? obj.fileName :''"
                      matTooltipClass="custom__tooltip-normal">
                      {{ obj?.fileName | slice: 0:15 }}{{ obj?.fileName?.length
                      > 15 ? '...' : '' }}</span>
                    <mat-icon (click)="downloadFile(obj.mediaUrl,obj.fileName);$event.stopPropagation()"
                      class="ml-auto mr-0 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
                  </span>
                </button>
              </mat-menu>
            </div>
            <!-- <div class="d-flex-items-center pl-2 pr-5 py-2 file-pill">
                                                      <mat-icon
                                                          class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                                                      <p>untitled_file.jpg</p>
                                                      <mat-icon class="ml-6 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
                                                  </div>
                                                  <div class="d-flex-items-center g-3 pl-2 pr-5 py-4 file-pill">
                                                      <img class="w-21" src="assets/icons/excel-icon.svg">
                                                      <p>untitled_file.excl</p>
                                                      <mat-icon class="ml-6 s-18" fontSet="material-icons-outlined">close</mat-icon>
                                                  </div> -->
          </div>
          <p *ngIf="postData?.isTicketNoteEdited && this.noteMediaCount?.showDownload && postData?.status == 45">Edited on
            {{postData?.ticketNoteEditedOn | datetimeFormatter:'DD-MMMM-YYYY hh:mm A'}}</p>
        </ng-container>
      </div>
        <ng-container *ngIf="scanContentUrlList?.length>0 && !noLinkFound">
          <div *ngFor="let urlObj of scanContentUrlList"
            [ngClass]="{'green-pill': urlObj.status==1,'red-pill':urlObj.status==2}"
            class="post__alert post__alert--warning mt-8">
            <label class="post__alert--label " [ngClass]="{'green-pill': urlObj.status==1,'red-pill':urlObj.status==2}">
              <mat-icon [ngClass]="{'colored__green--dark': urlObj.status==1,'colored__red--dark':urlObj.status==2}">
                {{urlObj.status==1?'gpp_good':'gpp_bad'}}</mat-icon>{{urlObj.status==1?'SafeLink':'Unsafe Content'}}:
            </label>
            <span (click)="$event.stopPropagation()" class="
                                post__alert--info
                              " [innerHTML]="
                          urlObj.url | linkify: 'linkifyOptions'">
            </span>
          </div>
        </ng-container>
        <ng-template
          [ngIf]="postData?.channelGroup == channelGroupEnum.Quora && (pageType === PostsType.Mentions || pageType === PostsType.TicketHistory)">
          <div class="post__quora--share">
            <div matTooltip="{{'Upvote' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              *ngIf="postData.channelType === channelTypeEnum.QuoraAnswer || postData.channelType === channelTypeEnum.QuoraComment "
              class="post__quora--icon">
              <img src="assets/images/upvote.svg" alt=""> <span
                class="ml-5">{{postData?.mentionMetadata?.likeCount?postData?.mentionMetadata.likeCount:0 |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Share' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraAnswer"
              matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
              <img src="assets/images/Quora_Share.svg" alt=""> <span
                class="ml-5">{{postData?.mentionMetadata?.shareCount?postData?.mentionMetadata.shareCount:0 |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Comment' | translate}}" matTooltipPosition="above"
              *ngIf="postData.channelType === channelTypeEnum.QuoraQuestion || postData.channelType === channelTypeEnum.QuoraAnswer"
              matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
              <img src="assets/images/comments.svg" alt=""> <span
                class="ml-5">{{postData?.mentionMetadata?.commentCount?postData?.mentionMetadata.commentCount:0 |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'View' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraAnswer"
              matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
              <img src="assets/images/Views_eye.svg" alt=""> <span
                class="ml-5">{{postData?.mentionMetadata?.videoViews?postData.mentionMetadata.videoViews:0 |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Answer' | translate}}" matTooltipPosition="above" *ngIf="postData.channelType === channelTypeEnum.QuoraQuestion"
              matTooltipClass="custom__tooltip-normal" class="post__quora--icon">
              <mat-icon fontset="material-icons-outlined" aria-label="question answer"
                class="mat-icon notranslate material-icons-outlined mat-icon-no-color s-20">question_answer</mat-icon> <span
                class="ml-5">{{postData?.mentionMetadata?.answerCount?postData.mentionMetadata.answerCount:0 |
                numberFormatCommaSeperate}}</span>
            </div>
          </div>
        </ng-template>
        <ng-template
          [ngIf]="post?.channelgroup === channelGroupEnum.TikTok && post?.channeltype == channelTypeEnum.TikTokBrandPost && (pageType === PostsType.Mentions || pageType === PostsType.TicketHistory)">
          <div class="post__quora--share">
            <div matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.likeCount ? postData?.mentionMetadata.likeCount : 0) |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Share' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined" class="forward-icon">reply</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.shareCount ?
                postData?.mentionMetadata.shareCount : 0) | numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Comment' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.commentCount ?
                postData?.mentionMetadata.commentCount : 0) | numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Saved' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">turned_in_not</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.savedCount ?
                postData?.mentionMetadata.savedCount : 0) | numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'View' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">visibility</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.videoViews ?
                postData?.mentionMetadata.videoViews : 0) | numberFormatCommaSeperate}}</span>
            </div>
            <div class="post__stat--item">
              <span class="post__stat--icon text__label">{{'Engagement' | translate}}: </span>
              <span class="post__stat--value text__label ml-3 no-underline">
                {{post?.engagement | numberFormatCommaSeperate}}</span>
              <span *ngIf="
                                    post?.showEngagementFxFlag && post?.engagement != 'NA'"
                (click)="updateReachAndImpression()" class="post__stat--icon text__label ml-4" matTooltipPosition="above"
                matTooltipClass="custom-tooltip"
                matTooltip="{{'Reach-ToolTip' | translate}}">
                <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
              </span>
            </div>
            <div class="post__stat--item" *ngIf="!ticketHistoryData?.isDarkAdPost">
              <span class="post__stat--icon text__label">{{'Reach' | translate}}: </span>
              <span class="post__stat--value text__label ml-3 no-underline">
                {{ post?.reach | numberFormatCommaSeperate }}</span>
              <span *ngIf="
                                    post?.showReachFxFlag && post?.reach != 'NA'
                                  " (click)="updateReachAndImpression()" class="post__stat--icon text__label ml-4"
                matTooltipPosition="above" matTooltipClass="custom-tooltip"
                matTooltip="{{'Reach-ToolTip' | translate}}">
                <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
              </span>
            </div>
            <div class="post__stat--item" *ngIf="!ticketHistoryData?.isDarkAdPost">
              <span class="post__stat--icon text__label">{{'Impression' | translate}}: </span>
              <span class="post__stat--value text__label ml-3 no-underline">
                {{ post?.impression | numberFormatCommaSeperate }}</span>
              <span *ngIf="
                                    post?.showImpressionFxFlag && post?.impression != 'NA'"
                (click)="updateReachAndImpression()" class="post__stat--icon text__label ml-4" matTooltipPosition="above"
                matTooltipClass="custom-tooltip"
                matTooltip="{{'Reach-ToolTip' | translate}}">
                <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
              </span>
            </div>
          </div>
        </ng-template>
        <ng-template
          [ngIf]="clickhouseEnabled && post?.channelgroup === channelGroupEnum.TikTok && post?.channeltype == channelTypeEnum.TikTokComments && (pageType === PostsType.Mentions)">
          <div class="post__quora--share">
            <div matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.likeCount ? postData?.mentionMetadata.likeCount : 0) |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Comment' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.commentCount ?
                postData?.mentionMetadata.commentCount : 0 )| numberFormatCommaSeperate}}</span>
            </div>
          </div>
        </ng-template>
        <ng-template
          [ngIf]="clickhouseEnabled && post?.channelgroup === channelGroupEnum.GoogleMyReview && (post?.channeltype == channelTypeEnum.GMBAnswers || post?.channeltype == channelTypeEnum.GMBQuestion || (post?.channeltype == channelTypeEnum.GoogleMyReview && !postData?.isBrandPost))">
          <div class="post__quora--share">
            <div matTooltip="{{'Like' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">thumb_up</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.likeCount ? postData?.mentionMetadata.likeCount : 0) |
                numberFormatCommaSeperate}}</span>
            </div>
            <div matTooltip="{{'Answer-Count' | translate}}" matTooltipPosition="above" matTooltipClass="custom__tooltip-normal"
              class="post__quora--icon"
              *ngIf="post?.channeltype != channelTypeEnum.GMBAnswers && post?.channeltype != channelTypeEnum.GoogleMyReview ">
              <span class="post__stat--icon text__label">
                <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
              </span>
              <span class="ml-5">{{(postData?.mentionMetadata?.answerCount ?
                postData?.mentionMetadata.answerCount : 0 )| numberFormatCommaSeperate}}</span>
            </div>
        
          </div>
        </ng-template>
        <!-- missed call start -->
        <!-- <div class="post__alert post__alert--missedcall">
                <label class="post__alert--label missedcall__label">
                  <mat-icon fontSet="material-icons-outlined">call_missed</mat-icon> Missed Call:
                </label>
                <span class="post__alert--info missedcall__info">
                  You have received a missed call from <span class="missedcall__number">+91 98765 43210</span> due to agents phone was busy.
                </span>
              </div> -->
        <!-- missed call ends -->
        <!-- <div class="post__document" *ngIf="postData?.channelGroup == channelGroupEnum.Email && attchmentFlag">
              <span class="post__document--files" *ngFor="let file of ticketHistoryData?.documentUrls"> -->
        <!-- <a [href]="file.fileUrl" download="file.fileName" target="_blank" (click)="$event.stopPropagation()">
                      <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
                      <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
                      <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
                      <span class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
                        matTooltipClass="custom__tooltip-normal">{{file.fileName}}</span>
                    </a> -->
        
        <!-- <a href="javascript:void(0);" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
                  <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
                  <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
                  <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
                  <span class="document" [matTooltip]="file.fileName.length > 22 ? file?.fileName : ''" matTooltipPosition="above"
                    matTooltipClass="custom__tooltip-normal">{{file.fileName}}</span>
                </a>
              </span>
            </div> -->
        <div *ngIf="showTranslated" class="post__body--data mt-8 mb-8">
          <div class="post__note">
            <p *ngIf="!isTranslateError" class="post__note--title">
              Translated From:
              <a (click)="$event.stopPropagation()" class="post__note--highlight" (click)="$event.stopPropagation()">{{
                translateFrom }}</a>
              To:
              <a (click)="$event.stopPropagation()" class="post__note--highlight post__note--dropdown"
                [matMenuTriggerFor]="languageDropdown">{{ translateTo }}
                <mat-icon>keyboard_arrow_down</mat-icon>
              </a>
              <mat-icon (click)="resetTranslation(); $event.stopPropagation()" fontSet="material-icons-outlined"
                class="cursor-pointer">
                highlight_off</mat-icon>
            </p>
        
            <mat-menu #languageDropdown="matMenu" class="h-300">
              <button *ngFor="let language of Object.keys(languages)" (click)="
                      setTranslateTo(
                        languages[language].DisplayName,
                        languages[language].PassingName
                      );
                      $event.stopPropagation();closeMenu()
                    " mat-menu-item>
                {{ languages[language].DisplayName }}
              </button>
            </mat-menu>
            <span class="post__note--info" [innerHtml]="translatedText">{{ translatedText }}</span>
            <mat-icon *ngIf="isTranslateError" (click)="resetTranslation(); $event.stopPropagation()"
              fontSet="material-icons-outlined" class="cursor-pointer">highlight_off</mat-icon>
          </div>
        </div>
        <div *ngIf="pollsDetails">
          <!-- Poll Start -->
          <div *ngFor="let item of pollsDetails?.options | slice:0:endIndex" class="post__poll">
            <div class="post__poll--wrapper">
              <span class="font-weight-500 text-capitalize">{{item?.text}}</span>
              <div class="post__poll--box">
                <div class="post__poll--block">
                  <span class="post__poll--strip" [ngStyle]="{'width': item?.vote_percent}"></span>
                </div>
                <span class="post__poll--count">{{item?.vote_percent}} <span class="font-weight-500 cursor-pointer"
                    matTooltip="{{'Votes' | translate}}" matTooltipPosition="above"
                    matTooltipClass="custom__tooltip-normal">({{item?.vote_count}})</span></span>
              </div>
            </div>
          </div>
          <span *ngIf="pollsDetails?.options?.length>3">
            <span *ngIf="endIndex==3" (click)="endIndex=pollsDetails?.options?.length;$event.stopPropagation()"
              class="cursor-pointer colored__locobuzz">
              See more</span>
            <span *ngIf="endIndex>3" (click)="endIndex=3;$event.stopPropagation()" class="cursor-pointer colored__locobuzz">
              See
              less</span>
          </span>
        </div>
        <!-- Poll Ends -->
        <!-- engagement -->
        <div class="post__stat" *ngIf="(pageType === PostsType.Mentions || showParentPostHeader) && !hideStatsCount">
          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Reply' | translate}}" *ngIf="
                  post?.channelgroup === channelGroupEnum.Twitter &&
                  post?.channeltype !== channelTypeEnum.DirectMessages && !hideReplyFlag
                ">
            <span class="post__stat--icon">
              <mat-icon fontSet="material-icons-outlined">reply</mat-icon>
            </span>
            <span class="post__stat--value no-underline">{{
              replyCount | numberFormatCommaSeperate
              }}</span>
          </div>
          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Like' | translate}}" *ngIf="
                  post?.channelgroup === channelGroupEnum.Twitter &&
                  post?.channeltype !== channelTypeEnum.DirectMessages && !hideLikeFlag
                ">
            <span class="post__stat--icon">
              <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
            </span>
            <span class="post__stat--value no-underline">{{ likeCount | numberFormatCommaSeperate}}</span>
          </div>

          <ng-container *ngIf="post?.channelgroup === channelGroupEnum.Reddit && !hideLikeFlag">
            <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip"
              matTooltip="Upvote">
              <img src="assets/icons/reddit-upvote.svg" alt="upvote" class="w-18 h-18 post__stat--icon">
              <!-- <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon> -->
              <span class="post__stat--value no-underline ml-3 text__label">{{ (postData?.mentionMetadata?.likeCount || 0) | numberFormatCommaSeperate}}</span>
            </div>

            <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip"
              matTooltip="Downvote">
              <img src="assets/icons/reddit-downvote.svg" alt="downvote" class="w-18 h-18 post__stat--icon">
              <!-- <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon> -->
              <span class="post__stat--value no-underline ml-3 text__label">{{ (postData?.mentionMetadata?.NumNegativeVoteCount || 0) | numberFormatCommaSeperate}}</span>
            </div>
          </ng-container>
          
          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Retweet' | translate}}" *ngIf="
                  post?.channelgroup === channelGroupEnum.Twitter &&
                  post?.channeltype !== channelTypeEnum.DirectMessages && !hideRetweetFlag
                ">
            <span class="post__stat--icon">
              <mat-icon fontSet="material-icons-outlined">repeat</mat-icon>
            </span>
            <span class="post__stat--value no-underline">{{
              retweetCount | numberFormatCommaSeperate
              }}</span>
          </div>
          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Like' | translate}}" *ngIf="
                      (post?.channelgroup === channelGroupEnum.Facebook &&
                        post?.channeltype !== channelTypeEnum.FBMessages) ||
                      post?.channelgroup === channelGroupEnum.Youtube ||
                      (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                        post?.channeltype !== channelTypeEnum.LinkedInComments)
                    ">
            <span class="post__stat--icon text__label">
              <mat-icon fontSet="material-icons-outlined">thumb_up_alt</mat-icon>
            </span>
            <span class="post__stat--value text__label ml-3 no-underline">
              {{ post?.likecount | numberFormatCommaSeperate }}</span>
          </div>
          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Like' | translate}}" *ngIf="
                          (post?.channelgroup === channelGroupEnum.Instagram &&
                            post?.channeltype !== channelTypeEnum.InstagramMessages)
                        ">
            <span class="post__stat--icon text__label">
              <mat-icon fontSet="material-icons-outlined">favorite_border</mat-icon>
            </span>
            <span class="post__stat--value text__label ml-3 no-underline">
              {{ post?.likecount | numberFormatCommaSeperate }}</span>
          </div>
          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Share' | translate}}" *ngIf="
                  (post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages &&
                  post?.channeltype !== channelTypeEnum.FbGroupComments) ||
                  (post?.channelgroup === channelGroupEnum.Instagram &&
                    post?.channeltype !== channelTypeEnum.InstagramMessages && post?.channeltype !== channelTypeEnum.InstagramPagePosts) ||
                  (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                    post?.channeltype !== channelTypeEnum.LinkedInComments)
                ">
            <span class="post__stat--icon">
              <mat-icon fontSet="material-icons-outlined" class="forward-icon">reply</mat-icon>
            </span>
            <span class="post__stat--value no-underline">{{
              post?.retweetcount | numberFormatCommaSeperate
              }}</span>
          </div>

          <div class="post__stat--item" matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Comment' | translate}}" *ngIf="
                  (post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages &&
                  post?.channeltype !== channelTypeEnum.FbGroupComments) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                    post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                  (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                    post?.channeltype !== channelTypeEnum.LinkedInComments) ||
                    post?.channelgroup === channelGroupEnum.Youtube || post?.channelgroup === channelGroupEnum.Reddit
                ">
            <span class="post__stat--icon text__label">
              <mat-icon fontSet="material-icons-outlined">comment</mat-icon>
            </span>
            <span class="post__stat--value text__label ml-3 no-underline">
              {{ post?.commentcount | numberFormatCommaSeperate}}</span>
          </div>
          <div class="post__stat--item" [ngClass]="{'bg-number': showMetricColor}" matTooltipPosition="above"
            matTooltipClass="custom-tooltip" matTooltip="{{'video-views' | translate}}" *ngIf="
                !hideVideoFlag &&
                  ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages) ||
                    (post?.channelgroup === channelGroupEnum.Twitter &&
                      post?.channeltype !== channelTypeEnum.DirectMessages) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                      post?.channeltype !== channelTypeEnum.InstagramMessages && postData?.mentionFetchedFrom && !ticketHistoryData?.isDarkAdPost ) ||
                    post?.channelgroup === channelGroupEnum.Youtube ||
                    (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                      post?.channeltype !== channelTypeEnum.LinkedInComments)) &&
                  post?.isbrandpost &&
                  (ticketHistoryData?.videoUrls.length > 0 || postData?.mediaType === MediaEnum.VIDEO || ticketHistoryData?.youtubeSanitizeUrlObject)
                ">
            <span class="post__stat--icon text__label">
              <mat-icon fontSet="material-icons-outlined">visibility</mat-icon>
            </span>
            <span class="post__stat--value text__label ml-3 no-underline">
              {{ post?.videoviews | numberFormatCommaSeperate }}</span>
          </div>
          <div class="post__stat--item" *ngIf="
          (showEngagementFormula) &&
                ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages && (!clickhouseEnabled && post?.channeltype === channelTypeEnum.FBComments)) ||
                  (post?.channelgroup === channelGroupEnum.Twitter &&
                    post?.channeltype !== channelTypeEnum.DirectMessages) ||
                  (post?.channelgroup === channelGroupEnum.Instagram &&
                    post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                  post?.channelgroup === channelGroupEnum.Youtube ||
                  (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                    post?.channeltype !== channelTypeEnum.LinkedInComments))
                ">
            <span class="post__stat--icon text__label"> {{'Engagement' | translate}}: </span>
            <span class="post__stat--value text__label ml-3 no-underline"
              [ngClass]="{'bg-number': showMetricColor && (postData?.isPromoted == 2 || postData?.isPromoted == 3)}">
              {{ post?.engagement | numberFormatCommaSeperate }}</span>
          </div>
          <div class="post__stat--item" *ngIf=" 
              (showEngagementFormula) && 
                  (post?.showEngagementFxFlag && post?.engagement != 'NA' &&
                  ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages && (!clickhouseEnabled && post?.channeltype === channelTypeEnum.FBComments)) ||
                    (post?.channelgroup === channelGroupEnum.Twitter &&
                      post?.channeltype !== channelTypeEnum.DirectMessages) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                      post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                    post?.channelgroup === channelGroupEnum.Youtube ||
                    (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                      post?.channeltype !== channelTypeEnum.LinkedInComments)))
                ">
            <span (click)="updateReachAndImpression()" class="post__stat--icon text__label" matTooltipPosition="above"
              matTooltipClass="custom-tooltip"
              matTooltip="{{'Reach-ToolTip' | translate}}">
              <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
            </span>
            <span class="post__stat--value text__label ml-3 no-underline"></span>
          </div>
          <div class="post__stat--item" *ngIf="
          showReachImpression &&
                  ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages &&
                  post?.channeltype !== channelTypeEnum.FbGroupComments) ||
                    (post?.channelgroup === channelGroupEnum.Twitter &&
                    post?.channeltype !== channelTypeEnum.DirectMessages) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                      post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                    post?.channelgroup === channelGroupEnum.Youtube) ||
                    (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                    post?.channeltype !== channelTypeEnum.LinkedInComments)
                ">
            <span class="post__stat--icon text__label"> {{'Reach' | translate}}: </span>
            <span class="post__stat--value text__label ml-3 no-underline"
              [ngClass]="{'bg-number': showMetricColor && (postData?.isPromoted == 2 || postData?.isPromoted == 3)}">
              {{ post?.reach | numberFormatCommaSeperate }}</span>
          </div>
          <div class="post__stat--item" *ngIf="
              showReachImpression &&
                  post?.showReachFxFlag && post?.reach != 'NA' &&
                  ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages&&
                  post?.channeltype !== channelTypeEnum.FbGroupComments) ||
                    (post?.channelgroup === channelGroupEnum.Twitter &&
                      post?.channeltype !== channelTypeEnum.DirectMessages) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                      post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                    post?.channelgroup === channelGroupEnum.Youtube ||
                    (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                      post?.channeltype !== channelTypeEnum.LinkedInComments))
                ">
            <span (click)="updateReachAndImpression()" class="post__stat--icon text__label" matTooltipPosition="above"
              matTooltipClass="custom-tooltip"
              matTooltip="{{'Reach-ToolTip' | translate}}">
              <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
            </span>
            <span class="post__stat--value text__label ml-3 no-underline"></span>
          </div>
          <div class="post__stat--item mr-0" *ngIf="
          showReachImpression &&
                  ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages &&
                  post?.channeltype !== channelTypeEnum.FbGroupComments) ||
                    (post?.channelgroup === channelGroupEnum.Twitter &&
                      post?.channeltype !== channelTypeEnum.DirectMessages) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                      post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                    post?.channelgroup === channelGroupEnum.Youtube ||
                    (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                      post?.channeltype !== channelTypeEnum.LinkedInComments))
                ">
            <span class="post__stat--icon text__label"> {{'Impression' | translate}}: </span>
            <span class="post__stat--value text__label ml-3 no-underline" [ngClass]="{'bg-number': showMetricColor}">
              {{ post?.impression | numberFormatCommaSeperate }}</span>
          </div>
          <div class="post__stat--item" *ngIf="
              showReachImpression &&
                  post?.showImpressionFxFlag && post?.impression != 'NA' &&
                  ((post?.channelgroup === channelGroupEnum.Facebook &&
                    post?.channeltype !== channelTypeEnum.FBMessages &&
                  post?.channeltype !== channelTypeEnum.FbGroupComments) ||
                    (post?.channelgroup === channelGroupEnum.Twitter &&
                      post?.channeltype !== channelTypeEnum.DirectMessages) ||
                    (post?.channelgroup === channelGroupEnum.Instagram &&
                      post?.channeltype !== channelTypeEnum.InstagramMessages) ||
                    post?.channelgroup === channelGroupEnum.Youtube ||
                    (post?.channelgroup === channelGroupEnum.LinkedIn && post?.isbrandpost &&
                      post?.channeltype !== channelTypeEnum.LinkedInComments))
                ">
            <span (click)="updateReachAndImpression()" class="post__stat--icon text__label" matTooltipPosition="above"
              matTooltipClass="custom-tooltip"
              matTooltip="{{'Reach-ToolTip' | translate}}">
              <img src="assets/social-mention/post/formula-changed.svg" alt="" class="w-22" />
            </span>
            <span class="post__stat--value text__label ml-3 no-underline"></span>
          </div>
          <div class="post__stat--item"
            *ngIf="post?.channeltype === channelTypeEnum.InstagramPagePosts && postData?.isBrandPost">
            <span (mouseenter)="showMetricColor = true" (mouseleave)="showMetricColor = false" *ngIf="postData?.isPromoted == 0"
              class="post__stat--icon text__label mt-3" matTooltipPosition="above" matTooltipClass="custom-tooltip"
              matTooltip="{{'Instagram-Views-Metric-Info' | translate}}">
              <img src="assets/images/account/info-button-grey.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
            </span>
            <span *ngIf="postData?.isPromoted == 1" class="post__stat--icon text__label mt-3" matTooltipPosition="above"
              matTooltipClass="custom-tooltip"
              matTooltip="{{'Boosted-Posts-Source' | translate}}">
              <img src="assets/images/account/info-button-grey.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
            </span>
            <span (mouseenter)="showMetricColor = true" (mouseleave)="showMetricColor = false"
              *ngIf="(postData?.isPromoted == 2 || postData?.isPromoted == 3)" class="post__stat--icon text__label mt-3"
              matTooltipPosition="above" matTooltipClass="custom-tooltip" matTooltip="{{'Source-Meta-AD-Manager' | translate}}">
              <img src="assets/images/account/info-button-yellow.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
            </span>
            <span (mouseenter)="showMetricColor = true" (mouseleave)="showMetricColor = false" *ngIf="postData?.isPromoted == 5"
              class="post__stat--icon text__label mt-3" matTooltipPosition="above" matTooltipClass="custom-tooltip"
              matTooltip="{{'No-AD-ID' | translate}}">
              <img src="assets/images/account/info-button-yellow.svg" class="w-16 h-16 mt-3 ml-4" alt="info" />
            </span>
          </div>
        </div>
        <!-- engagement ends here -->
        <!-- in 2.0 we showing parent post if post is deleted from social media -->
        <!-- [ngClass]="{ element__disable: ticketHistoryData?.isDeletedMentionDisable }" -->
        <div *ngIf="
                pageType === PostsType.TicketHistory && !hideActionableButton &&
                ticketHistoryData?.communicationLogProperty.showLikeShareBox
              ">
          <mat-menu #handleSelect="matMenu" xPosition="after" yPosition="above">
            <div (click)="$event.stopPropagation()">
              <!-- <ng-template matMenuContent let-type="type">
                    <div class="px-10 pb-10 bb__light-grey">
                      <span class="text__label">{{ type }}</span>
                    </div>
                    <ng-container *ngIf="handleNamesObs$ | async as handles">
                      <button mat-menu-item *ngFor="let item of handles"
                        (click)="setSocialHandle(item); $event.stopPropagation()">
                        <div class="d-flex-items-center likeUnlikeBlock">
                          <span class="likeUnlikeBlock--check" [ngClass]="{ active: item.isactive }">
                            <mat-icon role="img" class="mat-icon notranslate material-icons" aria-hidden="true"
                              data-mat-icon-type="font">check_circle</mat-icon>
                          </span>
                          <img class="mr-4 img w-20" [src]="item.profilepic" alt="Brand Image"
                            onerror="this.src='assets/images/agentimages/sample-image.svg'" />
                          <span>{{ item.handleName }}</span>
                        </div>
                      </button>
                    </ng-container>
                    <div class="d-flex-items-center p-10 bt__light-grey">
                      <a class="ml-auto colored__locobuzz" (click)="submitActionHandle()">Submit</a>
                    </div>
                  </ng-template> -->
        
              <ng-template matMenuContent let-type="type">
                <div class="p-10 bb__light-grey">
                  <span class="text__label">{{ type }}</span>
                </div>
                <div *ngIf="likeRetweetHandleList.length>0" class="p-10 pb-0">
                  <span class="text__label">{{type=='Like/Unlike by handle'?'Liked':'Retweeted'}}
                    Handles</span>
                </div>
                <button mat-menu-item *ngFor="let item of this.likeRetweetHandleList" (click)="setSocialHandle(item,1,type)">
                  <div class="d-flex-items-center likeUnlikeBlock">
                    <span class="likeUnlikeBlock--check" [ngClass]="{active: item.isactive}">
                      <mat-icon role="img" class="mat-icon notranslate material-icons" aria-hidden="true"
                        data-mat-icon-type="font">check_circle</mat-icon>
                    </span>
                    <img class="mr-4 img w-20" onError="this.src='assets/images/agentimages/sample-image.svg'"
                      [src]="item.profilepic" alt="Brand Image" />
                    <span>{{ item.handleName }}</span>
                  </div>
                </button>
                <div *ngIf="unLikeUndoRetweetHandleList.length>0" class="p-10 pt-5"
                  [ngClass]="{'pb-0': likeRetweetHandleList.length>0}">
                  <span class="text__label">{{type=='Like/Unlike by handle'?'Like By':'Retweet By'}}</span>
                </div>
                <button mat-menu-item *ngFor="let item of this.unLikeUndoRetweetHandleList"
                  (click)="setSocialHandle(item,2,type)">
                  <div class="d-flex-items-center likeUnlikeBlock">
                    <span class="likeUnlikeBlock--check" [ngClass]="{active: item.isactive}">
                      <mat-icon role="img" class="mat-icon notranslate material-icons" aria-hidden="true"
                        data-mat-icon-type="font">check_circle</mat-icon>
                    </span>
                    <img class="mr-4 img w-20" onError="this.src='assets/images/agentimages/sample-image.svg'"
                      [src]="item.profilepic" alt="Brand Image" />
                    <span>{{ item.handleName }}</span>
                  </div>
                </button>
                <div class="d-flex-items-center p-10 bt__light-grey" *ngIf="submitButtonName">
                  <a (click)="submitActionHandle()" class="ml-auto colored__locobuzz">{{submitButtonName}} Handle</a>
                </div>
              </ng-template>
            </div>
          </mat-menu>
          <ng-template
            [ngIf]="postData?.channelGroup == channelGroupEnum.Facebook && postData?.channelType!=channelTypeEnum.FBMessages && postData?.author.name!='Anonymous'">
            <div class="post__stat">
              <div *ngIf="ticketHistoryData?.communicationLogProperty.likeEnabled" class="post__stat--item">
                <span class="post__stat--icon" (click)="
                      mentionActionFlag=ticketHistoryData?.communicationLogProperty.likeStatus;likeDisLikePopup(selectedHandle)
                      ">
                  <mat-icon fontSet="material-icons-outlined">{{
                    ticketHistoryData?.communicationLogProperty.likeStatus
                    ? 'favorite'
                    : 'favorite_border'
                    }}
                  </mat-icon>
                </span>
                <span class="post__stat--value">{{
                  likeCount | numberFormatCommaSeperate
                  }}</span>
              </div>
              <!-- <div class="post__stat--item">
                    <span class="post__stat--icon">
                      <mat-icon fontSet="material-icons-outlined">repeat</mat-icon>
                    </span>
                    <span class="post__stat--value">{{ticketHistoryData?.communicationLogProperty.shareCount}}</span>
                  </div> -->
            </div>
          </ng-template>
          <div *ngIf="postData?.channelGroup == channelGroupEnum.Twitter;
                else otherChannels" class="post__stat g-10">
            <div
              *ngIf="ticketHistoryData?.communicationLogProperty.likeEnabled && postData?.channelType!=channelTypeEnum.DirectMessages"
              class="post__stat--item mr-0">
              <span [matMenuTriggerFor]="handleSelect" #clickLikehandleMenuTrigger="matMenuTrigger"
                [matMenuTriggerData]="{ type: 'Like/Unlike by handle' }" class="post__stat--icon" (click)="
                      setMentionFlag(
                        getMentionAction.LikeUnlike,
                        ticketHistoryData?.communicationLogProperty.likeStatus
                      );
                      $event.stopPropagation()
                    ">
                <mat-icon fontSet="material-icons-outlined" [ngClass]="{
                        colored__locobuzz:
                          ticketHistoryData?.communicationLogProperty.likeStatus == true
                      }">{{
                  ticketHistoryData?.communicationLogProperty.likeStatus
                  ? 'favorite'
                  : 'favorite_border'
                  }}</mat-icon>
              </span>
              <span class="post__stat--value">{{
                likeCount | numberFormatCommaSeperate
                }}</span>
            </div>
            <div *ngIf="ticketHistoryData?.communicationLogProperty.reTweetEnabled" class="mr-0 post__stat--item">
              <span [matMenuTriggerFor]="handleSelect" #clickhandleMenuTrigger="matMenuTrigger"
                [matMenuTriggerData]="{ type: 'Retweet by handle' }" (click)="
                      setMentionFlag(getMentionAction.RetweetUntweet, true, true);
                      $event.stopPropagation()
                    " class="post__stat--icon">
                <mat-icon fontSet="material-icons-outlined" [ngClass]="{
                        colored__locobuzz:
                          ticketHistoryData?.communicationLogProperty.retweetStatus
                      }">repeat</mat-icon>
              </span>
              <span class="post__stat--value">{{
                retweetCount | numberFormatCommaSeperate
                }}</span>
            </div>
        
            <!-- <div class="post__stat--item ml-auto"
                  *ngIf="post?.mentionCategoryTop && post?.mentionCategoryTop != '' && !ticketHistoryData?.showMarkactionable"
                  (click)="openCategoryDialog('mentionCategory'); $event.stopPropagation();">
                  <span class="post__stat--icon">
                    <mat-icon class="post__foot--icon mr-5" [ngClass]="{ 'colored__red': post?.mentionCatColor === getSentiment.Negative || post?.mentionCatColor === getSentiment.Mixed,'colored__green': post?.mentionCatColor === getSentiment.Positive,
                                      'colored__yellow--dark': post?.mentionCatColor === getSentiment.Neutral }"
                      fontSet="material-icons-outlined" aria-hidden="false" aria-label="speaker notes">speaker_notes
                    </mat-icon>
                  </span>
        
                  <span class="post__stat--value text-underline">{{ post?.mentionCategoryTop }}</span>
                </div> -->
          </div>
          <ng-template #otherChannels>
            <div class="post__stat--item" *ngIf="
                      postData?.channelGroup == channelGroupEnum.Youtube 
                  ">
              <div class="mr-10"
                *ngIf="ticketHistoryData?.communicationLogProperty.likeEnabled && (postData?.channelType == channelTypeEnum.YouTubePosts)">
                <span class="post__stat--icon" (click)="
                        mentionActionFlag=ticketHistoryData?.communicationLogProperty.likeStatus;likeDisLikePopup(selectedHandle)
                      ">
                  <mat-icon fontSet="material-icons-outlined">{{
                    ticketHistoryData?.communicationLogProperty.likeStatus
                    ? 'favorite'
                    : 'favorite_border'
                    }}</mat-icon>
                </span>
                <span class="post__stat--value">{{
                  likeCount | numberFormatCommaSeperate
                  }}</span>
              </div>
              <!-- <div>
                    <span class="post__stat--icon">
                      <mat-icon fontSet="material-icons-outlined">repeat</mat-icon>
                    </span>
                    <span class="post__stat--value">{{ticketHistoryData?.communicationLogProperty.shareCount}}</span>
                  </div> -->
            </div>
            <div class="post__stat--item parent-post colored__blue cursor-pointer" *ngIf="ticketHistoryData?.viewparentpost"
              (click)="openParentPost(); $event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined" [ngClass]="{'small-icon-font-size' : !defaultLayout}">arrow_upward</mat-icon>
              <span class="post__stat--value no-underline text-capitalize" [ngClass]="{'small_font-size' : !defaultLayout}">View Parent Post</span>
            </div>
          </ng-template>
        </div>
        <div class="" *ngIf="ticketHistoryData.isSSREPreview && showActionPerform && ticketHistoryData.isWorkflowEnabled">
          <div class="d-flex-items-center g-10 workflow-note-container py-5 pl-5 border-radius-2">
            <img src="assets/images/common/loader_color.svg" [ngClass]="{'small-image-width' : !defaultLayout}">
            <div>
              <p class="colored__purple--dark" [ngClass]="{'small_font-size' : !defaultLayout}">{{workflowProgressMessage}}</p>
            </div>
          </div>
        </div>
        <!-- SSRE Note -->
        <div class="post__note mt-10"
          *ngIf="ticketHistoryData?.isSSREPreview && showActionPerform && !ticketHistoryData.isWorkflowEnabled">
          <div class="post__note--head" [innerHTML]="ticketHistoryData?.SSREPreview.actionPerformed"></div>
          <div class="ssreBtn d-flex-items-center">
            <div class="post__note--body">
              <span class="post__note--body--info" [ngClass]="{'small_font-size' : !defaultLayout}" [innerHTML]="ticketHistoryData?.SSREPreview.messageContent"></span>
              <!-- ssre-buttons live -->
              <div class="post__note--body--action ml-auto" *ngIf="ticketHistoryData?.isLiveSSRE">
                <!-- <a class="btn__negative mr-9" matTooltip="Do Nothing" matTooltipClass="custom-tooltip" matTooltipPosition="above">
                      <mat-icon>hide_source</mat-icon>
                    </a> -->
                <a class="btn__negative mr-9" matTooltip="{{'wrong' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                  (click)="ssreLiveWrongPopupLogic(); $event.stopPropagation()">
                  <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">close</mat-icon>
                </a>
                <a class="btn__positive" matTooltip="{{'verify' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                  (click)="ssreLiveRightVerified(); $event.stopPropagation()">
                  <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">check</mat-icon>
                </a>
              </div>
              <!-- ssre-buttons simulation -->
              <div class="post__foot--item post__foot--itemaction" *ngIf="ticketHistoryData?.isSimulationSSRE">
                <a class="btn__negative mr-9" matTooltip="{{'wrong' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                  (click)="ssreSimulationWrongPopupLogic(); $event.stopPropagation()">
                  <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">close</mat-icon>
                </a>
                <a class="btn__positive" matTooltip="{{'right' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                  (click)="ssreSimulationRightPopupLogic(); $event.stopPropagation()">
                  <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">check</mat-icon>
                </a>
              </div>
            </div>
          </div>
        </div>
        <!-- Approve and Reject Note -->
        <div class="post__note" *ngIf="ticketHistoryData?.isMakerCheckerPreview && showActionPerform">
          <div class="post__note--head">
            <p class="post__note--title" [ngClass]="{'small_font-size' : !defaultLayout}" [innerHTML]="ticketHistoryData?.MakerCheckerPreview.actionPerformed"></p>
          </div>
          <div class="post__note--body">
            <span class="post__note--body--info" [ngClass]="{'small_font-size' : !defaultLayout}" [innerHTML]="ticketHistoryData?.MakerCheckerPreview.messageContent"
              style="overflow-wrap: anywhere; padding-right: 1.2rem;"></span>
        
            <!-- button for ticket action -->
            <div class="post__note--body--action ml-auto pt-0 pb-0 pr-0" *ngIf="ticketHistoryData?.isApproveRejectMakerChecker">
              <a class="btn__neutral mr-8" matTooltip="{{'Modify' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                (click)="replyModified(); $event.stopPropagation()">
                <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">edit</mat-icon>
              </a>
              <a class="btn__negative mr-8" matTooltip="{{'Reject' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                (click)="clearnote(); $event.stopPropagation()" [matMenuTriggerFor]="rejectnote">
                <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">close</mat-icon>
              </a>
              <a class="btn__positive" matTooltip="{{'Approve' | translate}}" matTooltipClass="custom-tooltip" matTooltipPosition="above"
                (click)="replyApproved(); $event.stopPropagation()">
                <mat-icon [ngClass]="{'small-icon-font-size' : !defaultLayout}">check</mat-icon>
              </a>
              <mat-menu #rejectnote="matMenu" class="note-elem__dropdown">
                <div class="note-elem pr-20 pl-20 pt-10">
                  <div class="note-elem__input" (click)="$event.stopPropagation()">
                    <mat-form-field appearance="outline" class="outline--none material__select material__select--adaptive">
                      <mat-label [ngClass]="{'small_font-size' : !defaultLayout}" class="text-capitalize dark__text__random">Add note<span class="colored__red">&nbsp;*</span>
                      </mat-label>
                      <textarea [ngClass]="{'small_font-size' : !defaultLayout}" matInput #txtArea [(ngModel)]="makercheckerrejectnote" appearance="outline" class="resize"
                        (ngModelChange)="noteTextChange(txtArea, 'makercheckerrejectnote')">
                          </textarea>
                    </mat-form-field>
                  </div>
                  <div class="note-elem__actions">
                    <button [ngClass]="{'small_font-size' : !defaultLayout}" mat-stroked-button (click)="CannedResponse(3); $event.stopPropagation()">
                      {{'Canned-Response' | translate}}
                    </button>
                    <button [ngClass]="{'small_font-size' : !defaultLayout}" mat-button color="accent" class="ml-auto">{{'Cancel' | translate}}</button>
                    <button [ngClass]="{'small_font-size' : !defaultLayout}" mat-button color="accent" (click)="replyRejected();">
                      {{'Save' | translate}}
                    </button>
                  </div>
                </div>
              </mat-menu>
            </div>
            <!-- ends ticket action -->
          </div>
        </div>
        
        <div class="post__note post__note--image" *ngIf="false">
          <img src="assets/images/media/media-1.jpg" srcset="assets/images/media/media-1.jpg" />
        </div>
      </div>
      <!-- safe content -->
    </ng-container>
    <!-- start tiktok -->
    <div class="post__body--content anywhere" *ngIf="false">
      <div class="d-flex">
        <div class="d-flex-items-center g-10 v2" style="flex-wrap: wrap">
          <div class="post__body--media position-relative w-100 mt-0 mr-10">
            <!-- ----------------{{ticketHistoryData |}} -->
            <img src="https://rb.gy/mihr89" class="cursor-pointer post__body--image tiktok-media one__images--preview"
              alt="Attachment" />
            <mat-icon class="video__play--icon">
              play_circle_outline
            </mat-icon>
          </div>
        </div>
        <p class="post__body--content-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.
          <span class="colored__locobuzz"> #tiktok #beattikto #dancemove #other </span> amet consectetur adipisicing elit
        </p>
      </div>
      <div class="d-flex-items-center g-12 mt-10">
        <span class="d-flex-items-center">
          <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">favorite_border</mat-icon> <span>12.5k</span>
        </span>
        <span class="d-flex-items-center">
          <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">textsms</mat-icon> <span>1k</span>
        </span>
        <span class="d-flex-items-center">
          <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">visibility</mat-icon> <span>1k</span>
        </span>
        <span class="d-flex-items-center">
          <mat-icon class="s-20 mr-4" fontSet="material-icons-outlined">share</mat-icon> <span>1k</span>
        </span>
      </div>
    </div>
    <!-- tiktok ends -->
    <ng-template>
      <div class="post__body--content">
        <p class="post__body--label">
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr.
        </p>
        <div class="post__body--more">
          <span>2</span>
        </div>
        <div class="post__body--email">
          <img class="post__body--profile" src="assets/social-mention/post/default_brand.svg" />
          <p>
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
            erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
            et ea rebum.
          </p>
        </div>
        <div class="post__body--email">
          <img class="post__body--profile" src="assets/social-mention/post/default_brand.svg" />
          <p>
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
            erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
            et ea rebum.
          </p>
        </div>
        <div class="post__body--email">
          <img class="post__body--profile" src="assets/social-mention/post/default_brand.svg" />
          <p>
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
            erat, sed diam voluptua. At vero eos et accusam et justo duo dolores
            et ea rebum.
          </p>
        </div>
      </div>
    </ng-template>

    <ng-container *ngFor="let item of postData?.attachmentMetadata?.mediaContents">
      <a href="{{item?.thumbUrl}}" target="_blank"
        *ngIf="item?.mediaType == MediaEnum.OTHER && postData?.channelGroup !== channelGroupEnum.Email && postData?.channelGroup !== channelGroupEnum.Pantip"
        class="colored__locobuzz">{{item?.thumbUrl}}</a>
      <ng-container
        *ngIf="postData?.channelGroup == channelGroupEnum.Telegram && (item?.mediaType ==  MediaEnum.PDF || item?.mediaType ==  MediaEnum.DOC || item?.mediaType ==  MediaEnum.EXCEL || item?.mediaType ==  MediaEnum.TEXT)">
        <div class="post__document--files files">

          <ng-container *ngIf="item?.mediaType == MediaEnum.PDF else dataDocOrExcels">
            <a [href]="item.mediaUrl" download="item.name" target="_blank" class="post__document--files-download download"
              (click)="$event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined">download</mat-icon>
            </a>
          </ng-container>
          <ng-template #dataDocOrExcels>
            <a [href]="item.mediaUrl" download="item.name" class="post__document--files-download download"
              (click)="$event.stopPropagation()">
              <mat-icon fontSet="material-icons-outlined">download</mat-icon>
            </a>
          </ng-template>


          <div class="post__document--files-icon"
            (click)="openAttachmentDocAndAudioPreviewForTelegram(item);$event.stopPropagation()">
            <img class="img" *ngIf="item.mediaType == MediaEnum.PDF" src="assets/images/account/pdf__icon.svg">
            <img class="img" *ngIf="item.mediaType == MediaEnum.DOC" src="assets/images/account/doc__icon.svg">
            <img class="img" *ngIf="item.mediaType == MediaEnum.EXCEL" src="assets/images/account/excl__icon.svg">
            <img class="img" *ngIf="item.mediaType == MediaEnum.TEXT" src="assets/images/chatbot/txt.svg">
          </div>
          <div class="post__document--files-name"
            (click)="openAttachmentDocAndAudioPreviewForTelegram(item);$event.stopPropagation()">
            <p class="document" [matTooltip]="item.name.length > 22 ? item.name : ''" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">{{item.name}}</p>
          </div>
        </div>
      </ng-container>
    </ng-container>
    <div #attachmentContainer class="d-flex g-10 v1" [ngClass] = "{'ml-auto': !defaultLayout && postData?.description && postData?.channelGroup != channelGroupEnum.Email}" style="flex-wrap: wrap">
      <div class="post__body--media position-relative " (click)="$event.stopPropagation()"
        *ngIf="(ticketHistoryData?.imageurls?.length > 0 && postData?.channelGroup !== channelGroupEnum.Email && postData?.channelGroup !== channelGroupEnum.Pantip)"
        [ngStyle]="{ display: ticketHistoryData?.imageurls[0] ? 'flex' : 'none' }">
        <!-- ----------------{{ticketHistoryData |}} -->
        <span class="position-relative" *ngIf="ticketHistoryData?.imageurls.length == 1" [ngClass]="{'w-48 h-48' : !defaultLayout}"
          [ngStyle]="{'width' : ticketHistoryData?.imageurls.length == 1 ? '100px' : '100%'}">
          <img matTooltip="{{'Click-to-view-the-image' | translate}}" class="w-70-p" matTooltipPosition="above"
            matTooltipClass="custom-tooltip"
            (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]); $event.stopPropagation()"
            *ngIf="ticketHistoryData?.imageurls[0].includes('WebHook/GetTwitterDMImage')"
            src="/assets/images/Image_Placeholder.png">
          <img *ngIf="!ticketHistoryData?.imageurls[0].includes('WebHook/GetTwitterDMImage')"
            class="cursor-pointer post__body--image one__images--preview" alt="Attachment"
            [src]="ticketHistoryData?.imageurls[0]"
            (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]); $event.stopPropagation()"
            [style.width.%]="95" />
          <div
            *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0]) && ticketHistoryData?.imageurls.length == 1">
            <mat-icon class="video__play--icon"
              (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation(); triggerWebhookForVideo();">
              play_circle_outline
            </mat-icon>
          </div>
        </span>
        <div *ngIf="ticketHistoryData?.imageurls.length == 2 && postData?.channelGroup !== channelGroupEnum.Pantip"
          class="height-100 post__body--image two__images--block"
          [ngStyle]="{'width':ticketHistoryData?.videoUrls.length >0 ? '130px' : ''}"
          (click)="$event.stopPropagation()">
          <span class="position-relative width-50">
            <img class="cursor-pointer height-100 two__images--preview border-radius-none"
              [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"
              [style.width.%]="100" />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
              <mat-icon class="video__play--icon"
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
          </span>
          <span class="position-relative width-50">
            <img class="cursor-pointer height-100 ml-5 two__images--preview border-radius-none"
              [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"
              [style.width.%]="100" />
            <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
              <mat-icon class="video__play--icon"
                (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                play_circle_outline
              </mat-icon>
            </div>
          </span>
        </div>

        <div *ngIf="ticketHistoryData?.imageurls.length == 3 && postData?.channelGroup !== channelGroupEnum.Pantip"
          class="height-100 three__images--block post__body--image" (click)="$event.stopPropagation()">
          <div class="three__images">
            <span class="position-relative w-100-p" [ngStyle]="{'width': !defaultLayout ? '4.8rem' : '100%', 'height': !defaultLayout ? '4.8rem' : '100%'}">
              <img class="cursor-pointer w-100-p height-100 three__images--preview border-radius-none"
                [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative" [ngStyle]="{'width': !defaultLayout ? '4.8rem' : '100%', 'height': !defaultLayout ? '4.8rem' : '100%'}">
              <img class="cursor-pointer w-100-p height-100 ml-5 three__images--preview border-radius-none"
                [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
          <div class="w-100-p three__images">
            <span class="position-relative" [ngStyle]="{'width': !defaultLayout ? '4.8rem' : '100%', 'height': !defaultLayout ? '4.8rem' : '100%'}">
              <img class="cursor-pointer width-100 height-100 three__images--full border-radius-none"
                [src]="ticketHistoryData?.imageurls[2]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[2])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
        </div>

        <div *ngIf="ticketHistoryData?.imageurls.length == 4 && postData?.channelGroup !== channelGroupEnum.Pantip"
          class="height-100 post__body--image four__images--block" (click)=" $event.stopPropagation()">
          <div class="four__images">
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 four__images--preview"
                [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 ml-5 four__images--preview"
                [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
          <div class="four__images">
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 four__images--preview"
                [src]="ticketHistoryData?.imageurls[2]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[2])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 ml-5 four__images--preview"
                [src]="ticketHistoryData?.imageurls[3]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[3])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
        </div>

        <div *ngIf="ticketHistoryData?.imageurls.length > 4 && postData?.channelGroup !== channelGroupEnum.Pantip"
          class="height-100 post__body--image more__images--block" (click)=" $event.stopPropagation()">
          <!-- last change -->
          <div class="more__images row-image">
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 more__images--preview border-radius-none"
                [src]="ticketHistoryData?.imageurls[0]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[0])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[0]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 ml-5 more__images--preview border-radius-none"
                [src]="ticketHistoryData?.imageurls[1]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[1])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[1]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
          </div>
          <div class="more__images row-image">
            <span class="position-relative w-100-p">
              <img class="cursor-pointer width-50 height-100 more__images--preview border-radius-none"
                [src]="ticketHistoryData?.imageurls[2]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2])"
                [style.width.%]="100" />
              <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[2])">
                <mat-icon class="video__play--icon"
                  (click)="openAttachmentPreview(ticketHistoryData?.imageurls[2]);$event.stopPropagation()">
                  play_circle_outline
                </mat-icon>
              </div>
            </span>
            <div class="post__body--image-more w-100-p height-100 ml-5">
              <span class="position-relative w-100-p">
                <img class="cursor-pointer w-100-p height-100 more__images--preview border-radius-none"
                  [src]="ticketHistoryData?.imageurls[3]" (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3])"
                  [style.width.%]="100" />
                <div *ngIf="ticketHistoryData?.newThumburls.includes(ticketHistoryData?.imageurls[3])">
                  <mat-icon class="video__play--icon" style="top: 4.5rem;"
                    (click)="openAttachmentPreview(ticketHistoryData?.imageurls[3]);$event.stopPropagation()">
                    play_circle_outline
                  </mat-icon>
                </div>
              </span>
              <div (click)="openAttachmentPreview(); $event.stopPropagation()"
                class="post__body--media-count media-count active border-radius-none"
                *ngIf="ticketHistoryData?.imageurls.length > 4">
                +{{ ticketHistoryData?.imageurls.length - 4 }}
              </div>
            </div>
          </div>
        </div>

      </div>
      <ng-container *ngIf="ticketHistoryData?.fileUrls?.length>0 && (postData.channelGroup != channelGroupEnum.Email)">
        <span (click)="$event.stopPropagation()" matTooltip={{file.fileName}} matTooltipPosition="above"
          matTooltipClass="custom-tooltip" *ngFor="let file of ticketHistoryData?.fileUrls" class="messages__attachFile">
          <span class="messages__attachFile--file" (click)="downloadTextFile(file)"
            *ngIf="file && file?.fileUrl && file?.fileUrl.endsWith('.txt'); else otherFile">
            <span class="d-flex-items-center">
              <img src="assets/images/other-attachment.svg" />
              <span class="messages__attachFile--name">{{file.fileName}}</span>
            </span>
            <a class="messages__attachFile--download">
              <mat-icon>file_download</mat-icon>
            </a>
          </span>
          <ng-template #otherFile>
            <span class="messages__attachFile--file">
              <span class="d-flex-items-center">
                <img src="assets/images/other-attachment.svg" />
                <span class="messages__attachFile--name">{{file.fileName}}</span>
              </span>
              <a class="messages__attachFile--download" [download]="file.fileName" href={{file.fileUrl}} target="_blank">
                <mat-icon>file_download</mat-icon>
              </a>
            </span>
          </ng-template>
        </span>
      </ng-container>
      <ng-container
        *ngIf="(ticketHistoryData?.videoUrls?.length > 0 && postData?.channelGroup !== channelGroupEnum.Email)">
        <div *ngFor="let mediaObj of ticketHistoryData?.videoUrls" class="post__body--media position-relative"
          (click)="openAttachmentPreview(mediaObj.thumbUrl); $event.stopPropagation()" [ngClass]="{'w-48' : !defaultLayout, 'h-48' : !defaultLayout, 'w-100' : defaultLayout, 'h-100' : defaultLayout }">
          <video class="w-100-p video object-cover" poster={{mediaObj.thumbUrl}} controls style="border-radius: 10px"
            width="100%" height="100%">
            <source [src]="mediaObj.fileUrl" type="video/mp4" />
            <source [src]="mediaObj.fileUrl" type="video/ogg" />
            Your browser does not support HTML video.
          </video>
          <mat-icon class="video__play--icon">play_circle_outline</mat-icon>
        </div>
      </ng-container>
      <!-- file attachment -->
      <ng-container *ngIf="postData?.channelGroup == channelGroupEnum.Email">
        <!-- <div class="post__document--files files" *ngFor="let file of ticketHistoryData?.documentUrls">

            <ng-container *ngIf="file?.mediaType == MediaEnum.PDF else dataDocOrExcels">
              <a [href]="file.fileUrl" download="file.fileName" target="_blank" class="post__document--files-download download"
                (click)="$event.stopPropagation()">
                <mat-icon fontSet="material-icons-outlined">download</mat-icon>
              </a>
            </ng-container>
            <ng-template #dataDocOrExcels>
              <a [href]="file.fileUrl" download="file.fileName" class="post__document--files-download download"
                (click)="$event.stopPropagation()">
                <mat-icon fontSet="material-icons-outlined">download</mat-icon>
              </a>
            </ng-template>
            
            
            <div class="post__document--files-icon" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
              <img class="img" *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/account/pdf__icon.svg">
              <img class="img" *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/account/doc__icon.svg">
              <img class="img" *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/account/excl__icon.svg">
            </div>          
            <div class="post__document--files-name" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
              <p class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
                matTooltipClass="custom__tooltip-normal">{{file.fileName}}</p>
              </div>
          </div> -->
        <div *ngIf="attachmentList?.length>0" (click)="$event.stopPropagation()"
          class="post-email__attachments mt-12 w-100-p">
          <div class="d-flex">
            <p class="font-weight-500">{{attachmentList?.length}} {{attachmentList?.length>1?'Attachments':'Attachment'}}
            </p>
            <a *ngIf="attachmentList?.length>1" [matTooltip]="'Download all attachments'" matTooltipPosition="above"
              matTooltipClass="custom-tooltip" class="file-download-all ml-auto" (click)="downloadAllFiles()">
              <mat-icon fontSet="material-icons-outlined">file_download</mat-icon>
            </a>
          </div>
          <div class="d-flex-items-center g-10 mt-6">
            <div (click)="openMediaPreview(obj,false)" #attachmentRef
              *ngFor="let obj of attachmentList | slice:0:maximumAttachmentLength ;index as i"
              class="d-flex-items-center pl-2 pr-5 py-2 file-pill h-30">
              <img class="w-21" [src]="obj.iconUrl" />
              <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                    class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                  <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                    class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                  <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                  <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                  <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
              <p class="cursor-pointer" [matTooltip]="obj.name" matTooltipClass="custom__tooltip-normal">{{ obj?.name |
                slice: 0:8 }}{{ obj?.name?.length
                > 8 ? '...' : '' }}</p>
              <mat-icon (click)="downloadFile(obj.mediaUrl,obj.name);$event.stopPropagation()"
                class="ml-6 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
            </div>
            <div *ngIf="showMoreAttachment">
              <span *ngIf="remainingCount>0" class="more-count cursor-pointer" (click)="$event.stopPropagation()"
                [matMenuTriggerFor]="attachmentMore">+{{remainingCount}}</span>
              <mat-menu #attachmentMore="matMenu" class="">
                <button mat-menu-item class="d-flex-items-center" (click)="openMediaPreview(obj,false)"
                  *ngFor="let obj of attachmentList | slice:maximumAttachmentLength:attachmentList.length ;index as i">
                  <!-- <mat-icon *ngIf="obj.mediaType==mediaEnum.PDF"
                        class="material-icons-outlined colored__red mr-6 font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
                      <mat-icon *ngIf="obj.mediaType==mediaEnum.IMAGE"
                        class="material-icons-outlined colored__purple mr-6 font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                      <img *ngIf="obj.mediaType==mediaEnum.EXCEL" class="w-21" src="assets/icons/excel-icon.svg">
                      <img *ngIf="obj.mediaType==mediaEnum.VIDEO" class="w-21" src="assets/icons/video-icon.svg">
                      <img *ngIf="obj.mediaType==mediaEnum.FILE" class="w-21" src="assets/images/other-attachment.svg" /> -->
                  <span class="d-flex-items-center">
                    <img class="w-21 mr-6" [src]="obj.iconUrl" />
                    <span class="more-count__text text__ellipsis" [matTooltip]="obj.name"
                      matTooltipClass="custom__tooltip-normal">
                      {{ obj?.name | slice: 0:15 }}{{ obj?.name?.length
                      > 15 ? '...' : '' }}</span>
                    <mat-icon (click)="downloadFile(obj.mediaUrl,obj.name);$event.stopPropagation()"
                      class="ml-auto mr-0 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
                  </span>
                </button>
              </mat-menu>
            </div>
            <!-- <div class="d-flex-items-center pl-2 pr-5 py-2 file-pill">
                                <mat-icon
                                    class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
                                <p>untitled_file.jpg</p>
                                <mat-icon class="ml-6 s-18 cursor-pointer" fontSet="material-icons-outlined">file_download</mat-icon>
                            </div>
                            <div class="d-flex-items-center g-3 pl-2 pr-5 py-4 file-pill">
                                <img class="w-21" src="assets/icons/excel-icon.svg">
                                <p>untitled_file.excl</p>
                                <mat-icon class="ml-6 s-18" fontSet="material-icons-outlined">close</mat-icon>
                            </div> -->
          </div>
        </div>
      </ng-container>
      <!-- ends file attachment -->
    </div>
    <div *ngIf="ticketHistoryData?.youtubeSanitizeUrlObject">
      <youtube-player [videoId]="ticketHistoryData?.youtubeSanitizeUrlObject" (ready)="savePlayer($event)"
        [playerVars]="playerVars" [height]="160" [width]="300">
    
      </youtube-player>
      <!-- <iframe [src]="ticketHistoryData?.youtubeSanitizeUrlObject"  frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->
    </div>
    <!-- <div class="post__body--media position-relative" *ngIf="postData?.channelGroup != channelGroupEnum.Email && ticketHistoryData?.documentUrls" [ngClass]="{
          'mt-30 ml-12': postData?.channelGroup == channelGroupEnum.Email
        }" [ngStyle]="{ display: ticketHistoryData?.documentUrls[0] ? 'flex' : 'none' }">
        <a *ngIf="ticketHistoryData?.documentUrls.length == 1" [href]="ticketHistoryData?.documentUrls[0].fileUrl"
          download="ticketHistoryData?.documentUrls[0].fileName" target="_blank" (click)="$event.stopPropagation()">
          <img class="cursor-pointer post__body--image" *ngIf="ticketHistoryData?.documentUrls.length == 1"
            [src]="ticketHistoryData?.documentUrls[0].thumbUrl" />
        </a>
        <mat-icon class="video__play--icon" *ngIf="videoIcon">play_circle_outline</mat-icon>
      </div> -->

    <div class="post__document"
      *ngIf="postData?.channelGroup != channelGroupEnum.Email && postData?.channelGroup != channelGroupEnum.Telegram && ticketHistoryData?.documentUrls.length > 0"
      [ngStyle]="{ display: ticketHistoryData?.documentUrls[0] ? 'flex' : 'none' }">
      <span class="post__document--files">
        <a *ngIf="ticketHistoryData?.documentUrls.length == 1" [href]="ticketHistoryData?.documentUrls[0].fileUrl"
          download="ticketHistoryData?.documentUrls[0].fileName" target="_blank" (click)="$event.stopPropagation()">
          <img *ngIf="ticketHistoryData?.documentUrls.length == 1" [src]="ticketHistoryData?.documentUrls[0].thumbUrl" />
          {{ticketHistoryData?.documentUrls[0].fileName}}
        </a>
      </span>
    </div>

    <div class="post__body--media position-relative"
      *ngIf="(ticketHistoryData?.audioUrls.length > 0 && postData?.channelGroup!==channelGroupEnum.Email) " [ngClass]="{
          'mt-30 ml-12': postData?.channelGroup == channelGroupEnum.Email
        }" [ngStyle]="{ display: ticketHistoryData?.audioUrls[0] ? 'block' : 'none' }">
      <img class="cursor-pointer post__body--image" *ngIf="ticketHistoryData?.audioUrls.length == 1"
        [src]="ticketHistoryData?.audioUrls[0].thumbUrl"
        (click)="openAttachmentDocAndAudioPreview(ticketHistoryData?.audioUrls[0].fileUrl); $event.stopPropagation()" />
      <mat-icon class="video__play--icon" *ngIf="videoIcon">play_circle_outline</mat-icon>
    </div>

    <!-- <div class="post__document" *ngIf="postData?.channelGroup == channelGroupEnum.Email && attchmentFlag">
        <span class="post__document--files" *ngFor="let file of ticketHistoryData?.documentUrls"> -->
    <!-- <a [href]="file.fileUrl" download="file.fileName" target="_blank" (click)="$event.stopPropagation()">
                  <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
                  <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
                  <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
                  <span class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
                    matTooltipClass="custom__tooltip-normal">{{file.fileName}}</span>
                </a> -->

    <!-- <a href="javascript:void(0);" (click)="openAttachmentDocAndAudioPreview(file);$event.stopPropagation()">
            <img *ngIf="file.mediaType == MediaEnum.PDF" src="assets/images/common/pdf.png">
            <img *ngIf="file.mediaType == MediaEnum.DOC" src="assets/images/common/word.png">
            <img *ngIf="file.mediaType == MediaEnum.EXCEL" src="assets/images/common/excel-file.png">
            <span class="document" [matTooltip]="file.fileName.length > 22 ? file.fileName : ''" matTooltipPosition="above"
              matTooltipClass="custom__tooltip-normal">
              {{file.fileName}}
            </span>
          </a>
        </span>
      </div> -->

    <!-- <div
        class="post__body--media position-relative"
        *ngIf="ticketHistoryData?.imageurls"
        [ngClass]="{
          'mt-30 ml-12': postData?.channelGroup == channelGroupEnum.Email
        }"
        [ngStyle]="{ display: ticketHistoryData?.imageurls[0] ? 'block' : 'none' }"
      >
        <img
          class="cursor-pointer"
          [src]="ticketHistoryData?.imageurls[0]"
          (click)="openAttachmentPreview(); $event.stopPropagation()"
        />
        <mat-icon class="video__play--icon" *ngIf="videoIcon"
          >play_circle_outline</mat-icon
        >
        <div
          (click)="openAttachmentPreview(); $event.stopPropagation()"
          class="post__body--media-count media-count"
          *ngIf="ticketHistoryData?.imageurls.length > 1"
        >
          +{{ ticketHistoryData?.imageurls.length - 1 }}
        </div>
      </div> -->
    <!-- <div class="post__body--media-video position-relative" *ngIf="ticketHistoryData?.videoUrls.length > 0"
        (click)="openAttachmentPreview(); $event.stopPropagation()" [ngStyle]="{
          display: ticketHistoryData?.videoUrls[0].fileUrl ? 'block' : 'none'
        }">
        <video class="video" controls style="border-radius: 10px">
          <source [src]="ticketHistoryData?.videoUrls[0].fileUrl" type="video/mp4" />
          <source [src]="ticketHistoryData?.videoUrls[0].fileUrl" type="video/ogg" />
          Your browser does not support HTML video.
        </video>
        <mat-icon class="video__play--icon" *ngIf="videoIcon">play_circle_outline</mat-icon>
      </div> -->
    
  
  </div>
</ng-container>
<!-- post new UI 2025, post content and post attachments side by side layout -->
<div class="border-top__light-grey mt-10" *ngIf="postData?.channelGroup == channelGroupEnum.Email && (selectedTicketView == 1)">
  <p class="my-5">3 {{'attachments' | translate}}</p>
  <div class="d-flex-items-center g-10">
    <div class="d-flex-items-center pl-2 pr-5 py-2 file-pill">
      <mat-icon class="material-icons-outlined colored__red font-size-18 d-flex-items-center justify-content__center">picture_as_pdf</mat-icon>
      <p>untitled_file.pdf</p>
    </div>
    <div class="d-flex-items-center pl-2 pr-5 py-2 file-pill">
      <mat-icon class="material-icons-outlined colored__purple font-size-18 d-flex-items-center justify-content__center">image</mat-icon>
      <p>untitled_file.jpg</p>
    </div>
    <div class="d-flex-items-center g-3 pl-2 pr-5 py-4 file-pill">
      <img class="w-21" src="assets/icons/excel-icon.svg">
      <p>untitled_file.excl</p>
    </div>
  </div>
</div>
<div class="d-flex-items-center justify-content__end mt-5 mr-4"
  *ngIf="pageType != PostsType?.TicketHistory && ((ticketHistoryData?.dispositionName && !defaultLayout) || (ticketHistoryData?.lastReply && !defaultLayout) || (showreplyDaysCounter && ticketHistoryData?.isReplyVisible && this.postData?.mentionTime && !defaultLayout))">
  <div class="pl-10 pb-0 cursor-default post__foot--minimalOptions" style="line-height: 11px;"
    *ngIf="ticketHistoryData?.dispositionName && !defaultLayout">
    <span class="post__foot--label d-flex-items-center">
      <img matTooltip="{{'Ticket-Disposition' | translate}}" matTooltipPosition="above" matTooltipClass="custom-tooltip"
        src="assets/images/common/Ticket_dispositions.svg"> <span class="ml-5"
        [ngClass]="{'small_font-size': !defaultLayout}">{{ticketHistoryData?.dispositionName}}</span>
    </span>
  </div>
  <div class="pl-10 pb-0 cursor-default post__foot--minimalOptions" style="line-height: 11px;"
    *ngIf="ticketHistoryData?.lastReply && !defaultLayout">
    <span class="post__foot--label d-flex-items-center g-5 place-content__end">
      <span class="post__foot--label text__label" [ngClass]="{'small_font-size': !defaultLayout}"> {{'Last-Reply' | translate}}: </span>
      <span [ngClass]="{'small_font-size': !defaultLayout,'font-weight-medium': !defaultLayout}">{{ticketHistoryData?.lastReply}}</span>
    </span>
  </div>
  <div class="pl-10 pb-0 cursor-default post__foot--minimalOptions" style="line-height: 11px;"
    [ngClass]="{'small_font-size': !defaultLayout}"
    *ngIf="showreplyDaysCounter && ticketHistoryData?.isReplyVisible && this.postData?.mentionTime && !defaultLayout">
    <app-replytimer [mentionTime]="this.postData?.mentionTime" [channelGroup]="this.postData?.channelGroup"
      [channelType]="this.postData?.channelType" [postType]="pageType" (TimerExpired)="TimerExpired()">
    </app-replytimer>
  </div>
</div>

  <div [ngClass]="{'post__foot--action-btn' : !defaultLayout}"
    *ngIf="ticketHistoryData?.replyString && pageType == PostsType.TicketHistory && !defaultLayout && !parentPostFlag"
    class="post__foot--item post__foot--itemaction cursor-default">
    <span>
      <img class="post__foot--icon img__fluid mr-0" [src]="ticketHistoryData?.replyTicketIcon" /> {{
      ticketHistoryData?.replyString }}
    </span>
  
  </div>
    

<!-- <div class="custom-overlay" #ticketDetail *ngIf="ticketDetailsPopup">
  <div class="cdk-overlay-backdrop cdk-overlay-dark-backdrop cdk-overlay-backdrop-showing"></div>
  <app-post-detail class="ticket-details__overlay"></app-post-detail>
</div> -->
