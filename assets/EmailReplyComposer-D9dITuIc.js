import{c as E,r as o,j as e,X as O,i as D,P as Le,I as De,k as Fe,u as ce,C as Be,A as _e,t as Ge,l as J,x as Pe,y as qe,z as We}from"./index-DqtLnMh1.js";import{I as He,L as V}from"./lock-BH57ZeJA.js";import{M as Ve}from"./minus-BczsAUEQ.js";import{E as Ke,S as Oe,F as Qe,I as Xe}from"./share-2-BqOaG2HX.js";import{E as xe}from"./eye-cCpQaZ4g.js";import{H as me,M as q}from"./message-circle-Bfa1UWit.js";import{E as he}from"./external-link-piAxCzlZ.js";import{U as ne}from"./user-AEg5BI1F.js";import{M as Je}from"./message-square-DbZmWq9p.js";import{M as Ye}from"./mail-Evx83ouU.js";import{S as se}from"./send-DmfBfJHb.js";import{U as Ze}from"./user-plus-BigIN7sF.js";const et=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],tt=E("at-sign",et);const st=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],te=E("badge-check",st);const at=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],ie=E("check-check",at);const lt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],B=E("chevron-up",lt);const rt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],nt=E("frown",rt);const it=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],dt=E("link",it);const ot=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ct=E("meh",ot);const xt=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ae=E("paperclip",xt);const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ue=E("smile",mt);const ht=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],ut=E("sticky-note",ht);const gt=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],pt=E("wand-sparkles",gt);function X({message:t,messageInsights:a,className:r=""}){const[f,l]=o.useState(!1),[m,g]=o.useState(!1);if(!a?.showInsights||!t.insights)return null;const u=n=>{switch(n?.toLowerCase()){case"positive":return{icon:ue,bg:"bg-green-500 dark:bg-green-600",text:"text-white",label:"Positive"};case"negative":return{icon:nt,bg:"bg-red-500 dark:bg-red-600",text:"text-white",label:"Negative"};case"neutral":default:return{icon:ct,bg:"bg-amber-400 dark:bg-amber-500",text:"text-white",label:"Neutral"}}},h=[];if(a.selectedInsights.sentiment&&t.insights.sentiment){const n=u(t.insights.sentiment),i=n.icon;h.push({id:"sentiment",content:e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-3 w-3"}),e.jsx("span",{children:n.label})]}),bgClass:`${n.bg} ${n.text}`})}if(a.selectedInsights.category&&t.insights.category&&h.push({id:"category",content:e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"h-3 w-3"}),e.jsx("span",{children:t.insights.category})]})}),a.selectedInsights.aspectGroups&&t.insights.aspectGroups&&t.insights.aspectGroups.length>0&&h.push({id:"aspectGroups",content:e.jsx("button",{onClick:n=>{n.stopPropagation(),g(!0)},className:"flex items-center gap-1 text-purple-700 dark:text-purple-300",children:e.jsxs("span",{children:[t.insights.aspectGroups.length," group",t.insights.aspectGroups.length>1?"s":""]})}),bgClass:"bg-purple-100 dark:bg-purple-950 hover:bg-purple-200 dark:hover:bg-purple-900"}),a.selectedInsights.aspects&&t.insights.aspects&&t.insights.aspects.length>0){const n=t.insights.aspectGroups?.flatMap(d=>d.aspects?.map(s=>s.aspect||s.name||s))||[],i=t.insights.aspects.filter(d=>{const s=typeof d=="string"?d:d.aspect||d.name;return!n.includes(s)}).length;i>0&&h.push({id:"aspects",content:e.jsx("button",{onClick:d=>{d.stopPropagation(),g(!0)},className:"flex items-center gap-1 text-blue-700 dark:text-blue-300",children:e.jsxs("span",{children:[i," ungrouped aspect",i>1?"s":""]})}),bgClass:"bg-blue-100 dark:bg-blue-950 hover:bg-blue-200 dark:hover:bg-blue-900"})}if(h.length===0)return null;const x=f?h:h.slice(0,2),k=h.length-2;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-center gap-1.5 overflow-hidden ${r}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[x.map(n=>e.jsx("div",{className:`flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] font-medium transition-all ${n.bgClass||"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:n.content},n.id)),!f&&k>0&&e.jsxs("div",{className:"flex items-center rounded-full bg-slate-200 px-2 py-0.5 text-[11px] text-slate-600 dark:bg-slate-700 dark:text-slate-400",children:["+",k]})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"max-h-[80vh] w-full max-w-2xl overflow-auto rounded-lg border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-900",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-4 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Message Aspects"}),e.jsx("button",{onClick:()=>g(!1),className:"rounded-lg p-1 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800 dark:hover:text-slate-300",children:e.jsx(O,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[t.insights.aspectGroups&&t.insights.aspectGroups.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:["Aspect Groups (",t.insights.aspectGroups.length,")"]}),e.jsx("div",{className:"space-y-3",children:t.insights.aspectGroups.map((n,i)=>e.jsxs("div",{className:"rounded-lg border border-purple-200 bg-purple-50 p-4 dark:border-purple-900 dark:bg-purple-950/30",children:[e.jsx("div",{className:"mb-2 font-medium text-purple-900 dark:text-purple-100",children:typeof n=="string"?n:n.name||n.group}),n.aspects&&n.aspects.length>0&&e.jsx("div",{className:"space-y-2",children:n.aspects.map((d,s)=>e.jsxs("div",{className:"flex items-start gap-3 rounded bg-white/50 p-2 text-sm dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:typeof d=="string"?d:d.aspect||d.name}),d.entity&&e.jsxs("div",{className:"mt-0.5 text-xs text-slate-600 dark:text-slate-400",children:["Entity: ",d.entity]})]}),d.opinion&&e.jsx("div",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${d.opinion==="positive"?"bg-green-100 text-green-700 dark:bg-green-950 dark:text-green-300":d.opinion==="negative"?"bg-red-100 text-red-700 dark:bg-red-950 dark:text-red-300":"bg-amber-100 text-amber-700 dark:bg-amber-950 dark:text-amber-300"}`,children:d.opinion})]},s))})]},i))})]}),t.insights.aspects&&t.insights.aspects.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ungrouped Aspects"}),e.jsx("div",{className:"space-y-2",children:t.insights.aspects.filter(n=>{const i=t.insights.aspectGroups?.flatMap(s=>s.aspects?.map(y=>y.aspect||y.name||y))||[],d=typeof n=="string"?n:n.aspect||n.name;return!i.includes(d)}).map((n,i)=>e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900 dark:bg-blue-950/30",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:typeof n=="string"?n:n.aspect||n.name}),n.entity&&e.jsxs("div",{className:"mt-0.5 text-xs text-slate-600 dark:text-slate-400",children:["Entity: ",n.entity]})]}),n.opinion&&e.jsx("div",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${n.opinion==="positive"?"bg-green-100 text-green-700 dark:bg-green-950 dark:text-green-300":n.opinion==="negative"?"bg-red-100 text-red-700 dark:bg-red-950 dark:text-red-300":"bg-amber-100 text-amber-700 dark:bg-amber-950 dark:text-amber-300"}`,children:n.opinion})]},i))})]})]})]})})]})}function bt({message:t,isCustomer:a,showSignatureDefault:r=!1,messageInsights:f}){const[l,m]=o.useState(r),[g,u]=o.useState(!1),[h,x]=o.useState(!1),[k,n]=o.useState(!1),i=t.emailMetadata,d=!i,s=i?.isInternal??!1,y=!a&&!d&&!s,v=i?.participantChanges&&(i.participantChanges.added?.length>0||i.participantChanges.removed?.length>0),M=i?.to?.length||0,N=i?.cc?.length||0,$=i?.bcc?.length||0,b=M+N+$,I=w=>new Date(w).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),T=a?"mr-12":"ml-12",j=d?"bg-purple-50/50 border-purple-200 dark:bg-purple-950/10 dark:border-purple-900":s?"bg-yellow-50/50 border-yellow-200 dark:bg-yellow-950/10 dark:border-yellow-900":y?"bg-blue-50/50 border-blue-100 dark:bg-blue-950/10 dark:border-blue-900":"bg-white border-slate-200 dark:bg-slate-900 dark:border-slate-700";return e.jsx("div",{className:`mb-4 ${T}`,children:e.jsxs("div",{className:`relative rounded-lg border shadow-sm ${j}`,children:[(y||d||s)&&e.jsxs("div",{className:"absolute right-0 top-0 flex items-center gap-1.5 rounded-bl-lg rounded-tr-lg border-b border-l border-slate-100/50 bg-white/50 px-3 py-1 text-[10px] font-bold uppercase tracking-wide text-slate-500 dark:border-slate-700/50 dark:bg-slate-800/50",children:[d&&e.jsx(ut,{size:10,className:"text-purple-600"}),s&&e.jsx(V,{size:10,className:"text-yellow-600"}),e.jsx("span",{children:d?"Internal Note":s?"Internal Email":"Agent Reply"})]}),e.jsx("div",{className:"px-4 py-3 md:px-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[t.author.avatarUrl?e.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"h-8 w-8 flex-shrink-0 rounded-full shadow-sm"}):e.jsx("div",{className:`flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full ${d?"bg-purple-200 dark:bg-purple-900":s?"bg-yellow-200 dark:bg-yellow-900":y?"bg-blue-200 dark:bg-blue-900":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300",children:t.author.name.charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex items-baseline justify-between gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:t.author.name}),e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:I(t.timestamp)})]})}),!d&&i&&e.jsxs("div",{className:"mt-0.5 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>x(!h),className:"flex w-fit items-center gap-1 text-xs text-slate-500 transition-colors hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200",children:[e.jsx("span",{className:"opacity-75",children:"to"}),e.jsx("span",{children:i.to?.[0]?.name||i.to?.[0]?.email?.split("@")[0]}),b>1&&e.jsxs("span",{className:"rounded bg-black/5 px-1 text-[10px] font-medium text-slate-600 dark:bg-white/5 dark:text-slate-400",children:["+",b-1," more"]}),e.jsx(D,{size:10,className:`opacity-50 transition-transform ${h?"rotate-180":""}`})]}),v&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.participantChanges.added?.map((w,A)=>e.jsxs("div",{className:"flex items-center gap-1 rounded-md border border-emerald-100 bg-emerald-50 px-2 py-0.5 text-xs text-emerald-700 dark:border-emerald-900 dark:bg-emerald-950/50 dark:text-emerald-400",children:[e.jsx(Le,{size:10}),e.jsxs("span",{children:["Added: ",w.name||w.email.split("@")[0]]})]},`add-${A}`)),i.participantChanges.removed?.map((w,A)=>e.jsxs("div",{className:"flex items-center gap-1 rounded-md border border-red-100 bg-red-50 px-2 py-0.5 text-xs text-red-700 dark:border-red-900 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(Ve,{size:10}),e.jsxs("span",{children:["Removed: ",w.name||w.email.split("@")[0]]})]},`rem-${A}`))]})]}),d&&e.jsx("div",{className:"mt-0.5 text-xs text-purple-600 dark:text-purple-400",children:"Internal note - not sent via email"}),!d&&h&&i&&e.jsxs("div",{className:"mt-2 animate-in fade-in slide-in-from-top-1 rounded border border-black/5 bg-black/5 p-2 text-xs text-slate-600 dark:border-white/5 dark:bg-white/5 dark:text-slate-400",children:[e.jsxs("div",{className:"mb-1 grid grid-cols-[24px_1fr] gap-1",children:[e.jsx("span",{className:"text-right text-slate-400",children:"To:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.to?.map((w,A)=>e.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:[w.email,";"]},A))})]}),N>0&&e.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-1",children:[e.jsx("span",{className:"text-right text-slate-400",children:"CC:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.cc?.map((w,A)=>e.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:[w.email,";"]},A))})]})]})]})]})}),e.jsx(X,{message:t,messageInsights:f,className:"border-t border-slate-100/50 px-4 py-1.5 pl-[60px] dark:border-slate-700/50 md:px-5 md:pl-[68px]"}),e.jsxs("div",{className:"px-4 pb-4 pl-[60px] md:px-5 md:pl-[68px]",children:[!d&&i?.isHtml&&i?.htmlContent&&e.jsx("div",{className:"mb-2",children:e.jsx("button",{onClick:()=>u(!g),className:"flex items-center gap-1 text-xs text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300",children:g?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-3 w-3"}),"View plain text"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-3 w-3"}),"View formatted email"]})})}),!d&&i?.isHtml&&i?.htmlContent&&g?e.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 leading-relaxed dark:prose-invert dark:text-slate-300",dangerouslySetInnerHTML:{__html:i.htmlContent}}):e.jsx("div",{className:"max-w-none text-sm leading-relaxed text-slate-800 whitespace-pre-wrap dark:text-slate-300",children:t.content}),t.hasAttachments&&t.attachments&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2 border-t border-slate-100/50 pt-3 dark:border-slate-700/50",children:t.attachments.map((w,A)=>e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700",children:[w.type==="image"?e.jsx(De,{size:16,className:"text-purple-600"}):e.jsx(Fe,{size:16,className:"text-blue-600"}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:"truncate font-medium text-slate-700 dark:text-slate-300",children:w.filename||"Attachment"}),w.size&&e.jsxs("span",{className:"text-xs text-slate-400",children:[(w.size/1024).toFixed(0)," KB"]})]})]},A))}),!d&&i?.quotedBody&&e.jsx("div",{className:"mt-3 pt-2",children:k?e.jsxs("div",{className:"relative mt-1 border-l-2 border-slate-200 pl-3 dark:border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",dangerouslySetInnerHTML:{__html:i.quotedBody}}),e.jsxs("button",{onClick:()=>n(!1),className:"mt-2 flex items-center gap-1 text-xs text-slate-400 hover:text-slate-600",children:[e.jsx(B,{size:12})," Hide"]})]}):e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-1 text-xs text-slate-400 transition-colors hover:text-slate-600 dark:hover:text-slate-300",children:[e.jsx(Ke,{size:12}),e.jsx("span",{children:"Show quoted text"})]})}),!d&&i?.hasSignature&&i?.signatureContent&&e.jsxs("div",{className:"mt-3 border-t border-slate-100/50 pt-2 dark:border-slate-700/50",children:[e.jsxs("button",{onClick:()=>m(!l),className:"flex items-center gap-1 text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",children:[l?e.jsx(B,{className:"h-3 w-3"}):e.jsx(D,{className:"h-3 w-3"}),l?"Hide signature":"Show signature"]}),l&&e.jsx("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:e.jsx("p",{className:"whitespace-pre-wrap",children:i.signatureContent.replace(/\\n/g,`
`)})})]})]})]})})}function ft({threadMetadata:t}){if(!t)return null;const a=t.originalParticipants.to?.length||0,r=t.originalParticipants.cc?.length||0;return e.jsxs("div",{className:"mb-4 border-b border-slate-200 pb-4 dark:border-slate-700",children:[e.jsx("h1",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:t.subject}),e.jsxs("div",{className:"mt-2 flex items-center gap-3 text-sm text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{children:[t.totalMessages," messages in thread"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Started by ",t.originalParticipants.from.name]}),r>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[a+r," participants"]})]})]})]})}function kt({message:t,isCustomer:a,showAvatar:r=!0,showTimestamp:f=!0,isFirstInGroup:l=!1,isLastInGroup:m=!1,messageInsights:g}){const u=t.chatMetadata,h=()=>{if(!u||a)return null;switch(u.deliveryStatus){case"sending":return e.jsx(Be,{className:"h-3 w-3 text-slate-400"});case"sent":return e.jsx(ce,{className:"h-3 w-3 text-slate-400"});case"delivered":return e.jsx(ie,{className:"h-3 w-3 text-slate-400"});case"read":return e.jsx(ie,{className:"h-3 w-3 text-blue-500"});case"failed":return e.jsx("span",{className:"text-xs text-red-500",children:"!"});default:return null}},x=k=>new Date(k).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return e.jsxs("div",{children:[e.jsxs("div",{className:`flex gap-2 ${a?"justify-start":"justify-end"}`,children:[a&&r&&l&&e.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"h-8 w-8 flex-shrink-0 rounded-full"}),a&&(!r||!l)&&e.jsx("div",{className:"w-8 flex-shrink-0"}),e.jsxs("div",{className:`max-w-[70%] ${a?"rounded-2xl rounded-tl-sm bg-slate-100 dark:bg-slate-800":"rounded-2xl rounded-tr-sm bg-blue-500 dark:bg-blue-600"}`,children:[l&&a&&e.jsx("div",{className:"px-3 pt-2 text-xs font-medium text-slate-600 dark:text-slate-400",children:t.author.name}),e.jsx("div",{className:"px-3 py-2",children:e.jsx("p",{className:`text-sm ${a?"text-slate-900 dark:text-slate-100":"text-white"}`,children:t.content})}),m&&f&&e.jsxs("div",{className:`flex items-center justify-end gap-1 px-3 pb-1 text-xs ${a?"text-slate-500 dark:text-slate-400":"text-blue-100 dark:text-blue-200"}`,children:[e.jsx("span",{children:x(t.timestamp)}),h()]})]})]}),m&&e.jsx(X,{message:t,messageInsights:g,className:`mt-1 ${a?"ml-10":"mr-10 flex justify-end"}`})]})}function vt({transition:t}){if(!t)return null;const a=r=>new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return e.jsxs("div",{className:"my-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-600"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-2 rounded-full shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Conversation moved to Direct Message"})]})})})]}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{children:["by ",e.jsx("span",{className:"font-medium",children:t.initiatorName})]})," • ",e.jsx("span",{children:a(t.timestamp)})," • ",e.jsx("span",{className:"capitalize",children:t.reasonText})]}),t.publicVisibilityStats&&e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-4 text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsxs("span",{children:[t.publicVisibilityStats.views.toLocaleString()," views"]})]}),e.jsxs("div",{children:[t.publicVisibilityStats.reactions," reactions"]}),e.jsxs("div",{children:[t.publicVisibilityStats.comments," comments"]})]})]})]})}function de({parentPostContext:t,threadNavigator:a}){const[r,f]=o.useState(!1);if(!t)return null;const{post:l,threadPosition:m,parentComment:g}=t,u=x=>{switch(x){case"normal":return"text-green-600 dark:text-green-400";case"high":return"text-yellow-600 dark:text-yellow-400";case"viral":return"text-orange-600 dark:text-orange-400";case"critical":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},h=x=>x>=1e6?`${(x/1e6).toFixed(1)}M`:x>=1e3?`${(x/1e3).toFixed(1)}K`:x.toString();return e.jsxs("div",{className:"mb-6",children:[!r&&e.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[l.media&&l.media[0]&&e.jsx("img",{src:l.media[0].thumbnailUrl||l.media[0].url,alt:"",className:"h-16 w-16 flex-shrink-0 rounded object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:l.author.avatarUrl,alt:l.author.name,className:"h-6 w-6 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:l.author.name}),l.author.isVerified&&e.jsx(te,{className:"h-4 w-4 text-blue-500"})]}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 line-clamp-2 dark:text-slate-400",children:l.content}),e.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"h-3 w-3"}),h(l.engagementMetrics.reactions.total)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),h(l.engagementMetrics.comments)]})]})]}),e.jsx("button",{onClick:()=>f(!0),className:"flex-shrink-0 rounded-lg bg-blue-500 px-3 py-2 text-sm font-medium text-white hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700",children:"View Full Thread"})]})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:l.author.avatarUrl,alt:l.author.name,className:"h-12 w-12 rounded-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:l.author.name}),l.author.isVerified&&e.jsx(te,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["@",l.author.username,l.author.followerCount&&e.jsxs("span",{children:[" • ",h(l.author.followerCount)," followers"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`rounded-full bg-slate-100 px-2 py-1 text-xs font-medium ${u(l.viralityIndicator)} dark:bg-slate-800`,children:l.viralityIndicator.toUpperCase()}),e.jsx("button",{onClick:()=>f(!1),className:"rounded-lg p-2 hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(B,{className:"h-4 w-4 text-slate-500"})})]})]}),e.jsx("div",{className:"mt-3 text-slate-900 dark:text-white",children:e.jsx("p",{className:"whitespace-pre-wrap",children:l.content})}),l.media&&l.media.length>0&&e.jsx("div",{className:"mt-3",children:l.media.map((x,k)=>e.jsx("img",{src:x.url,alt:x.altText,className:"w-full rounded-lg"},k))}),e.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-4 border-t border-slate-200 pt-4 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:h(l.engagementMetrics.reactions.total)}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reactions"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:h(l.engagementMetrics.comments)}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Comments"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:h(l.engagementMetrics.shares)}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Shares"})]}),l.engagementMetrics.reach&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:h(l.engagementMetrics.reach)}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reach"})]})]}),l.viralityReason&&e.jsx("div",{className:"mt-3 rounded-lg bg-yellow-50 p-2 text-xs text-yellow-800 dark:bg-yellow-950/20 dark:text-yellow-200",children:l.viralityReason}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsxs("a",{href:l.platformUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-slate-100 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:[e.jsx(he,{className:"h-4 w-4"}),"View on ",l.platform]})})]}),a&&e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800/50",children:[e.jsx("div",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Thread Navigation"}),e.jsx("div",{className:"mt-2 flex items-center gap-1 flex-wrap text-xs text-slate-600 dark:text-slate-400",children:a.breadcrumb.map((x,k)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:`${x.type==="current"?"font-medium text-slate-900 dark:text-white":"hover:text-slate-900 dark:hover:text-white"}`,disabled:!x.isClickable,children:x.label}),k<a.breadcrumb.length-1&&e.jsx(Ge,{className:"h-3 w-3 text-slate-400"})]},k))}),m&&e.jsxs("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Comment ",m.currentCommentNumber," of ",m.totalComments," • ","Nesting level: ",m.nestingLevel]}),g&&e.jsxs("div",{className:"mt-3 rounded-lg border-l-4 border-blue-500 bg-white p-3 dark:bg-slate-900",children:[e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Replying to ",e.jsx("span",{className:"font-medium",children:g.authorUsername})]}),e.jsx("p",{className:"mt-1 text-xs italic text-slate-700 dark:text-slate-300",children:g.contentSnippet}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:[g.reactions," reactions"]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[a.actions.canJumpToParent&&e.jsx("button",{className:"text-xs text-blue-600 hover:underline dark:text-blue-400",children:"Jump to parent comment ↑"}),a.actions.canViewFullThread&&e.jsxs("a",{href:a.actions.fullThreadUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline dark:text-blue-400",children:["Open full thread on ",l.platform," →"]})]})]})]})]})}function oe({publicPostContext:t}){const[a,r]=o.useState(!1);if(!t)return null;const f=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),l=m=>{switch(m){case"normal":return"bg-green-100 text-green-700 dark:bg-green-950 dark:text-green-300";case"high":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-950 dark:text-yellow-300";case"viral":return"bg-orange-100 text-orange-700 dark:bg-orange-950 dark:text-orange-300";case"critical":return"bg-red-100 text-red-700 dark:bg-red-950 dark:text-red-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}};return e.jsxs("div",{className:"mb-4",children:[!a&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[t.media&&t.media[0]&&e.jsx("img",{src:t.media[0].thumbnailUrl||t.media[0].url,alt:"",className:"h-12 w-12 flex-shrink-0 rounded object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"rounded-full bg-blue-500 px-2 py-0.5 text-xs font-medium text-white",children:"Public Post"}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:t.platform})]}),e.jsx("p",{className:"mt-1 text-sm text-blue-900 line-clamp-1 dark:text-blue-100",children:t.content}),e.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[f(t.engagementMetrics.reactions.total)," likes •"," ",f(t.engagementMetrics.comments)," comments"]})]}),e.jsx("button",{onClick:()=>r(!0),className:"flex-shrink-0 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"View full post"})]})}),a&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-white p-4 dark:border-blue-900 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.author.name}),t.author.isVerified&&e.jsx(te,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["@",t.author.username]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`rounded-full px-2 py-1 text-xs font-medium ${l(t.viralityIndicator)}`,children:t.viralityIndicator.toUpperCase()}),e.jsx("button",{onClick:()=>r(!1),className:"rounded-lg p-1 hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(B,{className:"h-4 w-4 text-slate-500"})})]})]}),e.jsx("div",{className:"mt-3 text-slate-900 dark:text-white",children:e.jsx("p",{className:"whitespace-pre-wrap",children:t.content})}),t.media&&t.media.length>0&&e.jsx("div",{className:"mt-3",children:t.media.map((m,g)=>e.jsx("img",{src:m.url,alt:m.altText,className:"w-full rounded-lg"},g))}),e.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-4 border-t border-slate-200 pt-3 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-900 dark:text-white",children:[e.jsx(me,{className:"h-4 w-4 text-red-500"}),f(t.engagementMetrics.reactions.total)]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reactions"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-900 dark:text-white",children:[e.jsx(q,{className:"h-4 w-4 text-blue-500"}),f(t.engagementMetrics.comments)]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Comments"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-900 dark:text-white",children:[e.jsx(Oe,{className:"h-4 w-4 text-green-500"}),f(t.engagementMetrics.shares)]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Shares"})]}),t.engagementMetrics.reach&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-900 dark:text-white",children:[e.jsx(xe,{className:"h-4 w-4 text-purple-500"}),f(t.engagementMetrics.reach)]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reach"})]})]}),t.viralityReason&&e.jsxs("div",{className:"mt-3 rounded-lg bg-yellow-50 px-3 py-2 text-xs text-yellow-800 dark:bg-yellow-950/20 dark:text-yellow-200",children:["⚠️ ",t.viralityReason]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-slate-200 pt-3 dark:border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(t.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}),e.jsxs("a",{href:t.platformUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs font-medium text-blue-600 hover:underline dark:text-blue-400",children:["View on ",t.platform,e.jsx(he,{className:"h-3 w-3"})]})]})]})]})}const jt={instagram:Xe,facebook:Qe,twitter:q,linkedin:q};function wt(t){const a=[];let r=[],f=null;return t.forEach(l=>{const m=new Date(l.timestamp),g=r.length>0&&r[0].author.id===l.author.id,u=f&&m.getTime()-f.getTime()<=120*1e3;g&&u?r.push(l):(r.length>0&&a.push(r),r=[l]),f=m}),r.length>0&&a.push(r),a}function zt({conversationThread:t,ticket:a,messageInsights:r}){const{mentions:f,replies:l,internalNotes:m}=t,g=[...f.map(s=>({...s,type:"mention"})),...l.map(s=>({...s,type:"reply"})),...m.map(s=>({...s,type:"note"}))].sort((s,y)=>new Date(s.timestamp).getTime()-new Date(y.timestamp).getTime()),u=a.interactionType==="email",h=a.interactionType==="chat-message",x=a.conversationTransition!==void 0,k=a.parentPostContext!==void 0,n=a.publicPostContext!==void 0;let i=-1;x&&a.conversationTransition&&(i=g.findIndex(s=>new Date(s.timestamp)>=new Date(a.conversationTransition.timestamp)));const d=jt[a.author.platform];if(h){const s=g.filter(v=>v.type==="mention"||v.type==="reply"),y=wt(s);return e.jsx("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-slate-950",children:e.jsxs("div",{className:"mx-auto max-w-3xl space-y-4 p-6",children:[k&&e.jsx(de,{parentPostContext:a.parentPostContext,threadNavigator:a.threadNavigator}),n&&e.jsx(oe,{publicPostContext:a.publicPostContext}),y.map((v,M)=>e.jsx("div",{className:"space-y-1",children:v.map((N,$)=>{const b=N.type==="mention",I=$===0,T=$===v.length-1;return e.jsx(kt,{message:N,isCustomer:b,showAvatar:!0,showTimestamp:!0,isFirstInGroup:I,isLastInGroup:T,messageInsights:r},N.id)})},M)),m.map(v=>e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-900/50 dark:bg-yellow-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-yellow-600 dark:text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-900 dark:text-yellow-100",children:"Internal Note"}),e.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:"•"}),e.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:v.author.name}),e.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-500",children:new Date(v.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("p",{className:"mt-1 text-sm text-yellow-900 dark:text-yellow-100",children:v.content}),v.mentions?.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:v.mentions.map((M,N)=>e.jsx("span",{className:"rounded bg-yellow-200 px-2 py-0.5 text-xs text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200",children:M},N))})]})]})},v.id))]})})}return e.jsx("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-slate-950",children:e.jsxs("div",{className:"mx-auto max-w-3xl space-y-6 p-6",children:[u&&a.emailThreadMetadata&&e.jsx(ft,{threadMetadata:a.emailThreadMetadata}),k&&e.jsx(de,{parentPostContext:a.parentPostContext,threadNavigator:a.threadNavigator}),n&&e.jsx(oe,{publicPostContext:a.publicPostContext}),g.map((s,y)=>{const v=x&&y===i;return e.jsxs("div",{children:[v&&e.jsx(vt,{transition:a.conversationTransition}),u&&(s.type==="mention"||s.type==="reply")&&e.jsx(bt,{message:s,isCustomer:s.type==="mention",messageInsights:r}),!u&&s.type==="mention"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-3",children:[s.author.avatarUrl?e.jsx("img",{src:s.author.avatarUrl,alt:s.author.name,className:"h-10 w-10 flex-shrink-0 rounded-full"}):e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx(ne,{className:"h-5 w-5 text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:s.author.name}),d&&e.jsx(d,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(s.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("div",{className:"mt-2 rounded-lg rounded-tl-none bg-slate-100 px-4 py-3 dark:bg-slate-800",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s.content})})]})]}),e.jsx(X,{message:s,messageInsights:r,className:"ml-[52px] mt-1"})]}),!u&&s.type==="reply"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-3",children:[s.author.avatarUrl?e.jsx("img",{src:s.author.avatarUrl,alt:s.author.name,className:"h-10 w-10 flex-shrink-0 rounded-full"}):e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-950",children:e.jsx(ne,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:s.author.name}),e.jsx("span",{className:"rounded bg-indigo-100 px-2 py-0.5 text-xs font-medium text-indigo-700 dark:bg-indigo-950 dark:text-indigo-300",children:"Agent"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(s.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("div",{className:"mt-2 rounded-lg rounded-tl-none bg-indigo-50 px-4 py-3 dark:bg-indigo-950/30",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s.content})})]})]}),e.jsx(X,{message:s,messageInsights:r,className:"ml-[52px] mt-1"})]}),s.type==="note"&&e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-900/50 dark:bg-yellow-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-yellow-600 dark:text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-900 dark:text-yellow-100",children:"Internal Note"}),e.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:"•"}),e.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:s.author.name}),e.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-500",children:new Date(s.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("p",{className:"mt-1 text-sm text-yellow-900 dark:text-yellow-100",children:s.content}),s.mentions?.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.mentions.map((M,N)=>e.jsx("span",{className:"rounded bg-yellow-200 px-2 py-0.5 text-xs text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200",children:M},N))})]})]})})]},s.id)}),g.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(q,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:"No conversation messages yet"})]})]})})}function le({isOpen:t,isLoading:a,suggestion:r,onUse:f,onDiscard:l}){const[m,g]=o.useState(!1);if(o.useEffect(()=>{if(!a&&r){const k=setTimeout(()=>g(!0),100);return()=>clearTimeout(k)}else g(!1)},[a,r]),!t)return null;const u=r?.isWithinKB??!1,h=u?"bg-gradient-to-br from-green-500/10 via-emerald-500/10 to-teal-500/10":"bg-gradient-to-br from-red-500/10 via-orange-500/10 to-rose-500/10",x=u?`radial-gradient(circle at 20% 50%, rgba(34, 197, 94, 0.1) 0%, transparent 50%),
       radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%)`:`radial-gradient(circle at 20% 50%, rgba(239, 68, 68, 0.1) 0%, transparent 50%),
       radial-gradient(circle at 80% 80%, rgba(249, 115, 22, 0.1) 0%, transparent 50%)`;return e.jsxs("div",{className:"absolute inset-0 z-30 overflow-hidden rounded-lg",children:[e.jsx("div",{className:`absolute inset-0 ${h} backdrop-blur-sm animate-in fade-in duration-300`,style:{backgroundImage:x}}),e.jsx("div",{className:"relative flex h-full items-center justify-center p-6",children:a?e.jsxs("div",{className:"flex flex-col items-center gap-6 animate-in fade-in zoom-in-95 duration-500",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 animate-spin-slow",children:e.jsx("div",{className:"h-20 w-20 rounded-full border-4 border-transparent border-t-indigo-500 border-r-purple-500"})}),e.jsx("div",{className:"absolute inset-2 animate-pulse",children:e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-indigo-500/20 to-purple-500/20"})}),e.jsx("div",{className:"relative flex h-20 w-20 items-center justify-center",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 shadow-lg shadow-indigo-500/50",children:e.jsx(pt,{className:"h-6 w-6 text-white animate-pulse"})})})]}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Crafting AI Response"}),e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Analyzing tone, empathy, and compliance..."})]}),e.jsx("div",{className:"flex gap-2",children:[0,1,2].map(k=>e.jsx("div",{className:"h-2 w-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:`${k*.15}s`,animationDuration:"1s"}},k))})]}):r?e.jsxs("div",{className:`flex w-full max-w-2xl flex-col gap-4 transition-all duration-500 ${m?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[e.jsxs("div",{className:`flex items-center justify-between rounded-t-xl border px-4 py-3 ${u?"border-green-200 bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50 dark:border-green-900 dark:from-green-950/50 dark:via-emerald-950/50 dark:to-teal-950/50":"border-red-200 bg-gradient-to-r from-red-50 via-orange-50 to-rose-50 dark:border-red-900 dark:from-red-950/50 dark:via-orange-950/50 dark:to-rose-950/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg shadow-lg ${u?"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/30":"bg-gradient-to-br from-red-500 to-orange-600 shadow-red-500/30"}`,children:e.jsx(J,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"AI-Optimized Response"}),r.tone&&e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:r.tone})]})]}),e.jsx("button",{onClick:l,className:"rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-slate-200/50 hover:text-slate-600 dark:hover:bg-slate-700/50 dark:hover:text-slate-300",children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx("div",{className:`max-h-[300px] overflow-y-auto rounded-lg border p-4 shadow-lg ${u?"border-green-200 bg-white dark:border-green-900 dark:bg-slate-900":"border-red-200 bg-white dark:border-red-900 dark:bg-slate-900"}`,children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx("p",{className:"leading-relaxed text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:r.content})})}),r.source&&e.jsxs("div",{className:"flex items-center gap-2 px-4",children:[e.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-slate-200 to-transparent dark:via-slate-700"}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Source: ",r.source]}),e.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-slate-200 to-transparent dark:via-slate-700"})]}),e.jsxs("div",{className:"flex gap-3 px-4 pb-4",children:[e.jsx("button",{onClick:l,className:"flex-1 rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 transition-all hover:bg-slate-50 hover:shadow-md dark:border-slate-600 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:"Discard"}),e.jsx("button",{onClick:()=>f(r.content),className:`group flex-1 rounded-lg px-4 py-2.5 text-sm font-medium text-white shadow-lg transition-all hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] ${u?"bg-gradient-to-r from-green-600 to-emerald-600 shadow-green-500/30 hover:shadow-green-500/40":"bg-gradient-to-r from-red-600 to-orange-600 shadow-red-500/30 hover:shadow-red-500/40"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),"Use This Response"]})})]})]}):null}),e.jsx("style",{children:`
        @keyframes spin-slow {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        @keyframes shimmer {
          0% {
            transform: translateX(-100%);
          }
          100% {
            transform: translateX(100%);
          }
        }

        .animate-spin-slow {
          animation: spin-slow 3s linear infinite;
        }

        .animate-shimmer {
          animation: shimmer 2s infinite;
        }

        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes zoom-in-95 {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        .animate-in {
          animation-fill-mode: both;
        }

        .fade-in {
          animation-name: fade-in;
        }

        .zoom-in-95 {
          animation-name: zoom-in-95;
        }

        .duration-300 {
          animation-duration: 300ms;
        }

        .duration-500 {
          animation-duration: 500ms;
        }
      `})]})}function Lt({onSendReply:t,onAddNote:a,ticketPlatform:r="x",mentionedUsers:f=[],enableAgentIQ:l=!0}){const[m,g]=o.useState("reply"),[u,h]=o.useState(""),[x,k]=o.useState(""),[n,i]=o.useState(!1),[d,s]=o.useState(f),[y,v]=o.useState(""),[M,N]=o.useState(!1),[$,b]=o.useState("idle"),[I,T]=o.useState(!1),[j,w]=o.useState(null),[A,_]=o.useState(0),[S,G]=o.useState(null),[U,P]=o.useState(!1),[W,H]=o.useState(!1),[K,F]=o.useState(null),z=r==="x",p=r==="whatsapp",ge=r==="facebook",pe=r==="instagram",be=r==="voice";o.useEffect(()=>{let c;return $==="checking"?c=setInterval(()=>{_(C=>{const L=C+.1;return L>=10?(b("timeout"),C):L})},100):_(0),()=>clearInterval(c)},[$]);const fe=async c=>{await new Promise(L=>setTimeout(L,2e3+Math.random()*2e3));const C=c.toLowerCase();return C.includes("cannot help")||C.includes("not something we support")||C.length<30?{outcome:"blocked",csatImpact:{current:8.1,predicted:4.7,delta:-3.4,trend:"declining"},empathyScore:{score:2,reasons:["Dismissive tone","No acknowledgment","Lacks helpful guidance"]},complianceChecks:[{name:"Brand Guidelines",status:"failed"},{name:"Content Policy",status:"flagged"},{name:"Fact Check",status:"verified"}],issues:[{severity:"critical",title:"Too Direct",description:"Tone is abrupt and dismissive"},{severity:"critical",title:"No Empathy",description:"Lacks emotional connection"},{severity:"critical",title:"Incomplete Resolution",description:"Customer question not addressed"}],suggestions:[{id:"sug-1",title:"Empathetic + Complete",content:"I understand this is important to you, and I appreciate you reaching out. While this specific request falls outside our current capabilities, I'd love to explore alternative approaches that could help achieve your goal. Let me suggest a few options that might work for you...",preview:"I understand this is important to you, and I appreciate you reaching out. While this specific request falls outside our current capabilities, I'd love to explore alternative approaches...",isWithinKB:!0,csatImprovement:4.8,tags:["Empathetic","Solution-focused"]}]}:C.includes("check our documentation")||C.includes("please check")||!C.includes("understand")&&!C.includes("appreciate")?{outcome:"warning",csatImpact:{current:8.1,predicted:6.5,delta:-1.6,trend:"declining"},empathyScore:{score:4,reasons:["Response lacks empathy","No personalized acknowledgment"]},complianceChecks:[{name:"Brand Guidelines",status:"flagged"},{name:"Content Policy",status:"passed"},{name:"Fact Check",status:"verified"}],issues:[{severity:"warning",title:"Low Empathy",description:"Lacks emotional connection"},{severity:"warning",title:"Missing Next Steps",description:"No clear guidance on what customer should do"}],suggestions:[{id:"sug-1",title:"Empathetic + Actionable",content:"I understand how frustrating this must be for you, and I genuinely want to help resolve this. While this specific request falls outside our current capabilities, I'd love to explore alternative approaches that could help you achieve your goal. Let me suggest a few options that might work for you...",preview:"I understand how frustrating this must be for you, and I genuinely want to help resolve this. While this specific request falls outside our current capabilities...",isWithinKB:!0,csatImprovement:1.8,tags:["Empathetic","Solution-focused"]}]}:{outcome:"approved",csatImpact:{current:8.1,predicted:8.3,delta:.2,trend:"improving"},empathyScore:{score:8,reasons:["Acknowledges customer concern","Provides clear next steps"]},complianceChecks:[{name:"Brand Guidelines",status:"passed"},{name:"Content Policy",status:"passed"},{name:"Fact Check",status:"verified"}],issues:[],suggestions:[]}},Y=async()=>{if(u.trim()){if(m==="note"){a?.(u),h("");return}if(G({content:u,statusAction:x||void 0,taggedUsers:z?d:void 0}),!l){Q(u,x||void 0,z?d:void 0);return}b("checking");try{const c=await fe(u);w(c),c.outcome==="approved"?(b("approved"),setTimeout(()=>{Q(u,x||void 0,z?d:void 0),b("idle")},1500)):(b(c.outcome),T(!0))}catch(c){console.error("Quality check failed:",c),b("error")}}},Q=(c,C,L)=>{t?.(c,C||void 0,L),h(""),k(""),G(null),w(null)},re=()=>{if(!y.trim())return;const c=y.startsWith("@")?y:`@${y}`;d.includes(c)||s([...d,c]),v(""),N(!1)},ke=c=>{s(d.filter(C=>C!==c))},Z=c=>{console.log(`Twitter action: ${c}`)},ve=()=>{T(!1),b("idle")},je=c=>{const C=j?.suggestions?.find(L=>L.id===c);C&&(h(C.content),T(!1),b("idle"))},we=c=>{console.log("Override justification:",c),S&&Q(S.content,S.statusAction||void 0,S.taggedUsers),T(!1),b("idle")},ye=()=>{console.log("Supervisor override requested"),alert("Supervisor override request sent. You will be notified when reviewed."),T(!1),b("idle")},Ne=()=>{b("checking"),_(0)},Se=()=>{console.log("Bypassing quality check"),S&&Q(S.content,S.statusAction||void 0,S.taggedUsers),b("idle")},Ce=()=>{b("idle"),G(null)},Ie=()=>{S&&Y()},Ae=async()=>{if(!u.trim()){alert("Please type a message first");return}P(!0),H(!0),F(null),await new Promise(C=>setTimeout(C,2e3+Math.random()*2e3));const c=Te(u);F({id:`ai-${Date.now()}`,content:c,tone:"Empathetic & Professional",source:"Knowledge Base"}),H(!1)},Te=c=>{const C=/^(hi|hello|hey|dear)/i.test(c),L=/(thanks|regards|sincerely|best)/i.test(c),Ue=/(understand|appreciate|sorry|apologize)/i.test(c);let R=c;if(C||(R=`Thank you for reaching out! ${R}`),!Ue&&R.length>50){const ee=R.split(/[.!?]+/).filter(ze=>ze.trim());ee.length>1&&(ee.splice(1,0," I understand how important this is to you, and I'm here to help"),R=ee.join(". ")+".")}return L||(R=`${R}

Please let me know if you have any questions. I'm happy to assist further!`),(R.toLowerCase().includes("cannot")||R.toLowerCase().includes("can't"))&&(R=R.replace(/cannot|can't/gi,"I'd love to explore alternative solutions for you. While this specific option isn't available,")),R},Me=c=>{h(c),P(!1),F(null)},$e=()=>{P(!1),F(null)},Re=c=>{switch(c){case"hold":return"Put on Hold";case"escalate":return"Escalate";case"awaiting":return"Awaiting Customer Response";default:return""}},Ee=()=>m==="note"?"Add Note":x?`Reply and ${Re(x)}`:"Send Reply";return e.jsxs("div",{className:"relative border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:[e.jsx(le,{isOpen:U,isLoading:W,suggestion:K,onUse:Me,onDiscard:$e}),e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>g("reply"),className:`flex items-center gap-2 border-b-2 px-4 py-3 text-sm font-medium transition-colors ${m==="reply"?"border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:[e.jsx(q,{className:"h-4 w-4"}),"Reply to Customer"]}),e.jsxs("button",{onClick:()=>g("note"),className:`flex items-center gap-2 border-b-2 px-4 py-3 text-sm font-medium transition-colors ${m==="note"?"border-yellow-600 text-yellow-600 dark:border-yellow-400 dark:text-yellow-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:[e.jsx(V,{className:"h-4 w-4"}),"Internal Note"]})]}),z&&m==="reply"&&e.jsxs("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 dark:border-slate-700 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Tagged Users"}),e.jsxs("button",{onClick:()=>N(!M),className:"flex items-center gap-1 rounded px-2 py-1 text-xs font-medium text-indigo-600 hover:bg-indigo-50 dark:text-indigo-400 dark:hover:bg-indigo-950/30",children:[e.jsx(tt,{className:"h-3 w-3"}),"Add User"]})]}),d.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:d.map(c=>e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-100 px-3 py-1 text-sm font-medium text-sky-700 dark:bg-sky-950 dark:text-sky-300",children:[c,e.jsx("button",{onClick:()=>ke(c),className:"rounded-full hover:bg-sky-200 dark:hover:bg-sky-900",children:e.jsx(O,{className:"h-3 w-3"})})]},c))}),M&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:y,onChange:c=>v(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),re())},placeholder:"@username",className:"flex-1 rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-900 dark:text-white"}),e.jsx("button",{onClick:re,className:"rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:"Add"}),e.jsx("button",{onClick:()=>{N(!1),v("")},className:"rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",children:"Cancel"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("textarea",{value:u,onChange:c=>h(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(c.metaKey||c.ctrlKey)&&Y()},placeholder:m==="reply"?z?"Type your reply... (Tagged users will be mentioned)":p?"Type your WhatsApp message...":ge?"Type your Facebook reply...":pe?"Type your Instagram reply...":be?"Log call notes or send follow-up message (if enabled)...":"Type your reply to the customer...":"Add an internal note (not visible to customer)...",rows:4,className:`w-full resize-none rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 ${m==="reply"?"border-slate-200 bg-white focus:border-indigo-500 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800":"border-yellow-200 bg-yellow-50 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-900 dark:bg-yellow-950/20"} dark:text-white dark:placeholder-slate-400`}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{title:"Attach file",className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800 dark:hover:text-slate-300",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{title:"Add emoji",className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800 dark:hover:text-slate-300",children:e.jsx(ue,{className:"h-5 w-5"})}),m==="reply"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-2 h-6 w-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("button",{onClick:Ae,disabled:!u.trim()||W,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 px-3 py-2 text-sm font-medium text-white shadow-sm transition-all hover:shadow-md hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-50 disabled:scale-100",title:"Get AI-improved version",children:[e.jsx(J,{className:"h-4 w-4"}),"AI Suggest"]})]}),z&&m==="reply"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-2 h-6 w-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("button",{onClick:()=>Z("dm"),title:"Suggest DM",className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium text-sky-600 hover:bg-sky-50 dark:text-sky-400 dark:hover:bg-sky-950/30",children:[e.jsx(Je,{className:"h-4 w-4"}),"Send DM"]}),e.jsxs("button",{onClick:()=>Z("email"),title:"Request email",className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium text-emerald-600 hover:bg-emerald-50 dark:text-emerald-400 dark:hover:bg-emerald-950/30",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Email"]}),e.jsxs("button",{onClick:()=>Z("feedback-link"),title:"Share feedback link",className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium text-purple-600 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-purple-950/30",children:[e.jsx(dt,{className:"h-4 w-4"}),"Feedback"]})]})]}),e.jsxs("div",{className:"flex items-center gap-0",children:[e.jsxs("button",{onClick:Y,disabled:!u.trim(),className:`flex items-center gap-2 rounded-lg rounded-r-none px-4 py-2 text-sm font-medium text-white transition-colors disabled:cursor-not-allowed disabled:opacity-50 ${m==="reply"?"bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600":"bg-yellow-600 hover:bg-yellow-700 dark:bg-yellow-600 dark:hover:bg-yellow-500"}`,children:[e.jsx(se,{className:"h-4 w-4"}),Ee()]}),m==="reply"&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>i(!n),className:"flex items-center rounded-lg rounded-l-none border-l border-indigo-500 bg-indigo-600 px-2 py-2 text-white transition-colors hover:bg-indigo-700 dark:border-indigo-400 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:e.jsx(D,{className:"h-4 w-4"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute bottom-full right-0 z-20 mb-2 w-64 overflow-hidden rounded-lg border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-700 dark:bg-slate-900",children:e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Reply + Action"})}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{k(""),i(!1)},className:`flex w-full items-center justify-between px-4 py-2.5 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${x===""?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:[e.jsx("span",{className:"font-medium",children:"Reply only"}),x===""&&e.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"✓"})]}),e.jsxs("button",{onClick:()=>{k("hold"),i(!1)},className:`flex w-full items-center justify-between px-4 py-2.5 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${x==="hold"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reply and Hold"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Pause ticket until follow-up needed"})]}),x==="hold"&&e.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"✓"})]}),e.jsxs("button",{onClick:()=>{k("escalate"),i(!1)},className:`flex w-full items-center justify-between px-4 py-2.5 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${x==="escalate"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reply and Escalate"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Assign to higher support tier"})]}),x==="escalate"&&e.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"✓"})]}),e.jsxs("button",{onClick:()=>{k("awaiting"),i(!1)},className:`flex w-full items-center justify-between px-4 py-2.5 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${x==="awaiting"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reply and Mark Awaiting"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Waiting for customer response"})]}),x==="awaiting"&&e.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"✓"})]})]})]})]})]})]})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Press"," ",e.jsx("kbd",{className:"rounded bg-slate-100 px-1.5 py-0.5 font-mono text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:"⌘"})," ","+"," ",e.jsx("kbd",{className:"rounded bg-slate-100 px-1.5 py-0.5 font-mono text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:"Enter"})," ","to send"]})]}),l&&$!=="idle"&&!I&&e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-4 py-3 dark:border-slate-700 dark:bg-slate-800/30",children:e.jsx(Pe,{status:$,elapsedTime:A,onKeepWaiting:Ne,onSendWithoutCheck:Se,onCancel:Ce,onRetry:Ie})}),I&&j&&e.jsx(qe,{isOpen:I,onClose:()=>T(!1),outcome:j.outcome,currentResponse:S?.content||u,csatImpact:j.csatImpact,empathyScore:j.empathyScore,complianceChecks:j.complianceChecks,issues:j.issues,suggestions:j.suggestions,isLoadingSuggestions:!1,canOverride:j.outcome==="warning",onEditManually:ve,onSendAnyway:j.outcome==="warning"?we:void 0,onApplySuggestion:je,onRequestSupervisorOverride:j.outcome==="blocked"?ye:void 0})]})}function Dt({aiSuggestions:t=[],defaultTo:a="",defaultCc:r=[],onSendReply:f,onAddNote:l,onPopOut:m}){const[g,u]=o.useState("reply"),[h,x]=o.useState(""),[k,n]=o.useState(!1),[i,d]=o.useState(a),[s,y]=o.useState(r?.join("; ")??""),[v,M]=o.useState(""),[N,$]=o.useState(!1),[b,I]=o.useState(""),[T,j]=o.useState(!1),[w,A]=o.useState(!1),[_,S]=o.useState(null),[G,U]=o.useState(!1),P=()=>{h.trim()&&(g==="reply"?f?.(h,{to:i,cc:s.split(";").map(p=>p.trim()).filter(Boolean),bcc:v.split(";").map(p=>p.trim()).filter(Boolean)},b||void 0):l?.(h),x(""),U(!1),S(null),I(""))},W=p=>{switch(p){case"hold":return"Put on Hold";case"escalate":return"Escalate";case"awaiting":return"Awaiting Customer Response";default:return""}},H=()=>g==="note"?"Add Note":b?`Reply and ${W(b)}`:"Send Reply",K=()=>{if(!h.trim())return;A(!0),U(!0);const p=2e3+Math.random()*2e3;setTimeout(()=>{t&&t.length>0?S(t[0]):S({id:"ai-generated",content:`I understand your concern and I'm here to help. ${h} I'll make sure to address this promptly and keep you updated throughout the process. Please let me know if there's anything specific you'd like me to prioritize.`,tone:"friendly",source:"Knowledge Base - Email Response Guidelines",isWithinKB:!0}),A(!1)},p)},F=p=>{x(p),U(!1),S(null)},z=()=>{U(!1),S(null)};return e.jsxs("div",{className:"relative border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>u("reply"),className:`flex items-center gap-2 border-b-2 px-4 py-3 text-sm font-medium transition-colors ${g==="reply"?"border-indigo-600 text-indigo-600 dark:border-indigo-400 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:[e.jsx(q,{className:"h-4 w-4"}),"Reply"]}),e.jsxs("button",{onClick:()=>u("note"),className:`flex items-center gap-2 border-b-2 px-4 py-3 text-sm font-medium transition-colors ${g==="note"?"border-yellow-600 text-yellow-600 dark:border-yellow-400 dark:text-yellow-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:[e.jsx(V,{className:"h-4 w-4"}),"Internal Note"]})]}),e.jsx("div",{className:"flex items-center gap-1 px-2",children:e.jsx("button",{onClick:m,className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-300",title:"Pop out editor",children:e.jsx(We,{className:"h-4 w-4"})})})]}),g==="reply"&&e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>n(!k),className:"flex w-full items-center justify-between px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsxs("span",{children:["To: ",i||"Select recipient"]}),s&&e.jsxs("span",{className:"text-slate-400",children:["• CC: ",s.split(";").length," people"]}),v&&e.jsxs("span",{className:"text-slate-400",children:["• BCC: ",v.split(";").length," people"]})]}),k?e.jsx(B,{className:"h-4 w-4 text-slate-400"}):e.jsx(D,{className:"h-4 w-4 text-slate-400"})]}),k&&e.jsxs("div",{className:"space-y-3 bg-slate-50 px-4 py-3 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-12 flex-shrink-0 text-sm font-medium text-slate-500 dark:text-slate-400",children:"To:"}),e.jsx("input",{type:"text",value:i,onChange:p=>d(p.target.value),placeholder:"recipient@email.com",className:"flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:placeholder-slate-500"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-12 flex-shrink-0 text-sm font-medium text-slate-500 dark:text-slate-400",children:"CC:"}),e.jsx("input",{type:"text",value:s,onChange:p=>y(p.target.value),placeholder:"email1@example.com; email2@example.com",className:"flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:placeholder-slate-500"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-12 flex-shrink-0 text-sm font-medium text-slate-500 dark:text-slate-400",children:"BCC:"}),e.jsx("input",{type:"text",value:v,onChange:p=>M(p.target.value),placeholder:"hidden@example.com",className:"flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:placeholder-slate-500"})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("textarea",{value:h,onChange:p=>x(p.target.value),placeholder:g==="reply"?"Write your reply...":"Add internal note...",rows:N?8:4,className:`w-full resize-none rounded-lg border px-4 py-3 text-sm placeholder-slate-400 focus:outline-none focus:ring-2 ${g==="reply"?"border-slate-200 bg-white focus:border-indigo-500 focus:ring-indigo-500/20 dark:border-slate-700 dark:bg-slate-800":"border-yellow-200 bg-yellow-50 focus:border-yellow-500 focus:ring-yellow-500/20 dark:border-yellow-900 dark:bg-yellow-950/20"} text-slate-900 dark:text-white dark:placeholder-slate-500`}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-300",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(!N),className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-300",title:N?"Collapse editor":"Expand editor",children:N?e.jsx(D,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})}),e.jsxs("button",{onClick:K,disabled:!h.trim()||w,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 px-3 py-2 text-sm font-medium text-white shadow-md transition-all hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50",title:"Get AI-improved suggestion",children:[e.jsx(J,{className:"h-4 w-4"}),"AI Suggest"]})]}),e.jsxs("div",{className:"flex items-center gap-0",children:[e.jsxs("button",{onClick:P,disabled:!h.trim(),className:`flex items-center gap-2 rounded-lg rounded-r-none px-4 py-2 text-sm font-medium transition-colors disabled:cursor-not-allowed disabled:opacity-50 ${g==="reply"?"bg-indigo-600 text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600":"bg-yellow-600 text-white hover:bg-yellow-700 dark:bg-yellow-500 dark:hover:bg-yellow-600"}`,children:[e.jsx(se,{className:"h-4 w-4"}),H()]}),g==="reply"&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>j(!T),className:"flex items-center rounded-lg rounded-l-none border-l border-indigo-500 bg-indigo-600 px-2 py-2 text-white transition-colors hover:bg-indigo-700 dark:border-indigo-400 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:e.jsx(D,{className:"h-4 w-4"})}),T&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),e.jsxs("div",{className:"absolute bottom-full right-0 z-20 mb-1 w-56 rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{onClick:()=>{I(""),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b===""?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Reply only"}),e.jsx("button",{onClick:()=>{I("hold"),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b==="hold"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Put on Hold"}),e.jsx("button",{onClick:()=>{I("escalate"),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b==="escalate"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Escalate"}),e.jsx("button",{onClick:()=>{I("awaiting"),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b==="awaiting"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Awaiting Customer Response"})]})]})]})]})]})]}),e.jsx(le,{isOpen:G,isLoading:w,suggestion:_,onUse:F,onDiscard:z})]})}function Ft({isOpen:t,onClose:a,aiSuggestions:r=[],defaultTo:f="",defaultCc:l=[],defaultSubject:m="",onSend:g}){const[u,h]=o.useState(f),[x,k]=o.useState(l?.join("; ")??""),[n,i]=o.useState(""),[d]=o.useState(m),[s,y]=o.useState(""),[v,M]=o.useState(!1),[N,$]=o.useState(!1),[b,I]=o.useState(""),[T,j]=o.useState(!1),[w,A]=o.useState(!1),[_,S]=o.useState(null),[G,U]=o.useState(!1);if(!t)return null;const P=()=>{g?.({to:u,cc:x.split(";").map(p=>p.trim()).filter(Boolean),bcc:n.split(";").map(p=>p.trim()).filter(Boolean),subject:d,content:s,statusAction:b||void 0}),a()},W=p=>{switch(p){case"hold":return"Put on Hold";case"escalate":return"Escalate";case"awaiting":return"Awaiting Customer Response";default:return""}},H=()=>b?`Send and ${W(b)}`:"Send",K=()=>{if(!s.trim())return;A(!0),U(!0);const p=2e3+Math.random()*2e3;setTimeout(()=>{r&&r.length>0?S(r[0]):S({id:"ai-generated",content:`I understand your concern and I'm here to help. ${s} I'll make sure to address this promptly and keep you updated throughout the process. Please let me know if there's anything specific you'd like me to prioritize.`,tone:"friendly",source:"Knowledge Base - Email Response Guidelines",isWithinKB:!0}),A(!1)},p)},F=p=>{y(p),U(!1),S(null)},z=()=>{U(!1),S(null)};return v?e.jsx("div",{className:"fixed bottom-0 right-6 z-50 w-80",children:e.jsxs("button",{onClick:()=>M(!1),className:"flex w-full items-center justify-between rounded-t-lg bg-slate-900 px-4 py-3 text-white shadow-2xl hover:bg-slate-800 dark:bg-slate-100 dark:text-slate-900 dark:hover:bg-slate-200",children:[e.jsx("span",{className:"font-medium",children:"Compose Reply"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("button",{onClick:p=>{p.stopPropagation(),a()},className:"rounded p-1 hover:bg-slate-700 dark:hover:bg-slate-300",children:e.jsx(O,{className:"h-4 w-4"})})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:a}),e.jsxs("div",{className:"relative fixed bottom-0 right-6 z-50 flex w-[600px] flex-col rounded-t-xl bg-white shadow-2xl dark:bg-slate-900",style:{maxHeight:"90vh"},children:[e.jsxs("div",{className:"flex items-center justify-between rounded-t-xl bg-slate-900 px-4 py-3 text-white dark:bg-slate-100 dark:text-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-medium",children:"Compose Reply"}),!N&&f&&e.jsxs("span",{className:"text-xs opacity-70",children:["to ",f.split("@")[0]]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>M(!0),className:"rounded p-1.5 hover:bg-slate-700 dark:hover:bg-slate-200",title:"Minimize",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx("button",{onClick:a,className:"rounded p-1.5 hover:bg-slate-700 dark:hover:bg-slate-200",title:"Close",children:e.jsx(O,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"To:"}),N?e.jsx("input",{type:"text",value:u,onChange:p=>h(p.target.value),placeholder:"recipient@email.com",className:"flex-1 border-0 bg-transparent p-0 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-0 dark:text-white dark:placeholder-slate-500"}):e.jsxs("button",{onClick:()=>$(!0),className:"flex-1 text-left text-slate-900 hover:text-indigo-600 dark:text-white dark:hover:text-indigo-400",children:[f||"Select recipient",x&&e.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"+CC"})]})]}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"CC:"}),e.jsx("input",{type:"text",value:x,onChange:p=>k(p.target.value),placeholder:"Optional",className:"flex-1 border-0 bg-transparent p-0 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-0 dark:text-white dark:placeholder-slate-500"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"BCC:"}),e.jsx("input",{type:"text",value:n,onChange:p=>i(p.target.value),placeholder:"Optional",className:"flex-1 border-0 bg-transparent p-0 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-0 dark:text-white dark:placeholder-slate-500"})]})]}),d&&e.jsxs("div",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:["Re: ",d]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("textarea",{value:s,onChange:p=>y(p.target.value),placeholder:"Write your email...",className:"h-full min-h-[300px] w-full resize-none border-0 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-0 dark:bg-slate-900 dark:text-white dark:placeholder-slate-500",autoFocus:!0})}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 p-3 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",children:[e.jsx(ae,{className:"h-4 w-4"}),"Attach"]}),e.jsxs("button",{onClick:K,disabled:!s.trim()||w,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 px-3 py-1.5 text-sm font-medium text-white shadow-md transition-all hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-50",title:"Get AI-improved suggestion",children:[e.jsx(J,{className:"h-4 w-4"}),"AI Suggest"]})]}),e.jsxs("div",{className:"flex items-center gap-0",children:[e.jsxs("button",{onClick:P,disabled:!s.trim()||!u.trim(),className:"flex items-center gap-2 rounded-lg rounded-r-none bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(se,{className:"h-4 w-4"}),H()]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>j(!T),className:"flex items-center rounded-lg rounded-l-none border-l border-indigo-500 bg-indigo-600 px-2 py-2 text-white transition-colors hover:bg-indigo-700",children:e.jsx(D,{className:"h-4 w-4"})}),T&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),e.jsxs("div",{className:"absolute bottom-full right-0 z-20 mb-1 w-56 rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{onClick:()=>{I(""),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b===""?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Send only"}),e.jsx("button",{onClick:()=>{I("hold"),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b==="hold"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Put on Hold"}),e.jsx("button",{onClick:()=>{I("escalate"),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b==="escalate"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Escalate"}),e.jsx("button",{onClick:()=>{I("awaiting"),j(!1)},className:`flex w-full items-center px-4 py-2 text-left text-sm transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${b==="awaiting"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:"Awaiting Customer Response"})]})]})]})]})]}),e.jsx(le,{isOpen:G,isLoading:w,suggestion:_,onUse:F,onDiscard:z})]})]})}export{zt as C,Dt as E,Lt as R,Ft as a};
