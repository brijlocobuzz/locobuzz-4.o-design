import{c as K,r as B,j as e,i as ne,t as Se,C as V,f as ee,M as Ae,m as Te,u as U,s as $e}from"./index-DqtLnMh1.js";import{B as Be}from"./bell-D6IiNm7z.js";import{C as Me}from"./circle-check-DG_ZY5e7.js";import{H as te,D as Pe,F as Fe,a as Le}from"./FilterBar-Bn0FMzmF.js";import{Z as se}from"./zap-BbrSrNXt.js";import{M as D}from"./message-square-DbZmWq9p.js";import{M as Re}from"./mail-Evx83ouU.js";import{C as ze}from"./calendar-CuYHr2BZ.js";import{C as Ee}from"./chart-column-C6TMB1aU.js";import{U as ae}from"./user-AEg5BI1F.js";import{T as De}from"./tag-SzIbadAA.js";import{H as Ge}from"./message-circle-Bfa1UWit.js";import{M as Oe}from"./minus-BczsAUEQ.js";import{T as Ie}from"./trending-up-oSIESFBK.js";import{C as Ue,E as He,R as We}from"./EmailReplyComposer-D9dITuIc.js";import{E as _e}from"./eye-cCpQaZ4g.js";import{E as qe}from"./user-plus-BigIN7sF.js";import{S as Ke}from"./sliders-horizontal-C7K7Qdy9.js";import"./settings-Cww9PT4y.js";import"./chevron-left-D81Bsy-1.js";import"./lock-BH57ZeJA.js";import"./share-2-BqOaG2HX.js";import"./external-link-piAxCzlZ.js";import"./send-DmfBfJHb.js";const Qe=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Ze=K("building-2",Qe);const Ye=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Je=K("folder",Ye);const Xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ve=K("target",Xe);function et({views:t,activeView:x,onViewChange:u}){const[h,b]=B.useState({"assigned-me":!0,"my-team":!0,unassigned:!0}),s=t.filter(n=>n.category==="status"),r=t.filter(n=>n.category==="sla"),o=t.filter(n=>n.category==="custom"),k=t.find(n=>n.id==="view-assigned-me"),l=t.find(n=>n.id==="view-my-team"),c=t.find(n=>n.id==="view-unassigned"),f=n=>{switch(n){case"red":return"text-red-600 dark:text-red-400";case"yellow":return"text-yellow-600 dark:text-yellow-400";case"orange":return"text-orange-600 dark:text-orange-400";default:return"text-slate-600 dark:text-slate-400"}},a=n=>{b(m=>({...m,[n]:!m[n]}))},i=(n,m,y)=>{if(!m)return null;const S=h[n];return e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>a(n),className:`
            w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-base font-semibold transition-colors
            ${x===m.id?"bg-indigo-50 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300":"text-slate-900 dark:text-slate-100 hover:bg-slate-50 dark:hover:bg-slate-900"}
          `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[S?e.jsx(ne,{className:"h-4 w-4 text-slate-400"}):e.jsx(Se,{className:"h-4 w-4 text-slate-400"}),y]}),m.count>0&&e.jsx("span",{className:`
              text-xs px-2 py-0.5 rounded-full font-medium
              ${x===m.id?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}
            `,children:m.count})]}),S&&e.jsxs("div",{className:"mt-2",children:[s.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-6 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] font-medium text-slate-400 dark:text-slate-500 uppercase tracking-wider whitespace-nowrap origin-center -rotate-90",children:"Status"})}),e.jsx("div",{className:"ml-6 space-y-0.5",children:s.map(g=>e.jsxs("button",{onClick:()=>u?.(g.id),className:`
                        w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-sm transition-colors
                        ${x===g.id?"bg-indigo-50 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-900"}
                      `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:g.color?f(g.color):"",children:"â—"}),g.name]}),g.count>0&&e.jsx("span",{className:`
                          text-xs px-1.5 py-0.5 rounded-full
                          ${x===g.id?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400"}
                        `,children:g.count})]},g.id))})]}),r.length>0&&e.jsxs("div",{className:"relative mt-2",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-6 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] font-medium text-slate-400 dark:text-slate-500 uppercase tracking-wider whitespace-nowrap origin-center -rotate-90",children:"SLA"})}),e.jsx("div",{className:"ml-6 space-y-0.5",children:r.map(g=>e.jsxs("button",{onClick:()=>u?.(g.id),className:`
                        w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-sm transition-colors
                        ${x===g.id?"bg-indigo-50 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-900"}
                      `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:g.color?f(g.color):"",children:"â—"}),g.name]}),g.count>0&&e.jsx("span",{className:`
                          text-xs px-1.5 py-0.5 rounded-full
                          ${x===g.id?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400"}
                        `,children:g.count})]},g.id))})]})]})]})};return e.jsx("aside",{className:"w-64 border-r border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 flex-shrink-0 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[i("assigned-me",k,"Assigned to Me"),i("my-team",l,"My Team"),i("unassigned",c,"Unassigned"),o.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2 px-3",children:"Custom Queues"}),e.jsx("div",{className:"space-y-1",children:o.map(n=>e.jsxs("button",{onClick:()=>u?.(n.id),className:`
                    w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors
                    ${x===n.id?"bg-indigo-50 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":"text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-900"}
                  `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:n.color?f(n.color):"",children:"â—"}),n.name]}),n.count>0&&e.jsx("span",{className:`
                      text-xs px-2 py-0.5 rounded-full
                      ${x===n.id?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400"}
                    `,children:n.count})]},n.id))})]})]})})}function tt({savedSearches:t,onSearch:x,onSaveSearch:u,onLoadSearch:h}){const[b,s]=B.useState(""),[r,o]=B.useState(!1),k=l=>{l.preventDefault(),x?.(b)};return e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-3",children:[e.jsxs("form",{onSubmit:k,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:b,onChange:l=>s(l.target.value),placeholder:"Search tickets... (e.g., sentiment:negative SLA:<60m priority:high)",className:"w-full px-4 py-2 pl-10 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"}),e.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>o(!r),className:"px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Saved Searches"}),r&&t&&t.length>0&&e.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg z-10",children:e.jsx("div",{className:"p-2",children:t.map(l=>e.jsxs("button",{onClick:()=>{h?.(l.id),s(l.query),o(!1)},className:"w-full text-left px-3 py-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:l.name}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:l.query})]},l.id))})})]}),e.jsx("button",{type:"button",onClick:()=>b&&u?.({name:b.slice(0,30),query:b}),disabled:!b,className:"px-4 py-2 rounded-lg bg-sky-100 dark:bg-sky-950 text-sky-700 dark:text-sky-300 hover:bg-sky-200 dark:hover:bg-sky-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium",children:"Quick syntax:"}),e.jsx("code",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded",children:"sentiment:negative"}),e.jsx("code",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded",children:"SLA:<60m"}),e.jsx("code",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded",children:"priority:high"}),e.jsx("code",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded",children:"has:attachment"})]})]})}function v({label:t,value:x,description:u,icon:h,className:b="",tooltipPosition:s="top",children:r}){const o=s==="top"?"bottom-full left-1/2 -translate-x-1/2 mb-2":"top-full left-1/2 -translate-x-1/2 mt-2";return e.jsxs("div",{className:"group/badge relative inline-flex",children:[e.jsx("span",{className:`inline-flex items-center gap-1 ${b}`,children:r||e.jsxs(e.Fragment,{children:[h&&e.jsx("span",{className:"flex-shrink-0",children:h}),e.jsx("span",{children:x})]})}),e.jsxs("div",{className:`pointer-events-none absolute z-50 ${o} w-max max-w-xs rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm shadow-lg opacity-0 transition-opacity duration-200 group-hover/badge:opacity-100 dark:border-slate-700 dark:bg-slate-800`,children:[e.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 ${s==="top"?"top-full -mt-px border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-white dark:border-t-slate-800":"bottom-full -mb-px border-b-8 border-l-8 border-r-8 border-b-white border-l-transparent border-r-transparent dark:border-b-slate-800"}`}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-slate-900 dark:text-white",children:[h&&e.jsx("span",{className:"text-base",children:h}),e.jsx("span",{children:t})]}),e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:x}),e.jsx("div",{className:"border-t border-slate-200 pt-1 dark:border-slate-700"}),e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:u})]})]})]})}const re={sentiment:{positive:{icon:"ðŸ˜Š",lucide:Ie,description:"Customer is satisfied with the interaction"},negative:{icon:"ðŸ˜ž",lucide:Te,description:"Customer is dissatisfied with the interaction"},neutral:{icon:"ðŸ˜",lucide:Oe,description:"Customer sentiment is neutral"}},entity:{default:{icon:"ðŸ¢",lucide:Ze,description:"The primary entity or subject being discussed"}},intent:{default:{icon:"ðŸŽ¯",lucide:Ve,description:"The customer's intended outcome or purpose"}},emotion:{default:{icon:"â¤ï¸",lucide:Ge,description:"The customer's emotional state"}},category:{default:{icon:"ðŸ·ï¸",lucide:De,description:"Primary classification category"}},aspects:{default:{icon:"ðŸ”–",lucide:te,description:"Individual aspects mentioned"}},aspectGroups:{default:{icon:"ðŸ“",lucide:Je,description:"Grouped aspects for better organization"}},reasonSurfaced:{default:{icon:"ðŸ’¡",lucide:se,description:"Why this conversation was surfaced"}},essentials:{customerName:{default:{icon:"ðŸ‘¤",lucide:ae,description:"Customer name"}},avatar:{default:{icon:"ðŸ–¼ï¸",lucide:ae,description:"Customer avatar"}},handleAndFollowers:{default:{icon:"ðŸ“Š",lucide:Ee,description:"Social media handle and follower count"}},platformAndType:{default:{icon:"ðŸ’¬",lucide:D,description:"Platform and conversation type"}},timestamp:{default:{icon:"ðŸ“…",lucide:ze,description:"When the message was sent"}},messageSnippet:{default:{icon:"âœ‰ï¸",lucide:Re,description:"Preview of the message content"}},messageCount:{default:{icon:"ðŸ’¬",lucide:D,description:"Total number of messages in conversation"}},priorityBadge:{high:{icon:"âš ï¸",lucide:ee,description:"High priority - urgent attention needed"},medium:{icon:"âš¡",lucide:se,description:"Medium priority - moderate attention needed"},low:{icon:"ðŸ’¤",lucide:Ae,description:"Low priority - can be addressed later"},default:{icon:"ðŸ“Œ",lucide:te,description:"Priority level"}},slaStatus:{"at-risk":{icon:"â±ï¸",lucide:V,description:"SLA is at risk - approaching deadline"},breached:{icon:"ðŸ”´",lucide:ee,description:"SLA breached - deadline exceeded"},"on-track":{icon:"âœ…",lucide:Me,description:"SLA on track - within target time"},default:{icon:"â°",lucide:V,description:"SLA status"}},unreadCount:{default:{icon:"ðŸ””",lucide:Be,description:"Number of unread messages"}}}};function w(t,x){if(t.startsWith("essentials.")){const s=t.replace("essentials.",""),r=re.essentials?.[s];if(!r)return;if("icon"in r&&"lucide"in r&&"description"in r)return r;const o=r;if(!x)return o.default||Object.values(o)[0];const k=x.toLowerCase().replace(/\s+/g,"-");return o[k]||o[x.toLowerCase()]||o[x]||o.default}const u=re[t];if(!u)return;if("icon"in u&&"lucide"in u&&"description"in u)return u;const h=u;if(!x)return h.default||Object.values(h)[0];const b=x.toLowerCase().replace(/\s+/g,"-");return h[b]||h[x.toLowerCase()]||h[x]||h.default}function C(t){return{sentiment:"Sentiment",entity:"Entity Type",intent:"Intent",emotion:"Emotion",category:"Category",aspects:"Aspects",aspectGroups:"Aspect Groups",reasonSurfaced:"Reason Surfaced","essentials.customerName":"Customer Name","essentials.avatar":"Avatar","essentials.handleAndFollowers":"Handle & Followers","essentials.platformAndType":"Platform & Type","essentials.timestamp":"Timestamp","essentials.messageSnippet":"Message Snippet","essentials.messageCount":"Message Count","essentials.priorityBadge":"Priority","essentials.slaStatus":"SLA Status","essentials.unreadCount":"Unread Count"}[t]||t}function st({ticket:t,isSelected:x,onClick:u,onSelect:h,showInsights:b=!0,selectedInsights:s}){const r=()=>{switch(t.sla.firstResponse.status){case"breached":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950";case"due-soon":return"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-950";case"within-sla":return"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-950";default:return"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-900"}},o=()=>{switch(t.priority){case"high":return"bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300";case"medium":return"bg-yellow-100 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-300";case"low":return"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}},k=()=>({instagram:"ðŸ“·",facebook:"ðŸ‘¥",x:"ðŸ¦",linkedin:"ðŸ’¼",google:"â­",youtube:"â–¶ï¸"})[t.channel.platform]||"ðŸ’¬",l=()=>{const{status:c,remainingMinutes:f,breachedBy:a}=t.sla.firstResponse;if(c==="breached"&&a){const i=Math.floor(a/60);return i>0?`Breached ${i}h ago`:`Breached ${a}m ago`}if(f){const i=Math.floor(f/60);return i>0?`Due in ${i}h ${f%60}m`:`Due in ${f}m`}return"Within SLA"};return e.jsxs("div",{onClick:u,className:`
        relative flex items-center gap-4 px-4 py-3 border-b border-slate-200 dark:border-slate-800
        hover:bg-slate-50 dark:hover:bg-slate-900 cursor-pointer transition-colors
        ${x?"bg-indigo-50 dark:bg-indigo-950":"bg-white dark:bg-slate-950"}
      `,children:[e.jsx("input",{type:"checkbox",checked:x,onChange:c=>{c.stopPropagation(),h?.(!x)},className:"w-4 h-4 rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500"}),s?.essentials?.avatar!==!1&&e.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"w-10 h-10 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.replyStatus==="not-replied"&&e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),s?.essentials?.customerName!==!1&&e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:t.author.name}),t.author.isVerified&&e.jsx("svg",{className:"w-4 h-4 text-sky-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s?.essentials?.handleAndFollowers!==!1&&e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:["@",t.author.username,t.author.followerCount>0&&e.jsxs("span",{className:"text-xs text-slate-400 dark:text-slate-500 ml-1",children:["(",t.author.followerCount>=1e6?`${(t.author.followerCount/1e6).toFixed(1)}M`:t.author.followerCount>=1e3?`${(t.author.followerCount/1e3).toFixed(0)}K`:t.author.followerCount,")"]})]}),s?.essentials?.platformAndType!==!1&&e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[k()," ",t.interactionTypeLabel]}),s?.essentials?.timestamp!==!1&&e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(t.createdAt).toLocaleDateString()})]}),s?.essentials?.messageSnippet!==!1&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:t.messageSnippet})}),b&&t.classification&&(()=>{const c=t.classification,f=c.entityType||"N/A",a=c.intent||"N/A",i=c.emotion||"N/A",n=c.emotionCluster||"Neutral",m=c.sentiment||"Neutral",y=c.upperCategories||[],S=c.categorizations||[],g=c.aspectGroups||[],M=c.ungroupedAspects||[],F=p=>{switch(p){case"Negative":return"bg-rose-100 dark:bg-rose-950 text-rose-700 dark:text-rose-300";case"Positive":return"bg-emerald-100 dark:bg-emerald-950 text-emerald-700 dark:text-emerald-300";default:return"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}};return e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[s?.sentiment!==!1&&(()=>{const p=w("sentiment",m);return p?e.jsx(v,{label:C("sentiment"),value:m,description:p.description,icon:p.icon,className:`px-2 py-0.5 rounded text-xs font-medium ${F(m)}`}):e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${F(m)}`,children:m})})(),s?.entity!==!1&&(()=>{const p=w("entity");return p?e.jsx(v,{label:C("entity"),value:f,description:p.description,icon:p.icon,className:"px-2 py-0.5 rounded text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:f})})(),s?.emotion!==!1&&(()=>{const p=w("emotion"),N=n==="Negative"?"bg-rose-100 dark:bg-rose-950 text-rose-700 dark:text-rose-300":n==="Positive"?"bg-emerald-100 dark:bg-emerald-950 text-emerald-700 dark:text-emerald-300":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300";return p?e.jsx(v,{label:C("emotion"),value:i,description:p.description,icon:p.icon,className:`px-2 py-0.5 rounded text-xs font-medium ${N}`}):e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${N}`,children:i})})(),s?.intent!==!1&&(()=>{const p=w("intent");return p?e.jsx(v,{label:C("intent"),value:a,description:p.description,icon:p.icon,className:"px-2 py-0.5 rounded text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:a})})(),s?.category!==!1&&y.length>0&&(()=>{const p=w("category");return e.jsxs(e.Fragment,{children:[y.slice(0,2).map((N,T)=>p?e.jsx(v,{label:C("category"),value:N,description:p.description,icon:p.icon,className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"},T):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:N},T)),y.length>2&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",y.length-2]})]})})(),s?.category!==!1&&S.length>0&&(()=>{const p=w("category");return e.jsxs(e.Fragment,{children:[S.slice(0,1).map((N,T)=>{const P=[N.category,N.subcategory,N.subSubcategory].filter(Boolean).join(" â†’ ");return p?e.jsx(v,{label:C("category"),value:P,description:`${p.description} with ${N.sentiment} sentiment`,icon:p.icon,className:`px-2 py-0.5 rounded text-xs font-medium ${F(N.sentiment)}`},T):e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${F(N.sentiment)}`,title:P,children:P},T)}),S.length>1&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",S.length-1]})]})})(),s?.aspectGroups!==!1&&g.length>0&&(()=>{const p=w("aspectGroups");return e.jsxs(e.Fragment,{children:[g.slice(0,2).map((N,T)=>{const L=N.name||N.groupName,P=N.aspects?.map(G=>typeof G=="string"?G:G.name).join(", ")||"",H=p?`${p.description}${P?`: ${P}`:""}`:P;return p?e.jsx(v,{label:C("aspectGroups"),value:L,description:H,icon:p.icon,className:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300"},T):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",title:P,children:L},T)}),g.length>2&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",g.length-2]})]})})(),s?.aspects!==!1&&M.length>0&&(()=>{const p=w("aspects");return e.jsxs(e.Fragment,{children:[M.slice(0,2).map((N,T)=>{const L=typeof N=="string"?N:N.name;return p?e.jsx(v,{label:C("aspects"),value:L,description:p.description,icon:p.icon,className:"px-2 py-0.5 rounded text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"},T):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300",children:L},T)}),M.length>2&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",M.length-2]})]})})()]})})(),s?.reasonSurfaced!==!1&&t.reasonSurfaced&&(()=>{const c=w("reasonSurfaced");return c?e.jsx(v,{label:C("reasonSurfaced"),value:t.reasonSurfaced,description:c.description,icon:c.icon,className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium"}):e.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:t.reasonSurfaced})})()]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s?.essentials?.messageCount!==!1&&(()=>{const c=w("essentials.messageCount"),f=`Total: ${t.messageCount.total} messages (${t.messageCount.fromCustomer} from customer, ${t.messageCount.fromBrand} from brand)`;return c?e.jsx(v,{label:C("essentials.messageCount"),value:t.messageCount.total.toString(),description:f,icon:c.icon,tooltipPosition:"bottom",children:e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-xs",children:[e.jsx(D,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium",children:t.messageCount.total})]})}):e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-xs",children:[e.jsx(D,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium",children:t.messageCount.total})]}),e.jsx("div",{className:"pointer-events-none absolute right-0 top-full z-50 mt-2 w-44 opacity-0 transition-opacity group-hover:pointer-events-auto group-hover:opacity-100",children:e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Message Breakdown"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"From Customer"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.messageCount.fromCustomer})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"From Brand"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.messageCount.fromBrand})]})]})]})})]})})(),s?.essentials?.priorityBadge!==!1&&(()=>{const c=w("essentials.priorityBadge",t.priority);return c?e.jsx(v,{label:C("essentials.priorityBadge"),value:t.priority.toUpperCase(),description:c.description,icon:c.icon,className:`px-2 py-1 rounded text-xs font-medium uppercase ${o()}`}):e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium uppercase ${o()}`,children:t.priority})})(),s?.essentials?.slaStatus!==!1&&(()=>{const c=t.sla.firstResponse.status,f=w("essentials.slaStatus",c);return f?e.jsx(v,{label:C("essentials.slaStatus"),value:l(),description:f.description,icon:f.icon,className:`px-3 py-1 rounded text-xs font-medium ${r()}`}):e.jsx("div",{className:`px-3 py-1 rounded text-xs font-medium ${r()}`,children:l()})})(),s?.essentials?.unreadCount!==!1&&t.unreadCount>0&&(()=>{const c=w("essentials.unreadCount");return c?e.jsx(v,{label:C("essentials.unreadCount"),value:t.unreadCount.toString(),description:c.description,icon:c.icon,className:"w-6 h-6 flex items-center justify-center bg-indigo-600 text-white text-xs font-bold rounded-full"}):e.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-indigo-600 text-white text-xs font-bold rounded-full",children:t.unreadCount})})()]})]})}function at({ticket:t,isSelected:x,onClick:u,onSelect:h,showInsights:b=!0,selectedInsights:s}){const r=()=>{switch(t.sla.firstResponse.status){case"breached":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950";case"due-soon":return"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-950";case"within-sla":return"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-950";default:return"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-900"}},o=()=>{switch(t.sentiment){case"negative":return"bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300";case"neutral":return"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300";case"positive":return"bg-green-100 dark:bg-green-950 text-green-700 dark:text-green-300"}},k=()=>({instagram:"ðŸ“·",facebook:"ðŸ‘¥",x:"ðŸ¦",linkedin:"ðŸ’¼",google:"â­",youtube:"â–¶ï¸"})[t.channel.platform]||"ðŸ’¬";return e.jsxs("div",{onClick:u,className:`
        p-6 rounded-lg border cursor-pointer transition-all
        ${x?"border-indigo-300 dark:border-indigo-700 bg-indigo-50 dark:bg-indigo-950 shadow-md":"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 hover:border-slate-300 dark:hover:border-slate-700 hover:shadow-sm"}
      `,children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:l=>{l.stopPropagation(),h?.(!x)},className:"mt-1 w-4 h-4 rounded border-slate-300 dark:border-slate-600 text-indigo-600 focus:ring-indigo-500"}),s?.essentials?.avatar!==!1&&e.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"w-12 h-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.replyStatus==="not-replied"&&e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),s?.essentials?.customerName!==!1&&e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:t.author.name}),t.author.isVerified&&e.jsx("svg",{className:"w-4 h-4 text-sky-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s?.essentials?.handleAndFollowers!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:["@",t.author.username]}),t.author.followerCount>0&&e.jsxs("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:["â€¢ ",t.author.followerCount>=1e6?`${(t.author.followerCount/1e6).toFixed(1)}M`:t.author.followerCount>=1e3?`${(t.author.followerCount/1e3).toFixed(1)}K`:t.author.followerCount," followers"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s?.essentials?.platformAndType!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[k()," ",t.interactionTypeLabel]}),e.jsx("span",{children:"â€¢"})]}),e.jsx("span",{children:t.ticketNumber}),s?.essentials?.timestamp!==!1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleString()})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s?.essentials?.messageCount!==!1&&(()=>{const l=w("essentials.messageCount"),c=`Total: ${t.messageCount.total} messages (${t.messageCount.fromCustomer} from customer, ${t.messageCount.fromBrand} from brand)`;return l?e.jsx(v,{label:C("essentials.messageCount"),value:t.messageCount.total.toString(),description:c,icon:l.icon,tooltipPosition:"bottom",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-sm cursor-default",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:t.messageCount.total})]})}):e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-sm cursor-default",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:t.messageCount.total})]}),e.jsx("div",{className:"pointer-events-none absolute right-0 top-full z-50 mt-2 w-48 opacity-0 transition-opacity group-hover:pointer-events-auto group-hover:opacity-100",children:e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Message Breakdown"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"From Customer"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.messageCount.fromCustomer})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"From Brand"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.messageCount.fromBrand})]})]})]})})]})})(),s?.essentials?.slaStatus!==!1&&(()=>{const l=t.sla.firstResponse.status,c=t.sla.firstResponse.remainingMinutes?`${t.sla.firstResponse.remainingMinutes}m remaining`:"Breached",f=w("essentials.slaStatus",l);return f?e.jsx(v,{label:C("essentials.slaStatus"),value:c,description:f.description,icon:f.icon,tooltipPosition:"bottom",className:`px-3 py-2 rounded-lg text-sm font-medium ${r()}`}):e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm font-medium ${r()}`,children:c})})()]})]}),s?.essentials?.messageSnippet!==!1&&e.jsx("p",{className:"text-slate-700 dark:text-slate-300 mb-4 leading-relaxed",children:t.messageSnippet}),b&&t.classification&&(()=>{const l=t.classification,c=l.entityType||"N/A",f=l.intent||"N/A",a=l.emotion||"N/A",i=l.emotionCluster||"Neutral",n=l.sentiment||"Neutral";return e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s?.sentiment!==!1&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-400",children:"Sentiment: "}),e.jsx("span",{className:n==="Negative"?"text-rose-600 dark:text-rose-400 font-medium":n==="Positive"?"text-emerald-600 dark:text-emerald-400 font-medium":"text-slate-600 dark:text-slate-400",children:n})]}),s?.entity!==!1&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-400",children:"Entity: "}),e.jsx("span",{className:"text-slate-800 dark:text-slate-200",children:c})]}),s?.intent!==!1&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-400",children:"Intent: "}),e.jsx("span",{className:"text-slate-800 dark:text-slate-200",children:f})]}),s?.emotion!==!1&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-400",children:"Emotion: "}),e.jsx("span",{className:i==="Negative"?"text-rose-600 dark:text-rose-400":i==="Positive"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400",children:a})]})]}),s?.category!==!1&&t.classification.upperCategories&&t.classification.upperCategories.length>0&&(()=>{const m=w("category");return e.jsxs("div",{children:[e.jsx("div",{className:"mb-1.5 text-xs font-medium text-slate-600 dark:text-slate-400",children:"Customer's Intent (AI Upper Categories)"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.classification.upperCategories.map((y,S)=>m?e.jsx(v,{label:C("category"),value:y,description:m.description,icon:m.icon,className:"rounded-md bg-blue-100 px-2.5 py-1 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},S):e.jsx("span",{className:"rounded-md bg-blue-100 px-2.5 py-1 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:y},S))})]})})(),s?.category!==!1&&t.classification.categorizations&&t.classification.categorizations.length>0&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Category"}),t.classification.categorizations.map((m,y)=>{const S=m.sentiment==="Negative"?"bg-rose-50 border-rose-200 dark:bg-rose-950/30 dark:border-rose-800":m.sentiment==="Positive"?"bg-emerald-50 border-emerald-200 dark:bg-emerald-950/30 dark:border-emerald-800":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700",g=m.sentiment==="Negative"?"text-rose-700 dark:text-rose-300":m.sentiment==="Positive"?"text-emerald-700 dark:text-emerald-300":"text-slate-700 dark:text-slate-300";return e.jsx("div",{className:`rounded-md border px-3 py-2 ${S}`,children:e.jsxs("div",{className:`text-sm ${g}`,children:[m.category,m.subcategory&&` â†’ ${m.subcategory}`,m.subSubcategory&&` â†’ ${m.subSubcategory}`]})},y)})]}),s?.aspectGroups!==!1&&t.classification.aspectGroups&&t.classification.aspectGroups.length>0&&(()=>{const m=w("aspectGroups");return e.jsxs("div",{children:[e.jsx("div",{className:"mb-1.5 text-xs font-medium text-slate-600 dark:text-slate-400",children:"Aspect Groups"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.classification.aspectGroups.map((y,S)=>{const g=y.name||y.groupName,M=y.aspects?.map(p=>typeof p=="string"?p:p.name).join(", ")||"",F=m?`${m.description}${M?`: ${M}`:""}`:M;return m?e.jsx(v,{label:C("aspectGroups"),value:g,description:F,icon:m.icon,className:"cursor-help rounded-lg bg-purple-100 px-3 py-1.5 text-xs font-medium text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},S):e.jsx("span",{className:"cursor-help rounded-lg bg-purple-100 px-3 py-1.5 text-xs font-medium text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",title:M,children:g},S)})})]})})(),s?.aspects!==!1&&t.classification.ungroupedAspects&&t.classification.ungroupedAspects.length>0&&(()=>{const m=w("aspects");return e.jsxs("div",{children:[e.jsx("div",{className:"mb-1.5 text-xs font-medium text-slate-600 dark:text-slate-400",children:"Other Aspects"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.classification.ungroupedAspects.map((y,S)=>{const g=typeof y=="string"?y:y.name;return m?e.jsx(v,{label:C("aspects"),value:g,description:m.description,icon:m.icon,className:"rounded-md bg-slate-200 px-2 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300"},`ungrouped-${S}`):e.jsx("span",{className:"rounded-md bg-slate-200 px-2 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:g},`ungrouped-${S}`)})})]})})()]})})(),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[(()=>{const l=w("sentiment",t.sentiment);return l?e.jsx(v,{label:C("sentiment"),value:t.sentiment,description:l.description,icon:l.icon,className:`px-2 py-1 rounded text-xs font-medium ${o()}`}):e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o()}`,children:t.sentiment})})(),(()=>{const l=w("intent");return l?e.jsx(v,{label:C("intent"),value:t.intent,description:l.description,icon:l.icon,className:"px-2 py-1 rounded text-xs font-medium bg-sky-100 dark:bg-sky-950 text-sky-700 dark:text-sky-300"}):e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-sky-100 dark:bg-sky-950 text-sky-700 dark:text-sky-300",children:t.intent})})(),t.aspects?.map(l=>{const c=w("aspects");return c?e.jsx(v,{label:C("aspects"),value:l,description:c.description,icon:c.icon,className:"px-2 py-1 rounded text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"},l):e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:l},l)})]}),t.signals?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.signals.map(l=>e.jsxs("span",{className:"px-2 py-1 rounded text-xs bg-yellow-50 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800",children:["âš ï¸ ",l]},l))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 dark:text-slate-400",children:[t.assignedTo?e.jsxs("span",{children:["Assigned to ",t.assignedTo.name]}):e.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Unassigned"}),t.team&&e.jsxs("span",{children:["â€¢ ",t.team.name]})]}),t.tags?.length>0&&e.jsx("div",{className:"flex gap-1",children:t.tags.slice(0,3).map(l=>e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-indigo-100 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300",children:l},l))})]}),s?.reasonSurfaced!==!1&&t.reasonSurfaced&&e.jsxs("div",{className:"mt-3 px-3 py-2 bg-indigo-50 dark:bg-indigo-950 border border-indigo-200 dark:border-indigo-800 rounded text-sm text-indigo-700 dark:text-indigo-300 font-medium",children:["ðŸŽ¯ ",t.reasonSurfaced]})]})}function rt({tickets:t,selectedIds:x=[],onTicketClick:u,onSelectionChange:h,onCellEdit:b}){const s=a=>({instagram:"ðŸ“·",facebook:"ðŸ‘¥",x:"ðŸ¦",linkedin:"ðŸ’¼",google:"â­",youtube:"â–¶ï¸",whatsapp:"ðŸ’¬","google-reviews":"â­"})[a]||"ðŸ’¬",r=a=>{const{status:i,remainingMinutes:n,breachedBy:m}=a.sla.firstResponse;return i==="breached"&&m?`Breached ${m}m ago`:n?`${n}m`:"On time"},o=a=>{switch(a){case"breached":return"text-red-600 dark:text-red-400";case"due-soon":return"text-yellow-600 dark:text-yellow-400";case"within-sla":return"text-green-600 dark:text-green-400";default:return"text-slate-600 dark:text-slate-400"}},k=a=>{switch(a){case"Positive":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300";case"Negative":return"bg-rose-100 text-rose-700 dark:bg-rose-950 dark:text-rose-300";case"Neutral":return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}},l=a=>{switch(a){case"Negative":return"bg-rose-100 text-rose-700 dark:bg-rose-950 dark:text-rose-300";case"Positive":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}},c=[{id:"author",header:"Author",accessor:"author",width:200,minWidth:150,frozen:!0,render:(a,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"h-8 w-8 rounded-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-900 dark:text-slate-100",children:[i.replyStatus==="not-replied"&&e.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500"}),a.name,a.isVerified&&e.jsx("svg",{className:"h-3 w-3 text-sky-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["@",a.username]})]})]})},{id:"channel",header:"Channel",accessor:a=>a.channel.platform,width:140,frozen:!0,render:(a,i)=>e.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("span",{children:s(a)}),e.jsx("span",{children:i.interactionTypeLabel})]})},{id:"message",header:"Message",accessor:"messageSnippet",width:400,minWidth:250,flex:1,render:a=>e.jsx("div",{className:"line-clamp-2 text-sm text-slate-900 dark:text-slate-100",children:a})},{id:"entityType",header:"Entity Type",accessor:a=>a.classification?.entityType,width:120,hidden:!0,render:a=>a?e.jsx("span",{className:"inline-flex rounded bg-slate-100 px-2 py-1 text-xs font-medium text-slate-700 dark:bg-slate-800 dark:text-slate-300",children:a}):e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"})},{id:"sentiment",header:"Sentiment",accessor:a=>a.classification?.sentiment,width:100,hidden:!0,render:a=>a?e.jsx("span",{className:`inline-flex rounded px-2 py-1 text-xs font-medium ${k(a)}`,children:a}):e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"})},{id:"intent",header:"Intent",accessor:a=>a.classification?.intent,width:120,hidden:!0,render:a=>a?e.jsx("span",{className:"inline-flex rounded bg-slate-100 px-2 py-1 text-xs font-medium text-slate-700 dark:bg-slate-800 dark:text-slate-300",children:a}):e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"})},{id:"emotion",header:"Emotion",accessor:a=>a.classification?.emotion,width:130,hidden:!0,render:(a,i)=>a&&i.classification?.emotionCluster?e.jsx("span",{className:`inline-flex rounded px-2 py-1 text-xs font-medium ${l(i.classification.emotionCluster)}`,children:a}):e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"})},{id:"upperCategories",header:"Upper Categories",accessor:a=>a.classification?.upperCategories,width:200,hidden:!0,render:a=>!a||a.length===0?e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"}):e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,2).map((i,n)=>e.jsx("span",{className:"rounded bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:i},n)),a.length>2&&e.jsxs("span",{className:"px-2 py-0.5 text-xs text-slate-500 dark:text-slate-400",children:["+",a.length-2]})]})},{id:"categorizations",header:"Categorizations",accessor:a=>a.classification?.categorizations,width:220,hidden:!0,render:a=>{if(!a||a.length===0)return e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"});const i=a[0],n=[i.category,i.subcategory,i.subSubcategory].filter(Boolean);return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`inline-flex rounded px-2 py-0.5 text-xs font-medium ${k(i.sentiment)}`,children:n.join(" â†’ ")}),a.length>1&&e.jsxs("span",{className:"px-1 py-0.5 text-xs text-slate-500 dark:text-slate-400",children:["+",a.length-1]})]})}},{id:"aspectGroups",header:"Aspect Groups",accessor:a=>a.classification?.aspectGroups,width:200,hidden:!0,render:a=>!a||a.length===0?e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"}):e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,2).map((i,n)=>e.jsx("span",{className:"rounded bg-slate-100 px-2 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-800 dark:text-slate-300",title:i.aspects?.join(", "),children:i.name},n)),a.length>2&&e.jsxs("span",{className:"px-2 py-0.5 text-xs text-slate-500 dark:text-slate-400",children:["+",a.length-2]})]})},{id:"ungroupedAspects",header:"Other Aspects",accessor:a=>a.classification?.ungroupedAspects,width:180,hidden:!0,render:a=>!a||a.length===0?e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"â€”"}):e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,3).map((i,n)=>e.jsx("span",{className:"rounded bg-slate-100 px-2 py-0.5 text-xs text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:i},n)),a.length>3&&e.jsxs("span",{className:"px-2 py-0.5 text-xs text-slate-500 dark:text-slate-400",children:["+",a.length-3]})]})},{id:"tags",header:"Tags",accessor:"tags",width:200,hidden:!0,render:a=>!a||a.length===0?e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"No tags"}):e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,2).map(i=>e.jsx("span",{className:"rounded bg-indigo-100 px-2 py-0.5 text-xs text-indigo-700 dark:bg-indigo-950 dark:text-indigo-300",children:i},i)),a.length>2&&e.jsxs("span",{className:"px-2 py-0.5 text-xs text-slate-500 dark:text-slate-400",children:["+",a.length-2]})]})},{id:"priority",header:"Priority",accessor:"priority",width:100,hidden:!0,render:a=>e.jsx("span",{className:`inline-flex rounded px-2 py-1 text-xs font-medium uppercase ${a==="high"?"bg-red-100 text-red-700 dark:bg-red-950 dark:text-red-300":a==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-950 dark:text-yellow-300":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}`,children:a})},{id:"sla",header:"SLA",accessor:a=>a.sla.firstResponse.status,width:130,render:(a,i)=>e.jsx("div",{className:`text-sm font-medium ${o(a)}`,children:r(i)})},{id:"status",header:"Status",accessor:"status",width:100,hidden:!0,render:a=>e.jsx("span",{className:"inline-flex rounded bg-slate-100 px-2 py-1 text-xs font-medium capitalize text-slate-700 dark:bg-slate-800 dark:text-slate-300",children:a})},{id:"assignedTo",header:"Assigned To",accessor:"assignedTo",width:180,hidden:!0,render:a=>a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"h-6 w-6 rounded-full"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.name})]}):e.jsx("span",{className:"text-sm text-slate-400 dark:text-slate-500",children:"Unassigned"})}],f=(a,i,n)=>{b?.(a,i,n),console.log("Cell edited:",{rowId:a,columnId:i,value:n})};return e.jsx(Pe,{data:t,columns:c,rowKey:"id",selectedIds:x,onRowClick:a=>u?.(a.id),onSelectionChange:h,onCellEdit:f,frozenColumnCount:2})}function nt({tickets:t,displayMode:x,selectedIds:u=[],onTicketClick:h,onSelectionChange:b,messageInsights:s}){const r=(o,k)=>{const l=k?[...u,o]:u.filter(c=>c!==o);b?.(l)};return x==="table"?e.jsx("div",{className:"h-full px-6 pt-6",children:e.jsx(rt,{tickets:t,selectedIds:u,onTicketClick:h,onSelectionChange:r})}):x==="cards"?e.jsx("div",{className:"p-4 grid grid-cols-1 gap-4",children:t.map(o=>e.jsx(at,{ticket:o,isSelected:u.includes(o.id),onClick:()=>h?.(o.id),onSelect:k=>r(o.id,k),showInsights:s?.showInsights??!0,selectedInsights:s?.selectedInsights},o.id))}):e.jsx("div",{children:t.map(o=>e.jsx(st,{ticket:o,isSelected:u.includes(o.id),onClick:()=>h?.(o.id),onSelect:k=>r(o.id,k),showInsights:s?.showInsights??!0,selectedInsights:s?.selectedInsights},o.id))})}function lt({ticket:t,conversation:x,aiSuggestions:u,isOpen:h,onClose:b,onPopOut:s,onDraftSave:r,onSubmitForApproval:o,onInternalNote:k,onReply:l,onApplyAISuggestion:c}){if(!h)return null;const f=t.interactionType==="email",a=(i,n)=>{l?.(i,n)};return e.jsxs("div",{className:"fixed inset-y-0 right-0 w-2/3 bg-white dark:bg-slate-950 border-l border-slate-200 dark:border-slate-800 shadow-2xl flex flex-col z-50",children:[e.jsx("div",{className:"flex-shrink-0 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:t.ticketNumber}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium uppercase
              ${t.status==="new"?"bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300":""}
              ${t.status==="open"?"bg-green-100 dark:bg-green-950 text-green-700 dark:text-green-300":""}
              ${t.status==="pending"?"bg-yellow-100 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-300":""}
              ${t.status==="resolved"?"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300":""}
            `,children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>s?.(t.id),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded transition-colors",title:"Pop out to full page",children:e.jsx("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded transition-colors",title:"Close panel",children:e.jsx("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto flex flex-col",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6 p-6 flex-1",children:[e.jsxs("div",{className:"col-span-2 flex flex-col min-h-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Conversation"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded-xl border-slate-200 dark:border-slate-800",children:e.jsx(Ue,{conversationThread:x,ticket:t})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl p-4 border border-slate-200 dark:border-slate-800",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Customer Profile"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:t.contact.name}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["@",t.author.username]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.contact.email&&e.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:t.contact.email}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Followers"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:t.author.followerCount?.toLocaleString()||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Previous Interactions"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.contact.previousInteractions})]})]})]})})]})}),e.jsx("div",{className:"flex-shrink-0 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950",children:f?e.jsx(He,{aiSuggestions:u,defaultTo:t.contact.email||"",onSendReply:(i,n,m)=>{a(i,{recipients:n,statusAction:m})},onAddNote:k,onPopOut:()=>s?.(t.id)}):e.jsx(We,{aiSuggestions:u,onDraftSave:r,onSubmitForApproval:o,onSendReply:(i,n,m)=>{a(i,{statusAction:n,taggedUsers:m})},onAddNote:k,ticketPlatform:t.channel.platform,ticketType:t.interactionType})})]})}function ot({selectedCount:t,onAssign:x,onClose:u,onAddTags:h,onChangeStatus:b,onChangePriority:s,onMarkRead:r,onClearSelection:o}){return t===0?null:e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-950 border-b border-indigo-200 dark:border-indigo-800 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-medium text-indigo-900 dark:text-indigo-100",children:[t," ticket",t!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x?.(),className:"px-3 py-1.5 rounded bg-white dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-800 transition-colors",children:"Assign"}),e.jsx("button",{onClick:u,className:"px-3 py-1.5 rounded bg-white dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-800 transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>h?.([]),className:"px-3 py-1.5 rounded bg-white dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-800 transition-colors",children:"Add Tags"}),e.jsx("button",{onClick:()=>b?.("open"),className:"px-3 py-1.5 rounded bg-white dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-800 transition-colors",children:"Change Status"}),e.jsx("button",{onClick:()=>s?.("high"),className:"px-3 py-1.5 rounded bg-white dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-800 transition-colors",children:"Set Priority"}),e.jsx("button",{onClick:r,className:"px-3 py-1.5 rounded bg-white dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-800 transition-colors",children:"Mark as Read"})]})]}),e.jsx("button",{onClick:o,className:"text-sm text-indigo-700 dark:text-indigo-300 hover:text-indigo-900 dark:hover:text-indigo-100 transition-colors",children:"Clear Selection"})]})})}function it({sidebarViews:t,tickets:x,conversationThreads:u,aiSuggestions:h,savedSearches:b,users:s,teams:r,displayMode:o="compact",activeView:k,openTicketId:l,onViewChange:c,onDisplayModeChange:f,onTicketOpen:a,onTicketClose:i,onPopOut:n,onSearch:m,onSaveSearch:y,onLoadSearch:S,onReply:g,onInternalNote:M,onAssign:F,onAddTags:p,onCreateTask:N,onEscalate:T,onSendToTeam:L,onSelectionChange:P,onBulkAssign:H,onBulkClose:G,onBulkTag:le,onBulkStatusChange:oe,onBulkPriorityChange:ie,onBulkMarkRead:de,onAIFeedbackPositive:ce,onAIFeedbackNegative:xe,onApplyAISuggestion:me,onDraftSave:pe,onSubmitForApproval:ue,isFilterPanelOpen:ge=!1,onFilterPanelClose:Q}){const[R,W]=B.useState([]),[O,he]=B.useState(o),[z,Z]=B.useState(l??null),[be,fe]=B.useState(void 0),[ke,je]=B.useState([]),[A,_]=B.useState({showInsights:!0,selectedInsights:{sentiment:!0,entity:!0,intent:!0,emotion:!0,category:!0,aspects:!0,aspectGroups:!0,reasonSurfaced:!0,essentials:{customerName:!0,avatar:!0,handleAndFollowers:!0,platformAndType:!0,timestamp:!0,messageSnippet:!0,messageCount:!0,priorityBadge:!0,slaStatus:!0,unreadCount:!0}}}),[Y,J]=B.useState(!1),Ne=d=>{Z(d),a?.(d)},ye=()=>{Z(null),i?.()},q=d=>{he(d),f?.(d)},ve=d=>{W(d),P?.(d)},we=()=>{_({...A,showInsights:!A.showInsights})},I=d=>{const j=d.split(".");if(j.length===1){const E=j[0];_({...A,selectedInsights:{...A.selectedInsights,[E]:!A.selectedInsights[E]}})}else if(j[0]==="essentials"&&j.length===2){const E=j[1];_({...A,selectedInsights:{...A.selectedInsights,essentials:{...A.selectedInsights.essentials,[E]:!A.selectedInsights.essentials[E]}}})}},$=z?x.find(d=>d.id===z):null,X=z?u[z]:null,Ce=z?h[z]:null;return e.jsxs("div",{className:"flex h-full bg-slate-50 dark:bg-slate-950 overflow-hidden",children:[e.jsx(et,{views:t,activeView:k,onViewChange:c}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(tt,{savedSearches:b,onSearch:m,onSaveSearch:y,onLoadSearch:S}),e.jsx(Fe,{dateRange:be,onDateRangeChange:fe,selectedChannels:ke,onChannelsChange:je,showHourlyButton:!0,onHourlyModeToggle:()=>console.log("Switch to hourly mode")}),e.jsx(ot,{selectedCount:R.length,users:s,teams:r,onAssign:(d,j)=>H?.(R,d,j),onClose:()=>{G?.(R),W([])},onAddTags:d=>le?.(R,d),onChangeStatus:d=>oe?.(R,d),onChangePriority:d=>ie?.(R,d),onMarkRead:()=>de?.(R),onClearSelection:()=>W([])}),e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"View:"}),e.jsx("button",{onClick:()=>q("compact"),className:`px-3 py-1.5 rounded text-sm transition-colors
                  ${O==="compact"?"bg-indigo-100 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-900"}
                `,title:"Compact List - Primary mode for high-throughput agents",children:"ðŸ“‹ Compact"}),e.jsx("button",{onClick:()=>q("cards"),className:`px-3 py-1.5 rounded text-sm transition-colors
                  ${O==="cards"?"bg-indigo-100 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-900"}
                `,title:"Detailed Cards - For supervisors, QA, escalations",children:"ðŸ—‚ï¸ Cards"}),e.jsx("button",{onClick:()=>q("table"),className:`px-3 py-1.5 rounded text-sm transition-colors
                  ${O==="table"?"bg-indigo-100 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-900"}
                `,title:"Table View - For ops, reporting, batch operations",children:"ðŸ“Š Table"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex items-center gap-1",children:[e.jsxs("button",{onClick:we,className:`flex items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors ${A.showInsights?"border-indigo-200 bg-indigo-50 text-indigo-700 hover:bg-indigo-100 dark:border-indigo-900 dark:bg-indigo-950 dark:text-indigo-300":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300"}`,children:[A.showInsights?e.jsx(_e,{className:"h-4 w-4"}):e.jsx(qe,{className:"h-4 w-4"}),A.showInsights?"Insights On":"Insights Off"]}),A.showInsights&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>J(!Y),className:"flex items-center gap-1 rounded-lg border border-slate-200 bg-white px-2 py-1.5 text-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Configure"}),e.jsx(ne,{className:"h-3 w-3 text-slate-400"})]}),Y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>J(!1)}),e.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-64 rounded-lg border border-slate-200 bg-white py-2 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"px-3 pb-2 pt-3",children:e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"AI Classifications:"})}),Object.entries({sentiment:"Sentiment",entity:"Entity Type",intent:"Intent",emotion:"Emotion"}).map(([d,j])=>e.jsxs("button",{onClick:()=>I(d),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j}),A.selectedInsights[d]&&e.jsx(U,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},d)),e.jsx("div",{className:"my-2 h-px bg-slate-200 dark:bg-slate-700"}),e.jsx("div",{className:"px-3 pb-2",children:e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Categories & Aspects:"})}),Object.entries({category:"Categories",aspects:"Aspects",aspectGroups:"Aspect Groups"}).map(([d,j])=>e.jsxs("button",{onClick:()=>I(d),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j}),A.selectedInsights[d]&&e.jsx(U,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},d)),e.jsx("div",{className:"my-2 h-px bg-slate-200 dark:bg-slate-700"}),e.jsx("div",{className:"px-3 pb-2",children:e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Special:"})}),e.jsxs("button",{onClick:()=>I("reasonSurfaced"),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Reason Surfaced"}),A.selectedInsights.reasonSurfaced&&e.jsx(U,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]}),e.jsx("div",{className:"my-2 h-px bg-slate-200 dark:bg-slate-700"}),e.jsx("div",{className:"px-3 pb-2",children:e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Essentials:"})}),Object.entries({"essentials.customerName":"Customer Name","essentials.avatar":"Avatar","essentials.handleAndFollowers":"Handle & Followers","essentials.platformAndType":"Platform & Type","essentials.timestamp":"Timestamp","essentials.messageSnippet":"Message Snippet","essentials.messageCount":"Message Count","essentials.priorityBadge":"Priority Badge","essentials.slaStatus":"SLA Status","essentials.unreadCount":"Unread Count"}).map(([d,j])=>{const E=d.split(".")[1];return e.jsxs("button",{onClick:()=>I(d),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j}),A.selectedInsights.essentials[E]&&e.jsx(U,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},d)})]})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[x.length," ticket",x.length!==1?"s":""]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-slate-950",children:e.jsx(nt,{tickets:x,displayMode:O,selectedIds:R,onTicketClick:Ne,onSelectionChange:ve,messageInsights:A})})]}),$&&X&&e.jsx(lt,{ticket:$,conversation:X,aiSuggestions:Ce||[],users:s,teams:r,isOpen:z!==null,onClose:ye,onPopOut:n,onReply:(d,j)=>g?.($.id,d,j),onInternalNote:(d,j)=>M?.($.id,d,j),onAssign:(d,j)=>F?.($.id,d,j),onAddTags:d=>p?.($.id,d),onCreateTask:()=>N?.($.id),onEscalate:()=>T?.($.id),onSendToTeam:(d,j)=>L?.($.id,d,j),onAIFeedbackPositive:ce,onAIFeedbackNegative:xe,onApplyAISuggestion:d=>me?.($.id,d),onDraftSave:d=>pe?.($.id,d),onSubmitForApproval:d=>ue?.($.id,d)}),e.jsx(Le,{isOpen:ge,onClose:()=>Q?.(),teams:[{value:"support",label:"Support Team"},{value:"sales",label:"Sales Team"},{value:"escalation",label:"Escalation Team"},{value:"vip",label:"VIP Support"}],channels:[{value:"twitter",label:"Twitter",icon:"ð•"},{value:"facebook",label:"Facebook",icon:"ðŸ“˜"},{value:"instagram",label:"Instagram",icon:"ðŸ“·"},{value:"email",label:"Email",icon:"ðŸ“§"},{value:"chat",label:"Live Chat",icon:"ðŸ’¬"},{value:"whatsapp",label:"WhatsApp",icon:"ðŸ“±"}],filterFamilies:[{id:"ticket",name:"Ticket",attributes:[{id:"status",name:"Status",type:"select",operators:["is","is not"],options:[{value:"open",label:"Open"},{value:"pending",label:"Pending"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]},{id:"priority",name:"Priority",type:"select",operators:["is","is not"],options:[{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"normal",label:"Normal"},{value:"low",label:"Low"}]},{id:"sentiment",name:"Sentiment",type:"select",operators:["is","is not"],options:[{value:"positive",label:"Positive"},{value:"neutral",label:"Neutral"},{value:"negative",label:"Negative"}]}]},{id:"customer",name:"Customer",attributes:[{id:"followerCount",name:"Follower Count",type:"number",operators:["greater than","less than","equals"]},{id:"isVip",name:"VIP",type:"select",operators:["is"],options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}]},{id:"sla",name:"SLA",attributes:[{id:"breaching",name:"Breaching",type:"select",operators:["is"],options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]},{id:"timeRemaining",name:"Time Remaining (mins)",type:"number",operators:["greater than","less than","equals"]}]}],onApplyFilters:d=>{console.log("Applied filters:",d),Q?.()},onSaveFilter:(d,j)=>{console.log("Saved filter as:",d,j)}})]})}function Ft(){const t=$e,[x,u]=B.useState("view-open"),[h,b]=B.useState(!1);return e.jsxs("div",{className:"h-full overflow-hidden relative",children:[e.jsxs("button",{onClick:()=>b(!0),className:"fixed top-4 right-4 z-30 flex h-9 items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 text-sm font-medium text-slate-600 shadow-lg transition-colors hover:border-slate-300 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-400 dark:hover:border-slate-600 dark:hover:bg-slate-700",title:"Open filters",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"})]}),e.jsx(it,{currentUser:t.currentUser,sidebarViews:t.sidebarViews,tickets:t.tickets,conversationThreads:t.conversationThreads,aiSuggestions:t.aiSuggestions,savedSearches:t.savedSearches,users:t.users,teams:t.teams,displayMode:"compact",activeView:x,isFilterPanelOpen:h,onFilterPanelClose:()=>b(!1),onViewChange:s=>{console.log("View changed:",s),u(s)},onDisplayModeChange:s=>console.log("Display mode changed:",s),onTicketOpen:s=>console.log("Ticket opened:",s),onTicketClose:()=>console.log("Ticket closed"),onPopOut:s=>console.log("Pop out ticket:",s),onSearch:s=>console.log("Search:",s),onSaveSearch:s=>console.log("Save search:",s),onLoadSearch:s=>console.log("Load search:",s),onReply:(s,r,o)=>console.log("Reply:",s,r,o),onInternalNote:(s,r,o)=>console.log("Internal note:",s,r,o),onAssign:(s,r,o)=>console.log("Assign:",s,r,o),onClose:s=>console.log("Close ticket:",s),onAddTags:(s,r)=>console.log("Add tags:",s,r),onCreateTask:s=>console.log("Create task:",s),onEscalate:s=>console.log("Escalate:",s),onSendToTeam:(s,r,o)=>console.log("Send to team:",s,r,o),onChangePriority:(s,r)=>console.log("Change priority:",s,r),onChangeStatus:(s,r)=>console.log("Change status:",s,r),onSelectionChange:s=>console.log("Selection changed:",s),onBulkAssign:(s,r,o)=>console.log("Bulk assign:",s,r,o),onBulkClose:s=>console.log("Bulk close:",s),onBulkTag:(s,r)=>console.log("Bulk tag:",s,r),onBulkStatusChange:(s,r)=>console.log("Bulk status change:",s,r),onBulkPriorityChange:(s,r)=>console.log("Bulk priority change:",s,r),onBulkMarkRead:s=>console.log("Bulk mark read:",s),onAIFeedbackPositive:s=>console.log("AI feedback positive:",s),onAIFeedbackNegative:(s,r)=>console.log("AI feedback negative:",s,r),onApplyAISuggestion:(s,r)=>console.log("Apply AI suggestion:",s,r),onDraftSave:(s,r)=>console.log("Draft save:",s,r),onSubmitForApproval:(s,r)=>console.log("Submit for approval:",s,r)})]})}export{Ft as default};
