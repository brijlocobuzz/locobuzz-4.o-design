import{c as Z,r as c,j as e,G as ee,X as Y,b as te,J as se,i as X,u as Q,d as ae,t as B,P as re,C as le}from"./index-DqtLnMh1.js";import{S as de}from"./settings-Cww9PT4y.js";import{E as ne}from"./eye-cCpQaZ4g.js";import{E as ie}from"./user-plus-BigIN7sF.js";import{C as oe}from"./calendar-CuYHr2BZ.js";import{C as ce}from"./chevron-left-D81Bsy-1.js";const xe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],we=Z("hash",xe);function Ne({data:r,columns:s,rowKey:n,selectedIds:p=[],onRowClick:b,onSelectionChange:f,onCellEdit:v,frozenColumnCount:N=2,className:m=""}){const[k,a]=c.useState(()=>s.map((t,d)=>({id:t.id,width:t.width||150,visible:t.visible!==!1&&t.hidden!==!0,order:d}))),[o,w]=c.useState(!1),[R,l]=c.useState(null),[y,E]=c.useState(null),[S,D]=c.useState(null),[x,F]=c.useState(null),[M,W]=c.useState(null),i=c.useRef(null),j=c.useRef(0),g=c.useRef(0),C=[...k].sort((t,d)=>t.order-d.order).filter(t=>t.visible).map(t=>({...s.find(d=>d.id===t.id),width:t.width})),L=C.slice(0,N),A=C.slice(N),z=t=>{let d=48;for(let u=0;u<t;u++)d+=L[u]?.width||150;return d},H=c.useCallback((t,d)=>{t.preventDefault(),t.stopPropagation(),D(d),j.current=t.clientX;const u=k.find(h=>h.id===d);g.current=u?.width||150},[k]);c.useEffect(()=>{if(!S)return;const t=u=>{const h=u.clientX-j.current,O=Math.max(80,Math.min(500,g.current+h));a($=>$.map(I=>I.id===S?{...I,width:O}:I))},d=()=>{D(null)};return document.addEventListener("mousemove",t),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",d)}},[S]);const T=t=>{a(d=>d.map(u=>u.id===t?{...u,visible:!u.visible}:u))},q=t=>{F(t)},K=(t,d)=>{t.preventDefault(),!(!x||x===d)&&a(u=>{const h=u.findIndex(V=>V.id===x),O=u.findIndex(V=>V.id===d),$=[...u],I=$[h].order,J=$[O].order;return $[h].order=J,$[O].order=I,$})},_=()=>{F(null)},G=(t,d)=>typeof d.accessor=="function"?d.accessor(t):t[d.accessor];return e.jsxs("div",{className:`relative ${m}`,children:[e.jsxs("div",{className:"absolute -top-10 right-0 z-10",children:[e.jsxs("button",{onClick:()=>w(!o),className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:[e.jsx(de,{className:"h-4 w-4"}),"Columns"]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),e.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-72 rounded-lg border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-3 dark:border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Column Settings"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Drag to reorder, toggle visibility"})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto p-2",children:[...k].sort((t,d)=>t.order-d.order).map(t=>{const d=s.find(u=>u.id===t.id);return e.jsxs("div",{draggable:!0,onDragStart:()=>q(t.id),onDragOver:u=>K(u,t.id),onDragEnd:_,className:`flex cursor-grab items-center gap-2 rounded px-2 py-2 transition-colors hover:bg-slate-100 dark:hover:bg-slate-700 ${x===t.id?"opacity-50":""}`,children:[e.jsx(ee,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"flex-1 text-sm text-slate-700 dark:text-slate-300",children:d?.header}),e.jsx("button",{onClick:()=>T(t.id),className:`rounded p-1 transition-colors ${t.visible?"text-indigo-600 hover:bg-indigo-100 dark:text-indigo-400 dark:hover:bg-indigo-950":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:t.visible?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})]},t.id)})})]})]})]}),e.jsx("div",{ref:i,className:"rounded-lg border border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900",style:{width:"100%",overflow:"visible"},children:e.jsxs("table",{className:"w-full border-collapse",style:{tableLayout:"fixed",minWidth:"100%"},children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"sticky left-0 z-20 w-12 border-b border-r border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-700 dark:bg-slate-800",style:{minWidth:48},children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 dark:border-slate-600"})}),L.map((t,d)=>e.jsx("th",{className:"sticky z-20 border-b border-r border-slate-200 bg-slate-50 text-left dark:border-slate-700 dark:bg-slate-800",style:{left:z(d),width:t.width,minWidth:t.minWidth||80,maxWidth:t.maxWidth||400},children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400",children:t.header}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize bg-transparent hover:bg-indigo-400",onMouseDown:u=>H(u,t.id)})]})},t.id)),A.map(t=>e.jsx("th",{className:"relative border-b border-slate-200 bg-slate-50 text-left dark:border-slate-700 dark:bg-slate-800",style:{width:t.flex?`${t.flex*100}%`:t.width,minWidth:t.minWidth||80,maxWidth:t.maxWidth||400},children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400",children:t.header}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize bg-transparent hover:bg-indigo-400",onMouseDown:d=>H(d,t.id)})]})},t.id))]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map(t=>{const d=String(t[n]),u=p.includes(d);return e.jsxs("tr",{onClick:()=>b?.(t),className:`cursor-pointer transition-colors ${u?"bg-indigo-50 dark:bg-indigo-950":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx("td",{className:"sticky left-0 z-10 border-r border-slate-200 bg-inherit px-3 py-1.5 dark:border-slate-700",style:{minWidth:48},onClick:h=>h.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:u,onChange:()=>f?.(d,!u),className:"h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 dark:border-slate-600"})}),L.map((h,O)=>{const $=G(t,h);return R?.rowId===d&&(R?.colId,h.id),M?.rowId===d&&(M?.colId,h.id),e.jsx("td",{className:`sticky z-10 border-r border-slate-200 bg-inherit dark:border-slate-700 ${u?"bg-indigo-50 dark:bg-indigo-950":"bg-white dark:bg-slate-900"}`,style:{left:z(O),width:h.width},children:e.jsx("div",{className:"px-3 py-1.5",children:h.render?h.render($,t,!1,()=>{}):e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:String($??"")})})},h.id)}),A.map(h=>{const O=G(t,h);return e.jsx("td",{style:{width:h.flex?`${h.flex*100}%`:h.width,wordWrap:"break-word",whiteSpace:"normal"},children:e.jsx("div",{className:"px-3 py-1.5",children:h.render?h.render(O,t,!1,()=>{}):e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:String(O??"")})})},h.id)})]},d)})})]})})]})}function P({label:r,options:s,selected:n,onChange:p}){const[b,f]=c.useState(!1),v=c.useRef(null);c.useEffect(()=>{const a=o=>{v.current&&!v.current.contains(o.target)&&f(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const N=a=>{n.includes(a)?p(n.filter(o=>o!==a)):p([...n,a])},m=(a,o)=>{o.stopPropagation(),p([a])},k=s.filter(a=>n.includes(a.value)).map(a=>a.label).join(", ");return e.jsxs("div",{ref:v,className:"relative",children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:r}),e.jsxs("button",{onClick:()=>f(!b),className:"flex w-full items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-left text-sm dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("span",{className:n.length>0?"text-slate-900 dark:text-white":"text-slate-400 dark:text-slate-500",children:n.length>0?k.length>30?`${n.length} selected`:k:`Select ${r.toLowerCase()}...`}),e.jsx(X,{className:`h-4 w-4 text-slate-400 transition-transform ${b?"rotate-180":""}`})]}),b&&e.jsx("div",{className:"absolute left-0 right-0 top-full z-50 mt-1 max-h-60 overflow-auto rounded-lg border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-800",children:s.map(a=>e.jsxs("div",{onClick:()=>N(a.value),className:"group flex cursor-pointer items-center justify-between px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex h-4 w-4 items-center justify-center rounded border ${n.includes(a.value)?"border-indigo-500 bg-indigo-500 text-white":"border-slate-300 dark:border-slate-600"}`,children:n.includes(a.value)&&e.jsx(Q,{className:"h-3 w-3"})}),a.icon&&e.jsx("span",{className:"text-sm",children:a.icon}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.label})]}),e.jsx("button",{onClick:o=>m(a.value,o),className:"hidden rounded px-2 py-0.5 text-xs font-medium text-indigo-600 hover:bg-indigo-50 group-hover:block dark:text-indigo-400 dark:hover:bg-indigo-950",children:"Only"})]},a.value))})]})}function U({filterFamilies:r,group:s,onChange:n,isRoot:p=!0}){const[b,f]=c.useState(null),[v,N]=c.useState(null),m=()=>{if(!b||!v)return;const y=r.find(S=>S.id===b)?.attributes.find(S=>S.id===v);if(!y)return;const E={id:`cond-${Date.now()}`,field:`${b}.${v}`,operator:y.operators[0]||"equals",value:""};n({...s,conditions:[...s.conditions,E]}),f(null),N(null)},k=()=>{const l={id:`group-${Date.now()}`,logic:"AND",conditions:[]};n({...s,conditions:[...s.conditions,l]})},a=l=>{n({...s,conditions:s.conditions.filter(y=>y.id!==l)})},o=(l,y)=>{n({...s,conditions:s.conditions.map(E=>E.id===l?{...E,...y}:E)})},w=()=>{n({...s,logic:s.logic==="AND"?"OR":"AND"})},R=r.find(l=>l.id===b);return e.jsxs("div",{className:`space-y-3 ${p?"":"ml-4 border-l-2 border-slate-200 pl-4 dark:border-slate-700"}`,children:[s.conditions.length>1&&e.jsx("button",{onClick:w,className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-bold text-slate-600 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-slate-700",children:s.logic}),s.conditions.map(l=>{if("logic"in l)return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>a(l.id),className:"absolute -left-2 top-0 rounded-full bg-red-100 p-1 text-red-600 hover:bg-red-200 dark:bg-red-950 dark:text-red-400",children:e.jsx(Y,{className:"h-3 w-3"})}),e.jsx(U,{filterFamilies:r,group:l,onChange:x=>{n({...s,conditions:s.conditions.map(F=>F.id===l.id?x:F)})},isRoot:!1})]},l.id);const[y,E]=l.field.split("."),S=r.find(x=>x.id===y),D=S?.attributes.find(x=>x.id===E);return e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 p-2 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:[S?.name," â†’ ",D?.name]}),e.jsx("select",{value:l.operator,onChange:x=>o(l.id,{operator:x.target.value}),className:"rounded border border-slate-200 bg-white px-2 py-1 text-xs dark:border-slate-600 dark:bg-slate-700",children:D?.operators.map(x=>e.jsx("option",{value:x,children:x},x))}),D?.type==="select"||D?.type==="multiselect"?e.jsxs("select",{value:Array.isArray(l.value)?l.value[0]:l.value,onChange:x=>o(l.id,{value:x.target.value}),className:"flex-1 rounded border border-slate-200 bg-white px-2 py-1 text-xs dark:border-slate-600 dark:bg-slate-700",children:[e.jsx("option",{value:"",children:"Select..."}),D.options?.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}):e.jsx("input",{type:D?.type==="number"?"number":"text",value:Array.isArray(l.value)?l.value.join(", "):l.value,onChange:x=>o(l.id,{value:x.target.value}),placeholder:"Enter value...",className:"flex-1 rounded border border-slate-200 bg-white px-2 py-1 text-xs dark:border-slate-600 dark:bg-slate-700"}),e.jsx("button",{onClick:()=>a(l.id),className:"rounded p-1 text-slate-400 hover:bg-slate-200 hover:text-red-600 dark:hover:bg-slate-700",children:e.jsx(ae,{className:"h-3.5 w-3.5"})})]},l.id)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsxs("select",{value:b||"",onChange:l=>{f(l.target.value||null),N(null)},className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"Select field..."}),r.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 text-slate-400"}),e.jsxs("select",{value:v||"",onChange:l=>N(l.target.value||null),className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"Select attribute..."}),R?.attributes.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),b&&v&&e.jsx("button",{onClick:m,className:"rounded-lg bg-indigo-600 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:e.jsx(re,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:k,className:"rounded-lg border border-dashed border-slate-300 px-3 py-2 text-xs font-medium text-slate-500 hover:border-indigo-500 hover:text-indigo-600 dark:border-slate-600 dark:hover:border-indigo-500",children:"+ Group"})]})]})}function ye({isOpen:r,onClose:s,teams:n,channels:p,filterFamilies:b,activeFilters:f,filterTags:v=[],onApplyFilters:N,onSaveFilter:m,onTagAdd:k,onTagRemove:a,onTeamChange:o,onChannelChange:w,selectedTeams:R=[],selectedChannels:l=[]}){const[y,E]=c.useState(""),[S,D]=c.useState(!1),[x,F]=c.useState(""),[M,W]=c.useState(f||{id:"root",logic:"AND",conditions:[]}),i=g=>{g.key==="Enter"&&y.trim()&&(k?.(y.trim()),E(""))},j=()=>{x.trim()&&(m?.(x.trim(),M),D(!1),F(""))};return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"fixed bottom-0 right-0 top-0 z-50 flex w-[480px] flex-col bg-white shadow-2xl dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-4 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Filters"}),e.jsx("button",{onClick:s,className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800",children:e.jsx(Y,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Quick Filter"}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:y,onChange:g=>E(g.target.value),onKeyDown:i,placeholder:"Type and press Enter to add filter tag...",className:"w-full rounded-lg border border-slate-200 bg-white py-2.5 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 dark:border-slate-700 dark:bg-slate-800"})]}),v.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:v.map(g=>e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-indigo-100 px-3 py-1 text-sm text-indigo-700 dark:bg-indigo-950 dark:text-indigo-300",children:[g,e.jsx("button",{onClick:()=>a?.(g),className:"rounded-full p-0.5 hover:bg-indigo-200 dark:hover:bg-indigo-900",children:e.jsx(Y,{className:"h-3 w-3"})})]},g))})]}),e.jsx("div",{className:"mb-4",children:e.jsx(P,{label:"Team",options:n,selected:R,onChange:g=>o?.(g)})}),e.jsx("div",{className:"mb-6",children:e.jsx(P,{label:"Channel",options:p,selected:l,onChange:g=>w?.(g)})}),e.jsx("div",{className:"mb-6 border-t border-slate-200 dark:border-slate-700"}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Advanced Filters"}),e.jsx(U,{filterFamilies:b,group:M,onChange:W})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-6 py-4 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{W({id:"root",logic:"AND",conditions:[]}),o?.([]),w?.([])},className:"text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:"Clear All"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:[e.jsx(se,{className:"h-4 w-4"}),"Save"]}),e.jsx("button",{onClick:()=>N?.(M),className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Apply Filters"})]})]}),S&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-80 rounded-lg bg-white p-6 shadow-xl dark:bg-slate-800",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-slate-900 dark:text-white",children:"Save Filter"}),e.jsx("input",{type:"text",value:x,onChange:g=>F(g.target.value),placeholder:"Enter filter name...",className:"mb-4 w-full rounded-lg border border-slate-200 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none dark:border-slate-700 dark:bg-slate-900",autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>D(!1),className:"rounded-lg px-4 py-2 text-sm font-medium text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Cancel"}),e.jsx("button",{onClick:j,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Save"})]})]})})]})]}):null}const ue=[{label:"Today",getValue:()=>{const r=new Date;r.setHours(0,0,0,0);const s=new Date(r);return s.setHours(23,59,59,999),{startDate:r,endDate:s,label:"Today"}}},{label:"Yesterday",getValue:()=>{const r=new Date;r.setDate(r.getDate()-1),r.setHours(0,0,0,0);const s=new Date(r);return s.setHours(23,59,59,999),{startDate:r,endDate:s,label:"Yesterday"}}},{label:"Last 2 days",getValue:()=>{const r=new Date;r.setDate(r.getDate()-1),r.setHours(0,0,0,0);const s=new Date;return s.setHours(23,59,59,999),{startDate:r,endDate:s,label:"Last 2 days"}}},{label:"Last 7 days",getValue:()=>{const r=new Date;r.setDate(r.getDate()-6),r.setHours(0,0,0,0);const s=new Date;return s.setHours(23,59,59,999),{startDate:r,endDate:s,label:"Last 7 days"}}},{label:"This week so far",getValue:()=>{const r=new Date,s=r.getDay(),n=new Date(r);n.setDate(r.getDate()-s),n.setHours(0,0,0,0);const p=new Date;return p.setHours(23,59,59,999),{startDate:n,endDate:p,label:"This week so far"}}},{label:"This month so far",getValue:()=>{const r=new Date,s=new Date(r.getFullYear(),r.getMonth(),1);s.setHours(0,0,0,0);const n=new Date;return n.setHours(23,59,59,999),{startDate:s,endDate:n,label:"This month so far"}}},{label:"Last 30 days",getValue:()=>{const r=new Date;r.setDate(r.getDate()-29),r.setHours(0,0,0,0);const s=new Date;return s.setHours(23,59,59,999),{startDate:r,endDate:s,label:"Last 30 days"}}}];function be({value:r,onChange:s,showHourlyButton:n=!0,onHourlyModeToggle:p}){const[b,f]=c.useState(!1),[v,N]=c.useState(r||null),[m,k]=c.useState(null),[a,o]=c.useState(null),[w,R]=c.useState(new Date),l=c.useRef(null);c.useEffect(()=>{const i=j=>{l.current&&!l.current.contains(j.target)&&f(!1)};return b&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[b]);const y=i=>{const j=i.getValue();N(j),s?.(j),f(!1)},E=i=>{!m||m&&a?(k(i),o(null)):i<m?(o(m),k(i)):o(i)},S=()=>{if(m&&a){const i={startDate:m,endDate:a,label:"Custom"};N(i),s?.(i),f(!1),k(null),o(null)}},D=i=>{if(!i)return"Select date range";const j=g=>g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return i.label&&i.label!=="Custom"?i.label:`${j(i.startDate)} - ${j(i.endDate)}`},x=i=>{const j=i.getFullYear(),g=i.getMonth(),C=new Date(j,g,1),A=new Date(j,g+1,0).getDate(),z=C.getDay();return{daysInMonth:A,startingDayOfWeek:z}},F=()=>{const{daysInMonth:i,startingDayOfWeek:j}=x(w),g=[];for(let C=0;C<j;C++)g.push(e.jsx("div",{className:"h-8"},`empty-${C}`));for(let C=1;C<=i;C++){const L=new Date(w.getFullYear(),w.getMonth(),C),A=m&&L.toDateString()===m.toDateString(),z=a&&L.toDateString()===a.toDateString(),H=m&&a&&L>m&&L<a,T=L.toDateString()===new Date().toDateString();g.push(e.jsx("button",{onClick:()=>E(L),className:`h-8 w-8 rounded text-sm transition-colors ${A||z?"bg-indigo-600 text-white":H?"bg-indigo-100 text-indigo-900 dark:bg-indigo-950 dark:text-indigo-100":T?"border border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:C},C))}return g},M=()=>{R(new Date(w.getFullYear(),w.getMonth()-1))},W=()=>{R(new Date(w.getFullYear(),w.getMonth()+1))};return e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{onClick:()=>f(!b),className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm hover:border-slate-400 dark:border-slate-700 dark:bg-slate-800 dark:hover:border-slate-600",children:[e.jsx(oe,{className:"h-4 w-4 text-slate-500 dark:text-slate-400"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:D(v)})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),e.jsx("div",{className:"absolute left-0 top-full z-50 mt-2 w-[600px] rounded-lg border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-48 border-r border-slate-200 p-3 dark:border-slate-700",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold uppercase text-slate-500 dark:text-slate-400",children:"Quick Select"}),e.jsx("div",{className:"space-y-1",children:ue.map(i=>e.jsx("button",{onClick:()=>y(i),className:`w-full rounded px-3 py-2 text-left text-sm transition-colors ${v?.label===i.label?"bg-indigo-100 text-indigo-900 dark:bg-indigo-950 dark:text-indigo-100":"text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:i.label},i.label))}),n&&e.jsx("div",{className:"mt-4 border-t border-slate-200 pt-3 dark:border-slate-700",children:e.jsxs("button",{onClick:()=>{p?.(),f(!1)},className:"flex w-full items-center gap-2 rounded px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-700",children:[e.jsx(le,{className:"h-4 w-4"}),"Hourly (Today)"]})})]}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("button",{onClick:M,className:"rounded p-1 hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsx("div",{className:"font-semibold text-slate-900 dark:text-white",children:w.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:W,className:"rounded p-1 hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(B,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mb-2 grid grid-cols-7 gap-1",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(i=>e.jsx("div",{className:"text-center text-xs font-medium text-slate-500 dark:text-slate-400",children:i},i))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:F()}),(m||a)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-slate-200 pt-3 dark:border-slate-700",children:[e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[m&&!a&&"Select end date",m&&a&&e.jsxs("span",{children:[m.toLocaleDateString()," - ",a.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{k(null),o(null)},className:"rounded px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",children:"Clear"}),e.jsx("button",{onClick:S,disabled:!m||!a,className:"rounded bg-indigo-600 px-3 py-1.5 text-sm text-white hover:bg-indigo-700 disabled:opacity-50",children:"Apply"})]})]})]})]})})]})]})}const me=[{id:"instagram",name:"Instagram",icon:"ðŸ“·",color:"bg-gradient-to-br from-purple-500 to-pink-500"},{id:"facebook",name:"Facebook",icon:"ðŸ‘¥",color:"bg-blue-600"},{id:"x",name:"X (Twitter)",icon:"ðŸ¦",color:"bg-slate-900 dark:bg-slate-200"},{id:"linkedin",name:"LinkedIn",icon:"ðŸ’¼",color:"bg-blue-700"},{id:"youtube",name:"YouTube",icon:"â–¶ï¸",color:"bg-red-600"},{id:"google",name:"Google Reviews",icon:"â­",color:"bg-blue-500"},{id:"whatsapp",name:"WhatsApp",icon:"ðŸ’¬",color:"bg-green-600"},{id:"reddit",name:"Reddit",icon:"ðŸ”´",color:"bg-orange-600"},{id:"trustpilot",name:"Trustpilot",icon:"â­",color:"bg-emerald-600"},{id:"web",name:"Web",icon:"ðŸŒ",color:"bg-slate-600"},{id:"email",name:"Email",icon:"ðŸ“§",color:"bg-purple-600"},{id:"sms",name:"SMS",icon:"ðŸ“±",color:"bg-teal-600"}];function ge({channels:r=me,selectedChannels:s,onChange:n}){const[p,b]=c.useState(!1),f=c.useRef(null);c.useEffect(()=>{const a=o=>{f.current&&!f.current.contains(o.target)&&b(!1)};return p&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[p]);const v=a=>{s.includes(a)?n(s.filter(o=>o!==a)):n([...s,a])},N=()=>{n(r.map(a=>a.id))},m=()=>{n([])},k=()=>{if(s.length===0||s.length===r.length)return"All Channels";if(s.length===1){const a=r.find(o=>o.id===s[0]);return a?a.name:"1 Channel"}return`${s.length} Channels`};return e.jsxs("div",{className:"relative",ref:f,children:[e.jsxs("button",{onClick:()=>b(!p),className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm hover:border-slate-400 dark:border-slate-700 dark:bg-slate-800 dark:hover:border-slate-600",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:k()}),e.jsx(X,{className:"h-4 w-4 text-slate-500 dark:text-slate-400"})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)}),e.jsxs("div",{className:"absolute left-0 top-full z-50 mt-2 w-80 rounded-lg border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3 dark:border-slate-700",children:[e.jsx("div",{className:"font-semibold text-slate-900 dark:text-white",children:"Filter by Channel"}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsx("button",{onClick:N,className:"text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Select All"}),e.jsx("span",{className:"text-slate-400",children:"â€¢"}),e.jsx("button",{onClick:m,className:"text-slate-600 hover:text-slate-700 dark:text-slate-400",children:"Clear"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto p-2",children:r.map(a=>{const o=s.includes(a.id);return e.jsxs("button",{onClick:()=>v(a.id),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 transition-colors ${o?"bg-indigo-50 dark:bg-indigo-950/30":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded ${a.color} text-white`,children:e.jsx("span",{className:"text-sm",children:a.icon})}),e.jsx("span",{className:"flex-1 text-left text-sm text-slate-700 dark:text-slate-300",children:a.name}),o&&e.jsx(Q,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},a.id)})}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 dark:border-slate-700",children:e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.length===0?"No channels selected (showing all)":`${s.length} of ${r.length} selected`})})]})]})]})}function De({dateRange:r,onDateRangeChange:s,selectedChannels:n=[],onChannelsChange:p,channels:b,showHourlyButton:f=!0,onHourlyModeToggle:v}){return e.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-200 bg-white px-4 py-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Filters:"}),e.jsx(be,{value:r,onChange:s,showHourlyButton:f,onHourlyModeToggle:v}),e.jsx(ge,{channels:b||[],selectedChannels:n,onChange:p||(()=>{})})]})}export{Ne as D,De as F,we as H,ye as a};
