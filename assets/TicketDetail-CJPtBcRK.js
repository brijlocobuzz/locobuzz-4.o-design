import{c as y,r as j,C as T,f as B,j as e,i as z,d as ce,P as xe,u as $,t as O,X as Z,v as re,k as me,w as ge,l as ue}from"./index-DqtLnMh1.js";import{C as S}from"./circle-check-DG_ZY5e7.js";import{M as de}from"./message-square-DbZmWq9p.js";import{T as L}from"./tag-SzIbadAA.js";import{E as be}from"./eye-cCpQaZ4g.js";import{E as he,U as Q}from"./user-plus-BigIN7sF.js";import{E as pe,I as fe}from"./share-2-BqOaG2HX.js";import{C as je}from"./copy-o5kPzpo8.js";import{E as X}from"./external-link-piAxCzlZ.js";import{C as ke,E as ve,R as Ne,a as we}from"./EmailReplyComposer-D9dITuIc.js";import{U as ie}from"./user-AEg5BI1F.js";import{M as w}from"./message-circle-Bfa1UWit.js";import{T as ee}from"./trending-up-oSIESFBK.js";import{U as ye}from"./users-ClP1_B-1.js";import{R as Ce}from"./refresh-cw-DScilYff.js";import{S as te}from"./star-DKJOQZiJ.js";import{C as Se}from"./chevron-left-D81Bsy-1.js";const Te=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],H=y("activity",Te);const Ae=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Me=y("archive",Ae);const Re=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ee=y("brain",Re);const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Ie=y("circle-arrow-up",Pe);const Fe=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],De=y("flag",Fe);const $e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],W=y("link-2",$e);const Ue=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],ze=y("merge",Ue);const Le=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],se=y("pen-line",Le);const qe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ne=y("pen",qe);const _e=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Be=y("ticket",_e);const Oe=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ve=y("user-check",Oe),K={new:{label:"New",color:"purple",icon:de},open:{label:"Open",color:"blue",icon:B},pending:{label:"Pending",color:"yellow",icon:T},"in-progress":{label:"In Progress",color:"yellow",icon:T},resolved:{label:"Resolved",color:"green",icon:S},closed:{label:"Closed",color:"gray",icon:S}},J={low:{label:"Low",color:"slate"},medium:{label:"Medium",color:"yellow"},high:{label:"High",color:"orange"},urgent:{label:"Urgent",color:"red"}},Ge=["delivery-issue","premium-customer","billing-question","product-quality","feature-request","bug-report","urgent","vip","follow-up-needed"];function He({ticket:t,hasNextTicket:r=!0,messageInsights:s,onMessageInsightsChange:a,onChangeStatus:l,onChangePriority:c,onAddTag:d,onRemoveTag:m,onNextTicket:g,onClose:i}){const[k,b]=j.useState(!1),[o,p]=j.useState(!1),[A,f]=j.useState(!1),[h,u]=j.useState(!1),[C,v]=j.useState(!1),[E,q]=j.useState(""),P=K[t.status]||K.open,Y=P.icon,F=J[t.priority]||J.medium,N=n=>{n&&!t.tags.includes(n)&&(d?.(n),q(""))},V=()=>{s&&a&&a({...s,showInsights:!s.showInsights})},D=n=>{if(s&&a){const x=n.split(".");if(x.length===1){const R=x[0];a({...s,selectedInsights:{...s.selectedInsights,[R]:!s.selectedInsights[R]}})}else if(x[0]==="essentials"&&x.length===2){const R=x[1];a({...s,selectedInsights:{...s.selectedInsights,essentials:{...s.selectedInsights.essentials,[R]:!s.selectedInsights.essentials[R]}}})}}},U=()=>{s&&a&&a({...s,selectedInsights:{sentiment:!0,entity:!0,intent:!0,emotion:!0,category:!0,aspects:!0,aspectGroups:!0,reasonSurfaced:!0,essentials:{customerName:!0,avatar:!0,handleAndFollowers:!0,platformAndType:!0,timestamp:!0,messageSnippet:!0,messageCount:!0,priorityBadge:!0,slaStatus:!0,unreadCount:!0}}})},_=()=>{s&&a&&a({...s,selectedInsights:{sentiment:!1,entity:!1,intent:!1,emotion:!1,category:!1,aspects:!1,aspectGroups:!1,reasonSurfaced:!1,essentials:{customerName:!1,avatar:!1,handleAndFollowers:!1,platformAndType:!1,timestamp:!1,messageSnippet:!1,messageCount:!1,priorityBadge:!1,slaStatus:!1,unreadCount:!1}}})},I=n=>{if(s&&a){const x={};switch(n){case"ai":x.sentiment=!0,x.entity=!0,x.intent=!0,x.emotion=!0;break;case"categories":x.category=!0,x.aspects=!0,x.aspectGroups=!0;break;case"special":x.reasonSurfaced=!0;break;case"essentials":x.essentials={customerName:!0,avatar:!0,handleAndFollowers:!0,platformAndType:!0,timestamp:!0,messageSnippet:!0,messageCount:!0,priorityBadge:!0,slaStatus:!0,unreadCount:!0};break}a({...s,selectedInsights:{...s.selectedInsights,...x}})}},M=n=>{if(s&&a){const x={};switch(n){case"ai":x.sentiment=!1,x.entity=!1,x.intent=!1,x.emotion=!1;break;case"categories":x.category=!1,x.aspects=!1,x.aspectGroups=!1;break;case"special":x.reasonSurfaced=!1;break;case"essentials":x.essentials={customerName:!1,avatar:!1,handleAndFollowers:!1,platformAndType:!1,timestamp:!1,messageSnippet:!1,messageCount:!1,priorityBadge:!1,slaStatus:!1,unreadCount:!1};break}a({...s,selectedInsights:{...s.selectedInsights,...x}})}},G=n=>{v(!1),console.log(`Action: ${n}`)},oe=[{id:"assign",label:"Reassign Ticket",icon:Q},{id:"merge",label:"Merge with Another",icon:ze},{id:"flag",label:"Flag for Review",icon:De},{id:"copy-link",label:"Copy Link",icon:je},{id:"open-external",label:"Open in CRM",icon:X},{id:"archive",label:"Archive Ticket",icon:Me}];return e.jsxs("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:t.ticketNumber}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{b(!k),p(!1),f(!1),v(!1)},className:`flex items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors
                ${P.color==="blue"?"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950 dark:text-blue-300":P.color==="yellow"?"border-yellow-200 bg-yellow-50 text-yellow-700 hover:bg-yellow-100 dark:border-yellow-900 dark:bg-yellow-950 dark:text-yellow-300":P.color==="green"?"border-green-200 bg-green-50 text-green-700 hover:bg-green-100 dark:border-green-900 dark:bg-green-950 dark:text-green-300":"border-slate-200 bg-slate-50 text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300"}`,children:[e.jsx(Y,{className:"h-4 w-4"}),P.label,e.jsx(z,{className:"h-3 w-3"})]}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)}),e.jsx("div",{className:"absolute left-0 top-full z-50 mt-2 w-48 rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:Object.entries(K).map(([n,x])=>{const R=x.icon;return e.jsxs("button",{onClick:()=>{l?.(n),b(!1)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx(R,{className:"h-4 w-4"}),x.label]},n)})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{p(!o),b(!1),f(!1),v(!1)},className:`flex items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors
                ${F.color==="red"?"border-red-200 bg-red-50 text-red-700 hover:bg-red-100 dark:border-red-900 dark:bg-red-950 dark:text-red-300":F.color==="orange"?"border-orange-200 bg-orange-50 text-orange-700 hover:bg-orange-100 dark:border-orange-900 dark:bg-orange-950 dark:text-orange-300":F.color==="yellow"?"border-yellow-200 bg-yellow-50 text-yellow-700 hover:bg-yellow-100 dark:border-yellow-900 dark:bg-yellow-950 dark:text-yellow-300":"border-slate-200 bg-slate-50 text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300"}`,children:[F.label,e.jsx(z,{className:"h-3 w-3"})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute left-0 top-full z-50 mt-2 w-40 rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:Object.entries(J).map(([n,x])=>e.jsx("button",{onClick:()=>{c?.(n),p(!1)},className:"flex w-full items-center px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:x.label},n))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{f(!A),b(!1),p(!1),v(!1)},className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-sm hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:[e.jsx(L,{className:"h-4 w-4 text-slate-400"}),t.tags&&t.tags.length>0?e.jsxs(e.Fragment,{children:[t.tags.slice(0,2).map((n,x)=>e.jsx("span",{className:"rounded bg-slate-100 px-2 py-0.5 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:n},x)),t.tags.length>2&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",t.tags.length-2]})]}):e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add tags"}),e.jsx(z,{className:"h-3 w-3 text-slate-400"})]}),A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),e.jsxs("div",{className:"absolute left-0 top-full z-50 mt-2 w-64 rounded-lg border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[t.tags&&t.tags.length>0&&e.jsxs("div",{className:"border-b border-slate-200 p-3 dark:border-slate-700",children:[e.jsx("p",{className:"mb-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Current Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(n=>e.jsxs("button",{onClick:()=>m?.(n),className:"group flex items-center gap-1 rounded bg-slate-100 px-2 py-1 text-xs text-slate-600 hover:bg-red-50 hover:text-red-600 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-red-950 dark:hover:text-red-400",children:[n,e.jsx(ce,{className:"h-3 w-3 opacity-0 transition-opacity group-hover:opacity-100"})]},n))})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"mb-2 flex gap-2",children:[e.jsx("input",{type:"text",value:E,onChange:n=>q(n.target.value),onKeyPress:n=>n.key==="Enter"&&N(E),placeholder:"Type tag name...",className:"flex-1 rounded border border-slate-200 bg-white px-2 py-1 text-xs text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-900 dark:text-white"}),e.jsxs("button",{onClick:()=>N(E),className:"flex items-center gap-1 rounded bg-indigo-600 px-3 py-1 text-xs text-white hover:bg-indigo-700 dark:bg-indigo-500",children:[e.jsx(xe,{className:"h-3 w-3"}),"Add"]})]}),e.jsx("p",{className:"mb-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Suggested"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ge.filter(n=>!t.tags?.includes(n)).slice(0,6).map(n=>e.jsx("button",{onClick:()=>N(n),className:"rounded bg-slate-50 px-2 py-1 text-xs text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 dark:bg-slate-900 dark:text-slate-400 dark:hover:bg-indigo-950 dark:hover:text-indigo-400",children:n},n))})]})]})]})]}),s&&e.jsxs("div",{className:"relative ml-2 flex items-center gap-1 border-l border-slate-200 pl-4 dark:border-slate-700",children:[e.jsxs("button",{onClick:V,className:`flex items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors ${s.showInsights?"border-indigo-200 bg-indigo-50 text-indigo-700 hover:bg-indigo-100 dark:border-indigo-900 dark:bg-indigo-950 dark:text-indigo-300":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300"}`,children:[s.showInsights?e.jsx(be,{className:"h-4 w-4"}):e.jsx(he,{className:"h-4 w-4"}),s.showInsights?"Insights On":"Insights Off"]}),s.showInsights&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{u(!h),b(!1),p(!1),f(!1),v(!1)},className:"flex items-center gap-1 rounded-lg border border-slate-200 bg-white px-2 py-1.5 text-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Configure"}),e.jsx(z,{className:"h-3 w-3 text-slate-400"})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),e.jsxs("div",{className:"absolute left-0 top-full z-50 mt-2 w-64 rounded-lg border border-slate-200 bg-white py-2 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex gap-2 px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:U,className:"flex-1 px-3 py-1.5 text-xs font-medium rounded bg-indigo-50 text-indigo-700 hover:bg-indigo-100 dark:bg-indigo-950 dark:text-indigo-300 dark:hover:bg-indigo-900",children:"Select All"}),e.jsx("button",{onClick:_,className:"flex-1 px-3 py-1.5 text-xs font-medium rounded bg-slate-100 text-slate-700 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:"Deselect All"})]}),e.jsxs("div",{className:"flex items-center justify-between px-3 pb-2 pt-3",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"AI Classifications:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>I("ai"),className:"px-2 py-0.5 text-xs text-indigo-600 hover:bg-indigo-50 rounded dark:text-indigo-400 dark:hover:bg-indigo-950",children:"All"}),e.jsx("button",{onClick:()=>M("ai"),className:"px-2 py-0.5 text-xs text-slate-500 hover:bg-slate-100 rounded dark:text-slate-400 dark:hover:bg-slate-800",children:"None"})]})]}),Object.entries({sentiment:"Sentiment",entity:"Entity Type",intent:"Intent",emotion:"Emotion"}).map(([n,x])=>e.jsxs("button",{onClick:()=>D(n),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:x}),s.selectedInsights[n]&&e.jsx($,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},n)),e.jsx("div",{className:"my-2 h-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center justify-between px-3 pb-2",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Categories & Aspects:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>I("categories"),className:"px-2 py-0.5 text-xs text-indigo-600 hover:bg-indigo-50 rounded dark:text-indigo-400 dark:hover:bg-indigo-950",children:"All"}),e.jsx("button",{onClick:()=>M("categories"),className:"px-2 py-0.5 text-xs text-slate-500 hover:bg-slate-100 rounded dark:text-slate-400 dark:hover:bg-slate-800",children:"None"})]})]}),Object.entries({category:"Categories",aspects:"Aspects",aspectGroups:"Aspect Groups"}).map(([n,x])=>e.jsxs("button",{onClick:()=>D(n),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:x}),s.selectedInsights[n]&&e.jsx($,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},n)),e.jsx("div",{className:"my-2 h-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center justify-between px-3 pb-2",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Special:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>I("special"),className:"px-2 py-0.5 text-xs text-indigo-600 hover:bg-indigo-50 rounded dark:text-indigo-400 dark:hover:bg-indigo-950",children:"All"}),e.jsx("button",{onClick:()=>M("special"),className:"px-2 py-0.5 text-xs text-slate-500 hover:bg-slate-100 rounded dark:text-slate-400 dark:hover:bg-slate-800",children:"None"})]})]}),e.jsxs("button",{onClick:()=>D("reasonSurfaced"),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Reason Surfaced"}),s.selectedInsights.reasonSurfaced&&e.jsx($,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]}),e.jsx("div",{className:"my-2 h-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center justify-between px-3 pb-2",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Essentials:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>I("essentials"),className:"px-2 py-0.5 text-xs text-indigo-600 hover:bg-indigo-50 rounded dark:text-indigo-400 dark:hover:bg-indigo-950",children:"All"}),e.jsx("button",{onClick:()=>M("essentials"),className:"px-2 py-0.5 text-xs text-slate-500 hover:bg-slate-100 rounded dark:text-slate-400 dark:hover:bg-slate-800",children:"None"})]})]}),Object.entries({"essentials.customerName":"Customer Name","essentials.avatar":"Avatar","essentials.handleAndFollowers":"Handle & Followers","essentials.platformAndType":"Platform & Type","essentials.timestamp":"Timestamp","essentials.messageSnippet":"Message Snippet","essentials.messageCount":"Message Count","essentials.priorityBadge":"Priority Badge","essentials.slaStatus":"SLA Status","essentials.unreadCount":"Unread Count"}).map(([n,x])=>{const R=n.split(".")[1];return e.jsxs("button",{onClick:()=>D(n),className:"flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:x}),s.selectedInsights.essentials[R]&&e.jsx($,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})]},n)})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsxs("button",{onClick:g,className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:["Next",e.jsx(O,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>{v(!C),b(!1),p(!1),f(!1)},className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800 dark:hover:text-slate-300",children:e.jsx(pe,{className:"h-5 w-5"})}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),e.jsx("div",{className:"absolute right-0 top-full z-50 mt-2 w-56 rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:oe.map(n=>{const x=n.icon;return e.jsxs("button",{onClick:()=>G(n.id),className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 dark:text-slate-300 dark:hover:bg-slate-700",children:[e.jsx(x,{className:"h-4 w-4 text-slate-400"}),n.label]},n.id)})})]})]}),e.jsx("button",{onClick:i,className:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800 dark:hover:text-slate-300",children:e.jsx(Z,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["First Response:"," ",e.jsxs("span",{className:t.sla.firstResponse.status==="due-soon"?"font-medium text-orange-600 dark:text-orange-400":"font-medium text-green-600 dark:text-green-400",children:[t.sla.firstResponse.remainingMinutes,"m remaining"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Resolution:"," ",e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:[Math.floor(t.sla.resolution.remainingMinutes/60),"h"," ",t.sla.resolution.remainingMinutes%60,"m remaining"]})]})]})]})]})}const Ke=[{id:"customer",icon:ie,label:"Customer Info",tooltip:"Customer Information"},{id:"classification",icon:re,label:"Classification",tooltip:"AI Classification & Entities"},{id:"personal-details",icon:me,label:"Personal Details",tooltip:"Personal Details (CRM)"},{id:"ticket-info",icon:Be,label:"Ticket Info",tooltip:"Ticket Information"},{id:"crm-integration",icon:W,label:"CRM",tooltip:"CRM Integration"},{id:"timeline",icon:T,label:"Timeline",tooltip:"Ticket Timeline"}];function Je({activeView:t,onViewChange:r,crmConnected:s}){return e.jsx("div",{className:"flex w-16 flex-col border-l border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:e.jsx("div",{className:"flex flex-1 flex-col items-center gap-2 py-4",children:Ke.map(a=>{const l=a.icon,c=t===a.id,d=a.id==="crm-integration"&&s;return e.jsxs("button",{onClick:()=>r(a.id),title:a.tooltip,className:`group relative flex h-12 w-12 items-center justify-center rounded-lg transition-colors ${c?"bg-indigo-100 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800 dark:hover:text-slate-300"}`,children:[e.jsx(l,{className:"h-5 w-5"}),d&&e.jsx("span",{className:"absolute right-1 top-1 h-2 w-2 rounded-full bg-green-500 ring-2 ring-white dark:ring-slate-900"}),e.jsx("div",{className:"pointer-events-none absolute right-full mr-2 whitespace-nowrap rounded-lg bg-slate-900 px-3 py-1.5 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 dark:bg-slate-700",children:a.tooltip})]},a.id)})})})}const ae={instagram:fe,facebook:w,twitter:w,linkedin:w};function Qe({ticket:t,crmConnected:r=!1}){const{author:s,contact:a}=t,l=ae[s.platform]||w,c=r?{matched:!0,crmId:"CRM-45678",crmName:"Jessica Martinez",matchConfidence:95}:null,d=a?{id:a.id,linkedAuthors:[{platform:"instagram",handle:"@jessicam_designs",verified:!1},{platform:"facebook",handle:"Jessica Martinez",verified:!1},{platform:"twitter",handle:"@jessicamart",verified:!0}],firstSeen:"2023-08-15T10:00:00Z",totalInteractions:a.previousInteractions+1}:null;return e.jsxs("div",{className:"flex h-full flex-col overflow-y-auto bg-slate-50 p-6 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"text-center",children:[s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:s.name,className:"mx-auto h-20 w-20 rounded-full ring-4 ring-white dark:ring-slate-800"}):e.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-indigo-100 ring-4 ring-white dark:bg-indigo-950 dark:ring-slate-800",children:e.jsx(ie,{className:"h-10 w-10 text-indigo-600 dark:text-indigo-400"})}),e.jsx("h3",{className:"mt-3 font-semibold text-slate-900 dark:text-white",children:s.name}),e.jsxs("div",{className:"mt-1 flex items-center justify-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:s.username}),s.isVerified&&e.jsx(S,{className:"h-4 w-4 text-blue-500 dark:text-blue-400"})]})]}),s.bio&&e.jsx("div",{className:"mt-4 rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.bio})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(ee,{className:"h-3 w-3"}),"Followers"]}),e.jsxs("div",{className:"mt-1 text-lg font-semibold text-slate-900 dark:text-white",children:[(s.followerCount/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(ee,{className:"h-3 w-3"}),"Engagement"]}),e.jsxs("div",{className:"mt-1 text-lg font-semibold text-slate-900 dark:text-white",children:[s.engagementRate,"%"]})]})]}),e.jsx("div",{className:"mt-4 rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ve,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Follows your brand"})]}),s.followsBrand?e.jsx(S,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx("span",{className:"text-xs text-slate-400",children:"No"})]})}),r&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"CRM Match"}),c&&c.matched?e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-900 dark:bg-green-950/20",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Matched"}),e.jsx("div",{className:"mt-0.5 text-xs text-green-700 dark:text-green-300",children:c.crmName}),e.jsxs("div",{className:"mt-0.5 text-xs text-green-600 dark:text-green-400",children:["ID: ",c.crmId]})]})]}),e.jsx("button",{className:"text-xs text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(X,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 flex-1 rounded-full bg-green-200 dark:bg-green-900",children:e.jsx("div",{className:"h-full rounded-full bg-green-600 dark:bg-green-500",style:{width:`${c.matchConfidence}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:[c.matchConfidence,"%"]})]})]}):e.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800",children:e.jsx("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:"No CRM match found"})})]}),d&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Contact Record"}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ye,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[d.linkedAuthors.length," linked social accounts"]})]}),e.jsx("div",{className:"mt-3 space-y-2",children:d.linkedAuthors.map((m,g)=>{const i=ae[m.platform]||w;return e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50 px-3 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:m.handle})]}),m.verified&&e.jsx(S,{className:"h-3 w-3 text-blue-500 dark:text-blue-400"})]},g)})}),e.jsxs("div",{className:"mt-3 space-y-1 border-t border-slate-100 pt-3 text-xs dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"First seen"}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(d.firstSeen).toLocaleDateString("en-US",{month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Total interactions"}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:d.totalInteractions})]})]})]})]})]})}function Ze({contact:t,onSave:r}){const[s,a]=j.useState(!1),[l,c]=j.useState({name:t.name||"",email:t.email||"",phone:t.phone||"",company:t.company||"",jobTitle:t.jobTitle||"",location:t.location||"",customerTier:t.customerTier||"standard",preferredLanguage:t.preferredLanguage||"en",timezone:t.timezone||"UTC",tags:t.tags||[]}),d=()=>{r?.(l),a(!1)},m=()=>{c({name:t.name||"",email:t.email||"",phone:t.phone||"",company:t.company||"",jobTitle:t.jobTitle||"",location:t.location||"",customerTier:t.customerTier||"standard",preferredLanguage:t.preferredLanguage||"en",timezone:t.timezone||"UTC",tags:t.tags||[]}),a(!1)};return e.jsxs("div",{className:"flex h-full w-96 flex-col overflow-y-auto bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Personal Details"}),s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:[e.jsx(Z,{className:"h-4 w-4"}),"Cancel"]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 rounded-lg bg-indigo-600 px-3 py-1.5 text-sm text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:[e.jsx($,{className:"h-4 w-4"}),"Save"]})]}):e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:[e.jsx(ne,{className:"h-4 w-4"}),"Edit"]})]})}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Basic Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Full Name"}),e.jsx("input",{type:"text",value:l.name,onChange:g=>c({...l,name:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Email Address"}),e.jsx("input",{type:"email",value:l.email,onChange:g=>c({...l,email:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Phone Number"}),e.jsx("input",{type:"tel",value:l.phone,onChange:g=>c({...l,phone:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Professional Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Company"}),e.jsx("input",{type:"text",value:l.company,onChange:g=>c({...l,company:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Job Title"}),e.jsx("input",{type:"text",value:l.jobTitle,onChange:g=>c({...l,jobTitle:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Location"}),e.jsx("input",{type:"text",value:l.location,onChange:g=>c({...l,location:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Customer Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Customer Tier"}),e.jsxs("select",{value:l.customerTier,onChange:g=>c({...l,customerTier:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400",children:[e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"vip",children:"VIP"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Preferred Language"}),e.jsxs("select",{value:l.preferredLanguage,onChange:g=>c({...l,preferredLanguage:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"hi",children:"Hindi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Timezone"}),e.jsxs("select",{value:l.timezone,onChange:g=>c({...l,timezone:g.target.value}),disabled:!s,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Asia/Kolkata",children:"India"})]})]})]})]})]})})]})}const le={escalate:["escalationReason","escalationNotes"],close:["resolutionNotes","rootCause","dispositionCode"]};function Xe({ticket:t,onSave:r,onEscalate:s,onClose:a}){const[l,c]=j.useState(!1),[d,m]=j.useState({category:t.category||"",subcategory:t.subcategory||"",productAffected:t.productAffected||"",issueType:t.issueType||"",severity:t.severity||"medium",resolutionNotes:t.resolutionNotes||"",rootCause:t.rootCause||"",dispositionCode:t.dispositionCode||"",escalationReason:t.escalationReason||"",escalationNotes:t.escalationNotes||"",internalReference:t.internalReference||""}),[g,i]=j.useState([]),k=()=>{r?.(d),c(!1)},b=()=>{m({category:t.category||"",subcategory:t.subcategory||"",productAffected:t.productAffected||"",issueType:t.issueType||"",severity:t.severity||"medium",resolutionNotes:t.resolutionNotes||"",rootCause:t.rootCause||"",dispositionCode:t.dispositionCode||"",escalationReason:t.escalationReason||"",escalationNotes:t.escalationNotes||"",internalReference:t.internalReference||""}),c(!1),i([])},o=u=>{const v=le[u].filter(E=>!d[E]);return v.length>0?(i(v),!1):(i([]),!0)},p=()=>{o("escalate")&&s?.()},A=()=>{o("close")&&a?.()},f=(u,C)=>le[C].includes(u),h=u=>g.includes(u);return e.jsxs("div",{className:"flex h-full w-96 flex-col overflow-y-auto bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Ticket Information"}),l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:b,className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:[e.jsx(Z,{className:"h-4 w-4"}),"Cancel"]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 rounded-lg bg-indigo-600 px-3 py-1.5 text-sm text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:[e.jsx($,{className:"h-4 w-4"}),"Save"]})]}):e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-sm text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:[e.jsx(ne,{className:"h-4 w-4"}),"Edit"]})]})}),g.length>0&&e.jsx("div",{className:"border-b border-red-200 bg-red-50 p-4 dark:border-red-900 dark:bg-red-950/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(B,{className:"h-5 w-5 flex-shrink-0 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Missing Required Fields"}),e.jsx("p",{className:"mt-1 text-xs text-red-700 dark:text-red-300",children:"Please fill in all mandatory fields before proceeding"})]})]})}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Classification"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Category"}),e.jsxs("select",{value:d.category,onChange:u=>m({...d,category:u.target.value}),disabled:!l,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"product",children:"Product Issue"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"technical",children:"Technical Support"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Subcategory"}),e.jsxs("select",{value:d.subcategory,onChange:u=>m({...d,subcategory:u.target.value}),disabled:!l,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400",children:[e.jsx("option",{value:"",children:"Select subcategory"}),e.jsx("option",{value:"delivery",children:"Delivery Delay"}),e.jsx("option",{value:"quality",children:"Quality Issue"}),e.jsx("option",{value:"missing",children:"Missing Items"}),e.jsx("option",{value:"damaged",children:"Damaged Product"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Product Affected"}),e.jsx("input",{type:"text",value:d.productAffected,onChange:u=>m({...d,productAffected:u.target.value}),disabled:!l,placeholder:"e.g., Premium Package",className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50 disabled:text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:disabled:bg-slate-900 dark:disabled:text-slate-400"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:["Resolution Information",e.jsx("span",{className:"rounded bg-orange-100 px-1.5 py-0.5 text-xs font-medium text-orange-700 dark:bg-orange-950 dark:text-orange-300",children:"Required to Close"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`mb-1 flex items-center gap-1 text-xs font-medium ${h("resolutionNotes")?"text-red-700 dark:text-red-300":"text-slate-700 dark:text-slate-300"}`,children:["Resolution Notes",f("resolutionNotes","close")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:d.resolutionNotes,onChange:u=>m({...d,resolutionNotes:u.target.value}),disabled:!l,rows:3,placeholder:"Describe how the issue was resolved...",className:`w-full resize-none rounded-lg border px-3 py-2 text-sm placeholder-slate-400 focus:outline-none focus:ring-1 disabled:bg-slate-50 disabled:text-slate-500 dark:disabled:bg-slate-900 dark:disabled:text-slate-400 ${h("resolutionNotes")?"border-red-300 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-500 dark:border-red-700 dark:bg-red-950/20 dark:text-red-100":"border-slate-200 bg-white text-slate-900 focus:border-indigo-500 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`mb-1 flex items-center gap-1 text-xs font-medium ${h("rootCause")?"text-red-700 dark:text-red-300":"text-slate-700 dark:text-slate-300"}`,children:["Root Cause",f("rootCause","close")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:d.rootCause,onChange:u=>m({...d,rootCause:u.target.value}),disabled:!l,className:`w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-1 disabled:bg-slate-50 disabled:text-slate-500 dark:disabled:bg-slate-900 dark:disabled:text-slate-400 ${h("rootCause")?"border-red-300 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-500 dark:border-red-700 dark:bg-red-950/20 dark:text-red-100":"border-slate-200 bg-white text-slate-900 focus:border-indigo-500 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"}`,children:[e.jsx("option",{value:"",children:"Select root cause"}),e.jsx("option",{value:"user-error",children:"User Error"}),e.jsx("option",{value:"product-bug",children:"Product Bug"}),e.jsx("option",{value:"external-service",children:"External Service Issue"}),e.jsx("option",{value:"process-failure",children:"Process Failure"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`mb-1 flex items-center gap-1 text-xs font-medium ${h("dispositionCode")?"text-red-700 dark:text-red-300":"text-slate-700 dark:text-slate-300"}`,children:["Disposition Code",f("dispositionCode","close")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:d.dispositionCode,onChange:u=>m({...d,dispositionCode:u.target.value}),disabled:!l,className:`w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-1 disabled:bg-slate-50 disabled:text-slate-500 dark:disabled:bg-slate-900 dark:disabled:text-slate-400 ${h("dispositionCode")?"border-red-300 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-500 dark:border-red-700 dark:bg-red-950/20 dark:text-red-100":"border-slate-200 bg-white text-slate-900 focus:border-indigo-500 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"}`,children:[e.jsx("option",{value:"",children:"Select disposition"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"workaround",children:"Workaround Provided"}),e.jsx("option",{value:"not-reproducible",children:"Not Reproducible"}),e.jsx("option",{value:"customer-error",children:"Customer Error"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:["Escalation Information",e.jsx("span",{className:"rounded bg-orange-100 px-1.5 py-0.5 text-xs font-medium text-orange-700 dark:bg-orange-950 dark:text-orange-300",children:"Required to Escalate"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`mb-1 flex items-center gap-1 text-xs font-medium ${h("escalationReason")?"text-red-700 dark:text-red-300":"text-slate-700 dark:text-slate-300"}`,children:["Escalation Reason",f("escalationReason","escalate")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:d.escalationReason,onChange:u=>m({...d,escalationReason:u.target.value}),disabled:!l,className:`w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-1 disabled:bg-slate-50 disabled:text-slate-500 dark:disabled:bg-slate-900 dark:disabled:text-slate-400 ${h("escalationReason")?"border-red-300 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-500 dark:border-red-700 dark:bg-red-950/20 dark:text-red-100":"border-slate-200 bg-white text-slate-900 focus:border-indigo-500 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"}`,children:[e.jsx("option",{value:"",children:"Select reason"}),e.jsx("option",{value:"complex",children:"Complex Technical Issue"}),e.jsx("option",{value:"vip",children:"VIP Customer"}),e.jsx("option",{value:"sla-breach",children:"SLA Breach Risk"}),e.jsx("option",{value:"management-request",children:"Management Request"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`mb-1 flex items-center gap-1 text-xs font-medium ${h("escalationNotes")?"text-red-700 dark:text-red-300":"text-slate-700 dark:text-slate-300"}`,children:["Escalation Notes",f("escalationNotes","escalate")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:d.escalationNotes,onChange:u=>m({...d,escalationNotes:u.target.value}),disabled:!l,rows:3,placeholder:"Provide context for escalation...",className:`w-full resize-none rounded-lg border px-3 py-2 text-sm placeholder-slate-400 focus:outline-none focus:ring-1 disabled:bg-slate-50 disabled:text-slate-500 dark:disabled:bg-slate-900 dark:disabled:text-slate-400 ${h("escalationNotes")?"border-red-300 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-500 dark:border-red-700 dark:bg-red-950/20 dark:text-red-100":"border-slate-200 bg-white text-slate-900 focus:border-indigo-500 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"}`})]})]})]})]})}),e.jsx("div",{className:"border-t border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 rounded-lg border border-orange-200 bg-orange-50 px-4 py-2 text-sm font-medium text-orange-700 hover:bg-orange-100 dark:border-orange-900 dark:bg-orange-950/30 dark:text-orange-300 dark:hover:bg-orange-950/50",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Escalate Ticket"]}),e.jsxs("button",{onClick:A,className:"flex items-center justify-center gap-2 rounded-lg border border-green-200 bg-green-50 px-4 py-2 text-sm font-medium text-green-700 hover:bg-green-100 dark:border-green-900 dark:bg-green-950/30 dark:text-green-300 dark:hover:bg-green-950/50",children:[e.jsx(ge,{className:"h-4 w-4"}),"Close Ticket"]})]})})]})}function We({ticket:t,crmConnected:r=!0,crmName:s="Salesforce",onCreateCRMTicket:a,onSyncUpdate:l}){const[c,d]=j.useState(!1),[m,g]=j.useState({subject:t.messageSnippet||"",description:"",priority:t.priority||"medium",type:"Customer Issue"}),i={lastSync:"2024-12-31T09:30:00Z",crmTicketId:"SF-2024-0123",crmTicketUrl:"https://salesforce.com/tickets/SF-2024-0123"},k=()=>{a?.(m),d(!1)};return r?e.jsxs("div",{className:"flex h-full w-96 flex-col overflow-y-auto bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"CRM Integration"}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-green-100 px-2 py-1 dark:bg-green-950",children:[e.jsx(S,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:s})]})]})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Sync Status"}),e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4 dark:border-green-900 dark:bg-green-950/20",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"font-medium text-green-900 dark:text-green-100",children:["Synced with ",s]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-700 dark:text-green-300",children:[e.jsx(T,{className:"h-3 w-3"}),"Last synced"," ",new Date(i.lastSync).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.jsxs("div",{className:"text-xs text-green-700 dark:text-green-300",children:["Ticket ID: ",i.crmTicketId]})]})]}),e.jsx("button",{onClick:l,className:"rounded-lg p-2 text-green-600 hover:bg-green-100 dark:text-green-400 dark:hover:bg-green-950/50",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("a",{href:i.crmTicketUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-2 text-sm text-green-700 hover:text-green-800 dark:text-green-300 dark:hover:text-green-200",children:["View in ",s,e.jsx(X,{className:"h-4 w-4"})]})]})]}),!c&&!1,c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["Create ",s," Ticket"]}),e.jsx("button",{onClick:()=>d(!1),className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",children:"Cancel"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Subject"}),e.jsx("input",{type:"text",value:m.subject,onChange:b=>g({...m,subject:b.target.value}),placeholder:"Brief description",className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:b=>g({...m,description:b.target.value}),rows:4,placeholder:"Detailed description...",className:"w-full resize-none rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Priority"}),e.jsxs("select",{value:m.priority,onChange:b=>g({...m,priority:b.target.value}),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-700 dark:text-slate-300",children:"Type"}),e.jsxs("select",{value:m.type,onChange:b=>g({...m,type:b.target.value}),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"Customer Issue",children:"Customer Issue"}),e.jsx("option",{value:"Technical Problem",children:"Technical Problem"}),e.jsx("option",{value:"Feature Request",children:"Feature Request"}),e.jsx("option",{value:"Billing Question",children:"Billing Question"})]})]}),e.jsx("button",{onClick:k,className:"w-full rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:"Create Ticket"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Recent Updates"}),e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["Ticket created in ",s]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:new Date(i.lastSync).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),e.jsx(S,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]})})})]})]})]}):e.jsx("div",{className:"flex h-full w-96 flex-col items-center justify-center bg-slate-50 p-6 dark:bg-slate-900/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx(W,{className:"h-8 w-8 text-slate-400"})}),e.jsx("h3",{className:"mt-4 font-semibold text-slate-900 dark:text-white",children:"CRM Not Connected"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:"Connect your CRM to sync tickets and customer data"}),e.jsx("button",{className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:"Connect CRM"})]})})}function Ye({events:t}){const[r,s]=j.useState("all"),[a,l]=j.useState(!1),c=[{value:"all",label:"All Events",icon:H},{value:"status-change",label:"Status Changes",icon:S},{value:"assignment",label:"Assignments",icon:Q},{value:"note",label:"Notes",icon:w},{value:"reply",label:"Replies",icon:w},{value:"sla-breach",label:"SLA Breaches",icon:B},{value:"edit",label:"Edits",icon:se},{value:"tag-added",label:"Tags",icon:L},{value:"priority-change",label:"Priority Changes",icon:T}],d=r==="all"?t:t.filter(o=>o.type===r),m=o=>{switch(o){case"status-change":return S;case"assignment":return Q;case"note":case"reply":return w;case"sla-breach":return B;case"edit":return se;case"tag-added":return L;case"priority-change":return T;default:return H}},g=o=>{switch(o){case"status-change":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-950";case"assignment":return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-950";case"note":return"text-purple-600 bg-purple-100 dark:text-purple-400 dark:bg-purple-950";case"reply":return"text-indigo-600 bg-indigo-100 dark:text-indigo-400 dark:bg-indigo-950";case"sla-breach":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-950";case"edit":return"text-orange-600 bg-orange-100 dark:text-orange-400 dark:bg-orange-950";case"tag-added":return"text-sky-600 bg-sky-100 dark:text-sky-400 dark:bg-sky-950";case"priority-change":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-950";default:return"text-slate-600 bg-slate-100 dark:text-slate-400 dark:bg-slate-800"}},i=o=>{switch(o.type){case"status-change":return e.jsxs("span",{children:["changed status from ",e.jsx("strong",{children:o.data.from})," to"," ",e.jsx("strong",{children:o.data.to})]});case"assignment":return e.jsxs("span",{children:["assigned ticket to ",e.jsx("strong",{children:o.data.assignedTo})]});case"note":return e.jsxs("span",{children:["added a note: ",e.jsxs("span",{className:"italic",children:['"',o.data.content,'"']})]});case"reply":return e.jsxs("span",{children:["sent a reply: ",e.jsxs("span",{className:"italic",children:['"',o.data.content,'"']})]});case"sla-breach":return e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[e.jsx("strong",{children:"SLA breached:"})," ",o.data.slaType]});case"edit":return e.jsxs("span",{children:["edited ",e.jsx("strong",{children:o.data.field}),' from "',o.data.oldValue,'" to "',o.data.newValue,'"']});case"tag-added":return e.jsxs("span",{children:["added tag ",e.jsx("strong",{children:o.data.tag})]});case"priority-change":return e.jsxs("span",{children:["changed priority from ",e.jsx("strong",{children:o.data.from})," to"," ",e.jsx("strong",{children:o.data.to})]});default:return e.jsx("span",{children:"performed an action"})}},k=o=>{const p=new Date(o),f=new Date().getTime()-p.getTime(),h=Math.floor(f/6e4),u=Math.floor(f/36e5),C=Math.floor(f/864e5);return h<1?"Just now":h<60?`${h}m ago`:u<24?`${u}h ago`:C<7?`${C}d ago`:p.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},b=c.find(o=>o.value===r);return e.jsxs("div",{className:"flex h-full w-96 flex-col overflow-y-auto bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Timeline"}),e.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-medium text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:[d.length," events"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!a),className:"flex w-full items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsx(b.icon,{className:"h-4 w-4"}),e.jsx("span",{children:b?.label||"Filter"})]}),e.jsx(z,{className:"h-4 w-4"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsx("div",{className:"absolute left-0 right-0 top-full z-20 mt-1 rounded-lg border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-800",children:c.map(o=>{const p=o.icon;return e.jsxs("button",{onClick:()=>{s(o.value),l(!1)},className:`flex w-full items-center gap-2 px-3 py-2 text-sm transition-colors hover:bg-slate-50 dark:hover:bg-slate-700 ${r===o.value?"bg-indigo-50 text-indigo-600 dark:bg-indigo-950 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"}`,children:[e.jsx(p,{className:"h-4 w-4"}),o.label]},o.value)})})]})]})]}),e.jsx("div",{className:"flex-1 p-6",children:d.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-center",children:e.jsxs("div",{children:[e.jsx(H,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"No events to display"})]})}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute bottom-0 left-4 top-0 w-px bg-slate-200 dark:bg-slate-700"}),e.jsx("div",{className:"space-y-6",children:d.map(o=>{const p=m(o.type),A=g(o.type);return e.jsxs("div",{className:"relative flex gap-4",children:[e.jsx("div",{className:`relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${A}`,children:e.jsx(p,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 pb-2",children:[e.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o.user.avatarUrl?e.jsx("img",{src:o.user.avatarUrl,alt:o.user.name,className:"h-5 w-5 rounded-full"}):e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-slate-200 text-xs dark:bg-slate-700",children:o.user.name[0]}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:o.user.name})]}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:k(o.timestamp)})]}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:i(o)})]})]},o.id)})})]})})]})}function et({tickets:t,currentTicketId:r,onSelectTicket:s}){const[a,l]=j.useState(!0),c=t.findIndex(i=>i.id===r),d=t.slice(c+1,c+6),m={open:"bg-blue-100 text-blue-700 dark:bg-blue-950 dark:text-blue-300","in-progress":"bg-yellow-100 text-yellow-700 dark:bg-yellow-950 dark:text-yellow-300",resolved:"bg-green-100 text-green-700 dark:bg-green-950 dark:text-green-300",closed:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"},g={urgent:"text-red-600 dark:text-red-400",high:"text-orange-600 dark:text-orange-400",medium:"text-yellow-600 dark:text-yellow-400",low:"text-slate-600 dark:text-slate-400"};return a?e.jsxs("div",{className:"flex h-full w-80 flex-col border-r border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3 dark:border-slate-800",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Up Next"}),e.jsx("button",{onClick:()=>l(!1),className:"flex h-8 w-8 items-center justify-center rounded-lg text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",title:"Collapse queue",children:e.jsx(Se,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:d.length===0?e.jsx("div",{className:"flex h-full items-center justify-center p-6 text-center",children:e.jsxs("div",{children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"No more tickets in queue"})]})}):e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:d.map((i,k)=>e.jsxs("button",{onClick:()=>s?.(i.id),className:"w-full p-4 text-left transition-colors hover:bg-slate-50 dark:hover:bg-slate-800",children:[e.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-slate-100 text-xs font-medium text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:k+1}),i.author.avatarUrl?e.jsx("img",{src:i.author.avatarUrl,alt:i.author.name,className:"h-8 w-8 rounded-full"}):e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx(w,{className:"h-4 w-4 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:i.author.name}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[i.author.platform,"  ",i.interactionType]})]})]}),i.impactScore.tier==="vip"&&e.jsx(te,{className:"h-4 w-4 fill-purple-500 text-purple-500"})]}),e.jsx("p",{className:"mb-2 line-clamp-2 text-sm text-slate-600 dark:text-slate-400",children:i.messageSnippet}),e.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`rounded px-2 py-0.5 text-xs font-medium ${m[i.status]||m.open}`,children:i.status}),e.jsx("span",{className:`text-xs font-medium ${g[i.priority]||g.medium}`,children:i.priority}),i.sla.firstResponse.remainingMinutes<30&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-orange-600 dark:text-orange-400",children:[e.jsx(T,{className:"h-3 w-3"}),i.sla.firstResponse.remainingMinutes,"m"]})]}),i.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[i.tags.slice(0,2).map(b=>e.jsxs("span",{className:"flex items-center gap-1 rounded bg-slate-100 px-2 py-0.5 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:[e.jsx(L,{className:"h-3 w-3"}),b]},b)),i.tags.length>2&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",i.tags.length-2]})]})]},i.id))})}),e.jsx("div",{className:"border-t border-slate-200 p-4 dark:border-slate-800",children:e.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:[d.length," ticket",d.length!==1?"s":""," remaining"]})})]}):e.jsxs("div",{className:"flex h-full w-16 flex-col border-r border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("div",{className:"border-b border-slate-200 p-3 dark:border-slate-800",children:e.jsx("button",{onClick:()=>l(!0),className:"flex h-10 w-10 items-center justify-center rounded-lg text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",title:"Expand queue",children:e.jsx(O,{className:"h-5 w-5"})})}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:d.map(i=>e.jsxs("button",{onClick:()=>s?.(i.id),className:"group relative mb-2 flex w-full flex-col items-center gap-2 p-2 hover:bg-slate-50 dark:hover:bg-slate-800",title:`${i.author.name}: ${i.messageSnippet}`,children:[i.author.avatarUrl?e.jsx("img",{src:i.author.avatarUrl,alt:i.author.name,className:"h-8 w-8 rounded-full"}):e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx(w,{className:"h-4 w-4 text-slate-500"})}),i.priority==="urgent"&&e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500"}),i.impactScore.tier==="vip"&&e.jsx(te,{className:"h-3 w-3 fill-purple-500 text-purple-500"}),i.sla.firstResponse.remainingMinutes<30&&e.jsx(T,{className:"h-3 w-3 text-orange-500"})]},i.id))}),e.jsx("div",{className:"border-t border-slate-200 p-3 dark:border-slate-800",children:e.jsxs("div",{className:"text-center text-xs font-medium text-slate-500 dark:text-slate-400",children:["+",d.length]})})]})}function tt({classification:t}){if(!t)return e.jsxs("div",{className:"flex h-full w-96 flex-col bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Classification"})}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-6",children:e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No classification data available"})})]});const r={entityType:r.entityType||"N/A",sentiment:r.sentiment||"Neutral",intent:r.intent||"N/A",emotion:r.emotion||"N/A",emotionCluster:r.emotionCluster||"Neutral",upperCategories:r.upperCategories||[],categorizations:r.categorizations||[],aspectGroups:r.aspectGroups||[],ungroupedAspects:r.ungroupedAspects||[]},s=a=>{switch(a){case"Negative":return"text-rose-600 dark:text-rose-400";case"Positive":return"text-emerald-600 dark:text-emerald-400";default:return"text-slate-600 dark:text-slate-400"}};return e.jsxs("div",{className:"flex h-full w-96 flex-col overflow-y-auto bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Classification"})}),e.jsxs("div",{className:"flex-1 p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:[e.jsx(Ee,{className:"h-4 w-4"}),"AI Classifications"]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Entity Type"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:r.entityType})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Sentiment"}),e.jsx("span",{className:`font-medium ${r.sentiment==="Positive"?"text-emerald-600 dark:text-emerald-400":r.sentiment==="Negative"?"text-rose-600 dark:text-rose-400":"text-slate-600 dark:text-slate-400"}`,children:r.sentiment})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Intent"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:r.intent})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Emotion"}),e.jsx("span",{className:`font-medium ${s(r.emotionCluster)}`,children:r.emotion})]})]})]}),r.upperCategories&&r.upperCategories.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:[e.jsx(ue,{className:"h-4 w-4"}),"Customer's Intent (AI Upper Categories)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.upperCategories.map((a,l)=>e.jsx("span",{className:"rounded-lg bg-blue-100 px-3 py-1.5 text-sm font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:a},l))})]}),r.categorizations&&r.categorizations.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:[e.jsx(re,{className:"h-4 w-4"}),"Category Hierarchy"]}),e.jsx("div",{className:"space-y-2",children:r.categorizations.map((a,l)=>{const c=a.sentiment==="Negative"?"bg-rose-50 border-rose-200 dark:bg-rose-950/30 dark:border-rose-800":a.sentiment==="Positive"?"bg-emerald-50 border-emerald-200 dark:bg-emerald-950/30 dark:border-emerald-800":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700",d=a.sentiment==="Negative"?"text-rose-700 dark:text-rose-300":a.sentiment==="Positive"?"text-emerald-700 dark:text-emerald-300":"text-slate-700 dark:text-slate-300";return e.jsx("div",{className:`rounded-lg border p-4 ${c}`,children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:`font-medium ${d}`,children:a.category}),a.subcategory&&e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{className:`font-medium ${d}`,children:a.subcategory})]}),a.subSubcategory&&e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{className:`font-medium ${d}`,children:a.subSubcategory})]})]})},l)})})]}),r.aspectGroups&&r.aspectGroups.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:[e.jsx(de,{className:"h-4 w-4"}),"Aspect Groups"]}),e.jsx("div",{className:"space-y-3",children:r.aspectGroups.map((a,l)=>e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("h5",{className:"mb-3 font-medium text-slate-900 dark:text-white",children:a.name||a.groupName}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.aspects.map((c,d)=>{const m=typeof c=="string"?c:c.name;return e.jsx("span",{className:"rounded bg-slate-100 px-2 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:m},d)})})]},l))})]}),r.ungroupedAspects&&r.ungroupedAspects.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:[e.jsx(L,{className:"h-4 w-4"}),"Other Aspects"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.ungroupedAspects.map((a,l)=>{const c=typeof a=="string"?a:a.name;return e.jsx("span",{className:"rounded bg-slate-100 px-2 py-0.5 text-xs font-medium text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:c},l)})})]})]})]})}function jt({ticket:t,conversationThread:r,ticketQueue:s=[],timelineEvents:a=[],aiSuggestions:l,crmConnected:c=!1,crmName:d="Salesforce",messageInsights:m,onMessageInsightsChange:g,onSendReply:i,onAddNote:k,onChangeStatus:b,onChangePriority:o,onAddTag:p,onRemoveTag:A,onSelectTicket:f,onNextTicket:h,onSavePersonalDetails:u,onSaveTicketInfo:C,onEscalateTicket:v,onCloseTicket:E,onCreateCRMTicket:q,onSyncCRM:P,onExecuteAgentAction:Y,onClose:F}){const[N,V]=j.useState("customer"),[D,U]=j.useState(!1),_=t.interactionType==="email",I=()=>{if(!r?.emailThreadMetadata)return{};const M=r.emailThreadMetadata;return{defaultTo:M.originalParticipants?.from?.email||"",defaultCc:M.originalParticipants?.cc?.map(G=>G.email)||[]}};return e.jsxs("div",{className:"flex h-full flex-col bg-slate-50 dark:bg-slate-950",children:[e.jsx(He,{ticket:t,hasNextTicket:s.length>0,messageInsights:m,onMessageInsightsChange:g,onChangeStatus:b,onChangePriority:o,onAddTag:p,onRemoveTag:A,onNextTicket:h,onClose:F}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(et,{tickets:s,currentTicketId:t.id,onSelectTicket:f}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(ke,{conversationThread:r,ticket:t,messageInsights:m}),_?e.jsx(ve,{aiSuggestions:l,...I(),onSendReply:i,onAddNote:k,onPopOut:()=>U(!0)}):e.jsx(Ne,{aiSuggestions:l,onSendReply:i,onAddNote:k,ticketPlatform:t.channel?.platform||t.platform,ticketType:t.interactionType,mentionedUsers:t.mentionedUsers||[],enableAgentIQ:!0})]}),N==="customer"&&e.jsx(Qe,{ticket:t,crmConnected:c}),N==="classification"&&e.jsx(tt,{classification:t.classification}),N==="personal-details"&&e.jsx(Ze,{contact:t.contact||t.author,onSave:u}),N==="ticket-info"&&e.jsx(Xe,{ticket:t,onSave:C,onEscalate:()=>v?.({}),onClose:()=>E?.({})}),N==="crm-integration"&&e.jsx(We,{ticket:t,crmConnected:c,crmName:d,onCreateCRMTicket:q,onSyncUpdate:P}),N==="timeline"&&e.jsx(Ye,{events:a}),e.jsx(Je,{activeView:N,onViewChange:V,crmConnected:c})]}),_&&e.jsx(we,{isOpen:D,onClose:()=>U(!1),...I(),onSend:M=>{i?.(M.content),U(!1)}})]})}export{jt as T};
