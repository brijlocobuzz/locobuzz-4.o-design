import{r as u,j as e,O as R}from"./index-DqtLnMh1.js";function M({workflow:s,users:a,isActive:n,isDragging:k,isDropTarget:b,onDragStart:v,onDragOver:f,onDragEnd:S,onEdit:p,onDuplicate:j,onDelete:N,onToggle:A,onTest:W,onViewAnalytics:L,onViewVersionHistory:c}){const[g,l]=u.useState(!1),h=a.find(d=>d.id===s.createdBy),i=s.executionStats?.successRate??0,w=d=>{const m=new Date(d),o=new Date().getTime()-m.getTime(),x=Math.floor(o/6e4),C=Math.floor(o/36e5),I=Math.floor(o/864e5);return x<60?`${x}m ago`:C<24?`${C}h ago`:I<7?`${I}d ago`:m.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return e.jsx("div",{draggable:n,onDragStart:v,onDragOver:f,onDragEnd:S,className:`group transition-all duration-200 ${k?"opacity-40 scale-95":""} ${b?"bg-indigo-50 dark:bg-indigo-950/30 scale-[1.02]":""}`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 px-6 py-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("div",{className:"lg:col-span-1 flex items-center gap-3",children:n&&s.rank!==null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"shrink-0 cursor-move",title:"Drag to reorder",children:e.jsx("svg",{className:"w-5 h-5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),e.jsx("div",{className:"shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-sky-500 flex items-center justify-center text-white text-sm font-bold shadow-lg",children:s.rank})]}):e.jsx("div",{className:"shrink-0 w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400 dark:bg-slate-500"})})}),e.jsx("div",{className:"lg:col-span-4 flex flex-col gap-1 min-w-0",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:s.name}),s.tags&&s.tags.length>0&&e.jsx("span",{className:"shrink-0 px-2 py-0.5 bg-sky-100 dark:bg-sky-900/40 text-sky-700 dark:text-sky-300 text-xs rounded-full",children:s.tags[0]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500 dark:text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-400 dark:bg-slate-500"}),"v",s.currentVersion]}),h&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-400 dark:bg-slate-500"}),h.name]})]})]}),e.jsx("button",{onClick:()=>A?.(!s.isActive),className:`shrink-0 relative w-11 h-6 rounded-full transition-all duration-200 ${s.isActive?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-slate-300 dark:bg-slate-700"}`,title:s.isActive?"Active":"Inactive",children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm transition-transform duration-200 ${s.isActive?"translate-x-6":"translate-x-1"}`})})]})}),e.jsx("div",{className:"lg:col-span-2 flex items-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-slate-700 dark:text-slate-300 font-medium capitalize",children:s.trigger.event.replace(/_/g," ")}),s.trigger.channels&&s.trigger.channels.length>0&&e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 mt-0.5 capitalize",children:s.trigger.channels.join(", ")})]})}),e.jsx("div",{className:"lg:col-span-2 flex items-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("div",{className:`text-sm font-semibold ${i>=90?"text-green-600 dark:text-green-400":i>=70?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[i,"%"]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:"success"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:[(s.executionStats?.totalRuns??0).toLocaleString()," total runs"]})]})}),e.jsx("div",{className:"lg:col-span-2 flex items-center",children:e.jsx("div",{className:"text-sm",children:s.executionStats?.lastExecutedAt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-slate-700 dark:text-slate-300 font-medium",children:w(s.executionStats.lastExecutedAt)}),s.executionStats?.averageExecutionTime&&e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500 mt-0.5",children:["~",s.executionStats.averageExecutionTime,"ms avg"]})]}):e.jsx("div",{className:"text-slate-500 dark:text-slate-500 italic",children:"Never run"})})}),e.jsx("div",{className:"lg:col-span-1 flex items-center justify-end",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>l(!g),onBlur:()=>setTimeout(()=>l(!1),200),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"More actions",children:e.jsx("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),g&&e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 py-1 z-10",children:[e.jsx("button",{onClick:()=>{p?.(),l(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>{W?.(),l(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test Workflow"}),e.jsx("button",{onClick:()=>{j?.(),l(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Duplicate"}),e.jsx("button",{onClick:()=>{L?.(),l(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"View Analytics"}),e.jsx("button",{onClick:()=>{c?.(),l(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Version History"}),e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 my-1"}),e.jsx("button",{onClick:()=>{N?.(),l(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors",children:"Delete"})]})]})})]})})}function $({workflows:s,users:a,onCreateWorkflow:n,onEditWorkflow:k,onDuplicateWorkflow:b,onDeleteWorkflow:v,onToggleWorkflow:f,onReorderWorkflows:S,onTestWorkflow:p,onViewAnalytics:j,onViewVersionHistory:N,onFilterByStatus:A,onSearch:W,onClearFilters:L}){const[c,g]=u.useState(""),[l,h]=u.useState("all"),[i,w]=u.useState(null),[d,m]=u.useState(null),y=s.filter(t=>{const r=t.name.toLowerCase().includes(c.toLowerCase())||t.description.toLowerCase().includes(c.toLowerCase()),B=l==="all"||l==="active"&&t.isActive||l==="inactive"&&!t.isActive;return r&&B}),o=y.filter(t=>t.isActive&&t.rank!==null).sort((t,r)=>(t.rank||0)-(r.rank||0)),x=y.filter(t=>!t.isActive),C=t=>{w(t)},I=(t,r)=>{t.preventDefault(),m(r)},F=()=>{if(i&&d!==null){const t=[...o].filter(r=>r.workflowId!==i);t.splice(d-1,0,o.find(r=>r.workflowId===i)),S?.(t.map(r=>r.workflowId))}w(null),m(null)},E=t=>{g(t),W?.(t)},T=t=>{h(t),A?.(t)},V=()=>{g(""),h("all"),L?.()},D=c!==""||l!=="all";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50/30 to-sky-50/40 dark:from-slate-950 dark:via-indigo-950/20 dark:to-sky-950/10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12",children:[e.jsxs("div",{className:"mb-8 sm:mb-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-indigo-900 to-sky-700 dark:from-indigo-100 dark:to-sky-200 bg-clip-text text-transparent mb-2",children:"Workflows"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm sm:text-base max-w-2xl",children:"Automate your social media management with intelligent workflows. Build custom automation rules using AI-assisted creation or the visual canvas builder."})]}),e.jsx("button",{onClick:n,className:"shrink-0 px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 dark:from-indigo-500 dark:to-indigo-600 dark:hover:from-indigo-600 dark:hover:to-indigo-700 text-white rounded-lg font-medium shadow-lg shadow-indigo-500/30 hover:shadow-xl hover:shadow-indigo-500/40 transition-all duration-200 hover:scale-105",children:"+ Create Workflow"})]}),e.jsx("div",{className:"bg-sky-50 dark:bg-sky-950/30 border border-sky-200 dark:border-sky-800/50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"shrink-0 w-5 h-5 rounded-full bg-sky-500 dark:bg-sky-400 flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-white dark:text-sky-950",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm text-sky-900 dark:text-sky-100",children:[e.jsx("span",{className:"font-semibold",children:"Execution priority:"})," Only the highest-ranked workflow that matches will execute for each event. Active workflows can be reordered via drag and drop."]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:c,onChange:t=>E(t.target.value),placeholder:"Search workflows...",className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded-lg text-slate-900 dark:text-slate-100 placeholder:text-slate-500 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent transition-shadow"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T("all"),className:`px-4 py-2.5 rounded-lg font-medium transition-all duration-200 ${l==="all"?"bg-indigo-600 dark:bg-indigo-500 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:"All"}),e.jsx("button",{onClick:()=>T("active"),className:`px-4 py-2.5 rounded-lg font-medium transition-all duration-200 ${l==="active"?"bg-indigo-600 dark:bg-indigo-500 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:"Active"}),e.jsx("button",{onClick:()=>T("inactive"),className:`px-4 py-2.5 rounded-lg font-medium transition-all duration-200 ${l==="inactive"?"bg-indigo-600 dark:bg-indigo-500 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:"Inactive"})]}),D&&e.jsx("button",{onClick:V,className:"px-4 py-2.5 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-700 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Clear"})]})]}),o.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-indigo-500 to-sky-500 rounded-full"}),"Active Workflows",e.jsxs("span",{className:"text-sm font-normal text-slate-500 dark:text-slate-400",children:["(",o.length,")"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"hidden lg:grid grid-cols-12 gap-4 px-6 py-3 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:[e.jsx("div",{className:"col-span-1",children:"Rank"}),e.jsx("div",{className:"col-span-4",children:"Workflow"}),e.jsx("div",{className:"col-span-2",children:"Trigger"}),e.jsx("div",{className:"col-span-2",children:"Performance"}),e.jsx("div",{className:"col-span-2",children:"Last Run"}),e.jsx("div",{className:"col-span-1",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:o.map(t=>e.jsx(M,{workflow:t,users:a,isActive:t.isActive,isDragging:i===t.workflowId,isDropTarget:d===t.rank,onDragStart:()=>C(t.workflowId),onDragOver:r=>I(r,t.rank),onDragEnd:F,onEdit:()=>k?.(t.workflowId),onDuplicate:()=>b?.(t.workflowId),onDelete:()=>v?.(t.workflowId),onToggle:r=>f?.(t.workflowId,r),onTest:()=>p?.(t.workflowId),onViewAnalytics:()=>j?.(t.workflowId),onViewVersionHistory:()=>N?.(t.workflowId)},t.workflowId))})]})]}),x.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-slate-400 dark:bg-slate-600 rounded-full"}),"Inactive Workflows",e.jsxs("span",{className:"text-sm font-normal text-slate-500 dark:text-slate-400",children:["(",x.length,")"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden opacity-75",children:e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:x.map(t=>e.jsx(M,{workflow:t,users:a,isActive:!1,isDragging:!1,isDropTarget:!1,onEdit:()=>k?.(t.workflowId),onDuplicate:()=>b?.(t.workflowId),onDelete:()=>v?.(t.workflowId),onToggle:r=>f?.(t.workflowId,r),onTest:()=>p?.(t.workflowId),onViewAnalytics:()=>j?.(t.workflowId),onViewVersionHistory:()=>N?.(t.workflowId)},t.workflowId))})})]}),y.length===0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-sky-500 rounded-2xl mx-auto mb-4 flex items-center justify-center opacity-50",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:D?"No workflows found":"No workflows yet"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 max-w-md mx-auto",children:D?"Try adjusting your filters or search query.":"Get started by creating your first automation workflow. Use AI-assisted creation or the visual canvas builder."}),!D&&e.jsx("button",{onClick:n,className:"px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 dark:from-indigo-500 dark:to-indigo-600 dark:hover:from-indigo-600 dark:hover:to-indigo-700 text-white rounded-lg font-medium shadow-lg shadow-indigo-500/30 hover:shadow-xl hover:shadow-indigo-500/40 transition-all duration-200 hover:scale-105",children:"Create Your First Workflow"})]})]})})}function H(){const s=R;return e.jsx($,{workflows:s.workflows,users:s.users,onCreateWorkflow:()=>console.log("Create workflow"),onEditWorkflow:a=>console.log("Edit workflow:",a),onDuplicateWorkflow:a=>console.log("Duplicate workflow:",a),onDeleteWorkflow:a=>console.log("Delete workflow:",a),onToggleWorkflow:(a,n)=>console.log("Toggle workflow:",a,n),onReorderWorkflows:a=>console.log("Reorder workflows:",a),onTestWorkflow:a=>console.log("Test workflow:",a),onViewAnalytics:a=>console.log("View analytics:",a),onViewVersionHistory:a=>console.log("View version history:",a),onFilterByStatus:a=>console.log("Filter by status:",a),onFilterByTrigger:a=>console.log("Filter by trigger:",a),onFilterByTag:a=>console.log("Filter by tag:",a),onSearch:a=>console.log("Search:",a),onClearFilters:()=>console.log("Clear filters")})}export{H as default};
